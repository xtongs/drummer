# Drummer é¡¹ç›® AI åŠ©æ‰‹é…ç½®

> æœ¬æ–‡æ¡£ä¸º AI åŠ©æ‰‹æä¾›å®Œæ•´çš„å¼€å‘è§„èŒƒå’ŒæŒ‡å—

## ğŸ¯ å¿«é€Ÿå¯¼èˆª

| æ–‡æ¡£ | ç”¨é€” | è¯»è€… |
|------|------|------|
| **[.claude/CLAUDE.md](.claude/CLAUDE.md)** | æ ¸å¿ƒé—¨å«å’Œå¿«é€Ÿå‚è€ƒ | AI åŠ©æ‰‹ï¼ˆå…¥å£ï¼‰ |
| **[openspec/AGENTS.md](openspec/AGENTS.md)** | OpenSpec å®Œæ•´æµç¨‹ | AI åŠ©æ‰‹ï¼ˆè¯¦ç»†ï¼‰ |
| **[openspec/project.md](openspec/project.md)** | é¡¹ç›®ä¸Šä¸‹æ–‡å’ŒæŠ€æœ¯æ ˆ | AI åŠ©æ‰‹ + å¼€å‘è€… |
| **[openspec/specs/](openspec/specs/)** | åŠŸèƒ½è§„èŒƒç›®å½• | AI åŠ©æ‰‹ + å¼€å‘è€… |
| **[openspec/changes/](openspec/changes/)** | å˜æ›´ææ¡ˆç›®å½• | AI åŠ©æ‰‹ + å¼€å‘è€… |

---

## ğŸš¨ å˜æ›´åˆ†çº§é—¨å«

**åœ¨ä»»ä½•ä»£ç ä¿®æ”¹å‰ï¼ŒAI åŠ©æ‰‹å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š**

### 1ï¸âƒ£ åˆ¤æ–­å˜æ›´çº§åˆ«

è¯·å‘ç”¨æˆ·ç¡®è®¤æœ¬æ¬¡å˜æ›´å±äºå“ªä¸ªçº§åˆ«ï¼š

- **ğŸŸ¢ å¾®å°ä¿®æ”¹**ï¼ˆMinorï¼‰
  - ä¿®å¤ typo/æ³¨é‡Š
  - è°ƒæ•´æ ·å¼/é¢œè‰²/å¸¸é‡
  - ä»£ç æ ¼å¼åŒ–
  - ä¸æ”¹å˜ä¸šåŠ¡é€»è¾‘çš„é‡æ„
  - **æµç¨‹**ï¼šç›´æ¥å®ç° â†’ æµ‹è¯• â†’ æäº¤

- **ğŸŸ¡ å¸¸è§„åŠŸèƒ½**ï¼ˆFeatureï¼‰
  - æ–°å¢ä¸€ä¸ªåŠŸèƒ½ç‚¹
  - ä¿®æ”¹ç°æœ‰åŠŸèƒ½è¡Œä¸º
  - æ–°å¢/ä¿®æ”¹æµ‹è¯•ç”¨ä¾‹
  - **æµç¨‹**ï¼šå¿…é¡»æœ‰ proposal â†’ å®ç° â†’ éªŒè¯

- **ğŸ”´ é‡å¤§åŠŸèƒ½**ï¼ˆMajorï¼‰
  - è·¨å¤šä¸ªæ¨¡å—çš„å¤§å‹åŠŸèƒ½
  - æ¶æ„å±‚é¢çš„å˜æ›´
  - Breaking changes
  - **æµç¨‹**ï¼šå®Œæ•´ SDD/TDDï¼ˆproposal â†’ design â†’ tasks â†’ implement â†’ verify â†’ archiveï¼‰

### 2ï¸âƒ£ è§„èŒƒæ–‡æ¡£æ£€æŸ¥

- [ ] å¦‚æœæ˜¯"å¸¸è§„åŠŸèƒ½+"ï¼Œæ˜¯å¦æœ‰å¯¹åº”çš„ `openspec/changes/*/proposal.md`ï¼Ÿ
- [ ] å¦‚æœæ²¡æœ‰è§„èŒƒï¼ŒAI åŠ©æ‰‹å¿…é¡»**æ‹’ç»å®ç°**ï¼Œå¼•å¯¼ç”¨æˆ·å…ˆåˆ›å»ºææ¡ˆ

### 3ï¸âƒ£ æµ‹è¯•æ£€æŸ¥

- [ ] æ˜¯å¦æœ‰å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹ï¼Ÿ
- [ ] æµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¾¾åˆ° 80%ï¼Ÿ

### 4ï¸âƒ£ è§„èŒƒåŒæ­¥

- [ ] å¦‚æœä¿®æ”¹äº†åŠŸèƒ½è¡Œä¸ºï¼Œæ˜¯å¦åŒæ­¥æ›´æ–°äº† `openspec/specs/*/spec.md`ï¼Ÿ

**ç¤ºä¾‹å¯¹è¯**ï¼š

```
ç”¨æˆ·ï¼šå¸®æˆ‘æ·»åŠ ä¸€ä¸ªç§»åŠ¨ç«¯åŒå‡»åŠŸèƒ½

AIï¼šæˆ‘éœ€è¦å…ˆç¡®è®¤ä¸€ä¸‹è¿™ä¸ªå˜æ›´çš„çº§åˆ«ï¼š

è¿™ä¸ªå˜æ›´å±äºï¼š
- ğŸŸ¢ å¾®å°ä¿®æ”¹ï¼ˆè°ƒæ•´ç°æœ‰å¸¸é‡/æ ·å¼ï¼‰
- ğŸŸ¡ å¸¸è§„åŠŸèƒ½ï¼ˆæ–°å¢åŠŸèƒ½ç‚¹ï¼Œéœ€è¦åˆ›å»º proposalï¼‰
- ğŸ”´ é‡å¤§åŠŸèƒ½ï¼ˆè·¨æ¨¡å—/æ¶æ„å˜æ›´ï¼‰

æ ¹æ®æ‚¨çš„æè¿°ï¼Œè¿™å±äº"å¸¸è§„åŠŸèƒ½"ï¼Œæˆ‘éœ€è¦å…ˆå¼•å¯¼æ‚¨åˆ›å»º proposalã€‚

åœ¨ `openspec/changes/` ä¸­è¿è¡Œ `/proposal` å‘½ä»¤åˆ›å»ºææ¡ˆ...
```

---

## ğŸ“– æ ¸å¿ƒå¼€å‘æ–¹æ³•è®º

### OpenSpec è§„èŒƒé©±åŠ¨å¼€å‘ï¼ˆSDDï¼‰

æœ¬é¡¹ç›®ä½¿ç”¨ **OpenSpec** è¿›è¡Œè§„èŒƒé©±åŠ¨å¼€å‘ã€‚

**æ ¸å¿ƒåŸåˆ™**ï¼š**è§„èŒƒä¼˜å…ˆï¼ˆSpec Firstï¼‰** - åœ¨å†™ä»»ä½•ä»£ç ä¹‹å‰ï¼Œå¿…é¡»å…ˆæœ‰æ˜ç¡®çš„è§„èŒƒã€‚

**å¼€å‘æµç¨‹**ï¼š

```
ææ¡ˆ(proposal) â†’ è®¾è®¡(design) â†’ ä»»åŠ¡(tasks) â†’ å®ç°(implement) â†’ éªŒè¯(verify) â†’ å½’æ¡£(archive)
```

**å¿…é¡»éµå®ˆ**ï¼š

1. **æ–°åŠŸèƒ½/åŠŸèƒ½ä¿®æ”¹**ï¼šå¿…é¡»å…ˆåœ¨ `openspec/changes/` åˆ›å»º proposal
2. **å¤æ‚å˜æ›´**ï¼šå¿…é¡»æœ‰ design æ–‡æ¡£
3. **ç ´åæ€§å˜æ›´**ï¼šå¿…é¡»æ ‡æ³¨ **BREAKING** å¹¶æä¾›è¿ç§»æ–¹æ¡ˆ
4. **æµ‹è¯•**ï¼šéµå¾ª TDDï¼Œæ ¸å¿ƒé€»è¾‘è¦†ç›–ç‡ >= 80%

> ğŸ“˜ **å®Œæ•´æŒ‡å—**: [openspec/AGENTS.md](openspec/AGENTS.md)

### TDD æµ‹è¯•é©±åŠ¨å¼€å‘

éµå¾ª **çº¢-ç»¿-é‡æ„** æµç¨‹ï¼š

1. **çº¢ï¼ˆRedï¼‰** - å…ˆå†™æµ‹è¯•
   - ç¼–å†™å¤±è´¥çš„æµ‹è¯•
   - è¿è¡Œ `bun run test:watch`
   - ç¡®è®¤æµ‹è¯•å¤±è´¥

2. **ç»¿ï¼ˆGreenï¼‰** - å®ç°åŠŸèƒ½
   - ç¼–å†™æœ€å°‘é‡çš„ä»£ç ä½¿æµ‹è¯•é€šè¿‡
   - è¿è¡Œæµ‹è¯•ï¼Œç¡®è®¤é€šè¿‡

3. **é‡æ„ï¼ˆRefactorï¼‰**
   - åœ¨æµ‹è¯•ä¿æŠ¤ä¸‹é‡æ„ä»£ç 
   - ç¡®ä¿æ‰€æœ‰æµ‹è¯•ä»ç„¶é€šè¿‡

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| å‰ç«¯æ¡†æ¶ | React | ^18.2.0 |
| è¯­è¨€ | TypeScript | ^5.2.2 |
| æ„å»ºå·¥å…· | Vite | ^4.5.14 |
| æµ‹è¯•æ¡†æ¶ | Vitest | ^4.0.17 |
| æµ‹è¯•åº“ | React Testing Library | ^16.3.1 |
| åŒ…ç®¡ç†å™¨ | bun | (ä¼˜å…ˆä½¿ç”¨) |
| PWA | vite-plugin-pwa | ^1.2.0 |

---

## ğŸ“ å‘½åçº¦å®š

- **ç»„ä»¶**: `PascalCase` (ä¾‹: `PatternEditor`)
- **Hooks**: `use` + `camelCase` (ä¾‹: `usePattern`)
- **å·¥å…·å‡½æ•°**: `camelCase` (ä¾‹: `savePattern`)
- **å¸¸é‡**: `UPPER_SNAKE_CASE` (ä¾‹: `DEFAULT_BPM`)
- **ç±»å‹/æ¥å£**: `PascalCase` (ä¾‹: `Pattern`, `DrumType`)

---

## âœ… æäº¤å‰æ£€æŸ¥æ¸…å•

```bash
# 1. æµ‹è¯•
bun run test          # æ‰€æœ‰æµ‹è¯•é€šè¿‡

# 2. ç±»å‹æ£€æŸ¥
bun run typecheck     # æ—  TypeScript é”™è¯¯

# 3. ä»£ç æ£€æŸ¥
bun run lint          # æ—  ESLint è­¦å‘Š

# 4. è¦†ç›–ç‡æ£€æŸ¥
bun run test:coverage # æ ¸å¿ƒé€»è¾‘ >= 80%
```

---

## ğŸš€ å¸¸ç”¨å‘½ä»¤

```bash
bun run dev            # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bun run build          # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
bun run test:watch     # ç›‘è§†æ¨¡å¼æµ‹è¯•ï¼ˆå¼€å‘æ¨èï¼‰
bun run test:coverage  # æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
bun run typecheck      # ç±»å‹æ£€æŸ¥
bun run lint           # ä»£ç æ£€æŸ¥
bun run preview        # é¢„è§ˆç”Ÿäº§æ„å»º
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/       # UI ç»„ä»¶
â”œâ”€â”€ hooks/           # è‡ªå®šä¹‰ React Hooks
â”œâ”€â”€ types/           # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”œâ”€â”€ styles/          # å…¨å±€æ ·å¼
â””â”€â”€ test/            # æµ‹è¯•é…ç½®

openspec/
â”œâ”€â”€ project.md       # é¡¹ç›®ä¸Šä¸‹æ–‡
â”œâ”€â”€ AGENTS.md        # OpenSpec å®Œæ•´æŒ‡å—
â”œâ”€â”€ specs/           # åŠŸèƒ½è§„èŒƒ
â””â”€â”€ changes/         # å˜æ›´ææ¡ˆ
```

---

## ğŸ“š æ ¸å¿ƒæ•°æ®ç»“æ„

### Patternï¼ˆèŠ‚å¥å‹ï¼‰

```typescript
interface Pattern {
  id: string;
  name: string;
  bpm: number;
  timeSignature: [number, number];
  bars: number;
  grid: CellState[][];  // [drumIndex][beatIndex]
  drums: DrumType[];
  loopRange?: LoopRange;
  createdAt: number;
  updatedAt: number;
}
```

### CellStateï¼ˆå•å…ƒæ ¼çŠ¶æ€ï¼‰

| å€¼ | å¸¸é‡ | å«ä¹‰ |
|----|------|------|
| 0 | CELL_OFF | æœªæ¿€æ´» |
| 1 | CELL_NORMAL | æ­£å¸¸éŸ³ç¬¦ |
| 2 | CELL_GHOST | é¬¼éŸ³ï¼ˆå¼±éŸ³ï¼‰ |
| 3 | CELL_GRACE | å€šéŸ³ |
| 4 | CELL_DOUBLE_32 | åŒ 32 åˆ†éŸ³ç¬¦ |
| 5 | CELL_FIRST_32 | å‰åŠ 32 åˆ†éŸ³ç¬¦ |
| 6 | CELL_SECOND_32 | ååŠ 32 åˆ†éŸ³ç¬¦ |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **[README.md](README.md)** - é¡¹ç›®ä»‹ç»å’Œå¿«é€Ÿå¼€å§‹
- **[.claude/CLAUDE.md](.claude/CLAUDE.md)** - AI åŠ©æ‰‹æ ¸å¿ƒæŒ‡ä»¤
- **[openspec/AGENTS.md](openspec/AGENTS.md)** - OpenSpec å®Œæ•´æµç¨‹æŒ‡å—
- **[openspec/project.md](openspec/project.md)** - é¡¹ç›®ä¸Šä¸‹æ–‡å’Œçº¦å®š

---

_æœ€åæ›´æ–°: 2026-01-21_
