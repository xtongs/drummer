import{r as T,a as ur,c as Bt,g as dr,R as pr}from"./react-vendor-8a332d8f.js";import{s as en,G as xe,O as lt,P as fr,N as Et,F as Mt,g as mr,a as wa,b as hr}from"./audio-libs-2901efa1.js";import{S as tn,A as it,D as gr,R as xa,a as br,B as kr,V as Ba,F as vr,b as Sa,c as Ta}from"./graphics-libs-bbd9a815.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();var an={exports:{}},Ot={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yr=T,wr=Symbol.for("react.element"),xr=Symbol.for("react.fragment"),Br=Object.prototype.hasOwnProperty,Sr=yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tr={key:!0,ref:!0,__self:!0,__source:!0};function nn(t,a,e){var s,r={},n=null,o=null;e!==void 0&&(n=""+e),a.key!==void 0&&(n=""+a.key),a.ref!==void 0&&(o=a.ref);for(s in a)Br.call(a,s)&&!Tr.hasOwnProperty(s)&&(r[s]=a[s]);if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:wr,type:t,key:n,ref:o,props:r,_owner:Sr.current}}Ot.Fragment=xr;Ot.jsx=nn;Ot.jsxs=nn;an.exports=Ot;var i=an.exports,Qt={},Ca=ur;Qt.createRoot=Ca.createRoot,Qt.hydrateRoot=Ca.hydrateRoot;const Pa={"Crash 1":{allowGhost:!0,allowGrace:!0,allowThirtySecond:!0},"Crash 2":{allowGhost:!0,allowGrace:!0,allowThirtySecond:!0},"Hi-Hat Open":{allowGhost:!0,allowGrace:!0,allowThirtySecond:!0},"Hi-Hat Closed":{allowGhost:!0,allowGrace:!0,allowThirtySecond:!0},Ride:{allowGhost:!0,allowGrace:!0,allowThirtySecond:!0},"Tom 1":{allowGhost:!0,allowGrace:!0,allowThirtySecond:!0},"Tom 2":{allowGhost:!0,allowGrace:!0,allowThirtySecond:!0},Snare:{allowGhost:!0,allowGrace:!0,allowThirtySecond:!0},"Tom 3":{allowGhost:!0,allowGrace:!0,allowThirtySecond:!0},Kick:{allowGhost:!0,allowGrace:!0,allowThirtySecond:!0}},Pe=0,je=1,De=2,Ke=3,ze=4,Ve=5,He=6,_a=["Crash 1","Crash 2","Hi-Hat Open","Hi-Hat Closed","Ride","Tom 1","Tom 2","Snare","Tom 3","Kick"],mt=120,ea=[4,4],Rt=1,fe=4,rn=700,Cr={"Crash 1":{position:"above",symbol:"x",line:-2.5},"Crash 2":{position:"above",symbol:"o",line:-2},"Hi-Hat Open":{position:"above",symbol:"o",line:-1.5},"Hi-Hat Closed":{position:"above",symbol:"x",line:-1.5},Ride:{position:"above",symbol:"x",line:-1},"Tom 1":{position:"center",symbol:"●",line:-.5},"Tom 2":{position:"center",symbol:"●",line:0},Snare:{position:"center",symbol:"●",line:.5},"Tom 3":{position:"below",symbol:"●",line:1.5},Kick:{position:"below",symbol:"●",line:2.5}},sn=[9/10,8/9,7/8,6/7,5/6,2],Pr=["","x0.9","x0.8","x0.7","x0.6","x0.5"];function ut(t,a=sn){let e=1;for(let s=0;s<t;s++)e*=a[s%a.length];return e}const _r={en:{languageLabel:"Language",autoLabel:"Follow system",introTitle:"Features & Usage",introDescription:"A step-by-step guide for first-time users. Read top to bottom to learn the full workflow and discover hidden gestures.",privacyTitle:"Privacy Policy",privacyItems:["All pattern and setting data is stored on your device by default.","The app does not upload your personal data to external servers by default."],termsTitle:"Terms of Use",termsItems:["You are responsible for uploaded files and exported content.","Please use the app lawfully and respect third-party copyrights."],sampleSelectionTitle:"Drum Samples Selection",sampleSelectionDescription:"Choose between different sample variants (A/B/C) for each drum. Click to preview.",statusChecking:"Checking...",statusDownloading:"Downloading...",statusInstalling:"Installing...",statusActivating:"Activating...",statusLatestVersion:"Latest version",modalTitle:"About & Settings",tapHintShowSettings:"Tap 5 times quickly to show settings"},"zh-CN":{languageLabel:"语言",autoLabel:"跟随系统",introTitle:"功能与使用说明",introDescription:"为首次使用者提供的分步指南。请从上到下阅读，以学习完整工作流并发现隐藏手势。",privacyTitle:"隐私政策",privacyItems:["节奏型与设置数据默认仅保存在你的设备本地。","应用默认不会将你的个人数据上传到外部服务器。"],termsTitle:"用户协议",termsItems:["你需对上传文件与导出内容的合法性负责。","请在合法范围内使用本应用并尊重第三方版权。"],sampleSelectionTitle:"鼓组采样选择",sampleSelectionDescription:"可为每个鼓件选择 A/B/C 采样变体，点击按钮可立即预听。",statusChecking:"检查更新中...",statusDownloading:"下载中...",statusInstalling:"安装中...",statusActivating:"生效中...",statusLatestVersion:"已是最新版本",modalTitle:"关于与设置",tapHintShowSettings:"快速点击 5 次显示设置"},"zh-TW":{languageLabel:"語言",autoLabel:"跟隨系統",introTitle:"功能與使用說明",introDescription:"為首次使用者提供的逐步指南。請由上而下閱讀，以學習完整工作流程並發掘隱藏手勢。",privacyTitle:"隱私政策",privacyItems:["節奏型與設定資料預設僅儲存在你的裝置本機。","應用預設不會將你的個人資料上傳至外部伺服器。"],termsTitle:"使用者協議",termsItems:["你需對上傳檔案與匯出內容的合法性負責。","請在合法範圍內使用本應用並尊重第三方版權。"],sampleSelectionTitle:"鼓組取樣選擇",sampleSelectionDescription:"可為每個鼓件選擇 A/B/C 取樣變體，點擊按鈕可立即試聽。",statusChecking:"檢查更新中...",statusDownloading:"下載中...",statusInstalling:"安裝中...",statusActivating:"生效中...",statusLatestVersion:"已是最新版本",modalTitle:"關於與設定",tapHintShowSettings:"快速點擊 5 次顯示設定"},ja:{languageLabel:"言語",autoLabel:"システムに従う",introTitle:"機能と使い方",introDescription:"このクイックガイドで主要な操作、ジェスチャー、全体の流れを確認できます。",privacyTitle:"プライバシーポリシー",privacyItems:["パターンと設定データは既定で端末内に保存されます。","既定では個人データを外部サーバーへ送信しません。"],termsTitle:"利用規約",termsItems:["アップロードしたファイルと書き出し内容の責任は利用者が負います。","法令を守り、第三者の著作権を尊重して利用してください。"],modalTitle:"このアプリについてと設定",sampleSelectionTitle:"ドラムサンプル選択",sampleSelectionDescription:"各ドラムでサンプルのバリアント（A/B/C）を選べます。クリックして試聴できます。",statusChecking:"チェック中...",statusDownloading:"ダウンロード中...",statusInstalling:"インストール中...",statusActivating:"有効化中...",statusLatestVersion:"最新バージョン",tapHintShowSettings:"すばやく5回タップして設定を表示"},ko:{languageLabel:"언어",autoLabel:"시스템 언어 따르기",introTitle:"기능 및 사용법",introDescription:"핵심 조작, 제스처, 전체 워크플로를 빠르게 이해할 수 있습니다.",privacyTitle:"개인정보 처리방침",privacyItems:["패턴 및 설정 데이터는 기본적으로 기기에만 저장됩니다.","기본 설정에서는 개인 데이터를 외부 서버로 업로드하지 않습니다."],termsTitle:"이용약관",termsItems:["업로드 파일과 내보낸 콘텐츠에 대한 책임은 사용자에게 있습니다.","관련 법규를 준수하고 제3자 저작권을 존중해 주세요."],modalTitle:"앱 정보 및 설정",sampleSelectionTitle:"드럼 샘플 선택",sampleSelectionDescription:"각 드럼의 샘플 변형(A/B/C)을 선택할 수 있습니다. 클릭해서 미리 들어보세요.",statusChecking:"확인 중...",statusDownloading:"다운로드 중...",statusInstalling:"설치 중...",statusActivating:"적용 중...",statusLatestVersion:"최신 버전",tapHintShowSettings:"빠르게 5번 탭하여 설정 표시"},fr:{languageLabel:"Langue",autoLabel:"Suivre le système",introTitle:"Fonctions et utilisation",introDescription:"Consultez ce guide rapide pour comprendre les commandes principales et le flux complet.",privacyTitle:"Politique de confidentialité",privacyItems:["Les données de rythme et de réglages sont stockées localement sur votre appareil.","L'application n'envoie pas vos données personnelles vers des serveurs externes par défaut."],termsTitle:"Conditions d'utilisation",termsItems:["Vous êtes responsable des fichiers importés et du contenu exporté.","Veuillez utiliser l'application légalement et respecter les droits d'auteur tiers."],modalTitle:"À propos et paramètres",sampleSelectionTitle:"Sélection des échantillons de batterie",sampleSelectionDescription:"Choisissez une variante d’échantillon (A/B/C) pour chaque élément. Cliquez pour préécouter.",statusChecking:"Vérification...",statusDownloading:"Téléchargement...",statusInstalling:"Installation...",statusActivating:"Activation...",statusLatestVersion:"Dernière version",tapHintShowSettings:"Touchez rapidement 5 fois pour afficher les réglages"},de:{languageLabel:"Sprache",autoLabel:"Systemsprache",introTitle:"Funktionen und Nutzung",introDescription:"Diese Kurzanleitung erklärt die wichtigsten Bedienungen, Gesten und den Ablauf.",privacyTitle:"Datenschutz",privacyItems:["Rhythmus- und Einstellungsdaten werden standardmäßig lokal auf deinem Gerät gespeichert.","Standardmäßig werden keine personenbezogenen Daten an externe Server übertragen."],termsTitle:"Nutzungsbedingungen",termsItems:["Für hochgeladene Dateien und exportierte Inhalte bist du selbst verantwortlich.","Bitte nutze die App rechtmäßig und beachte Urheberrechte Dritter."],modalTitle:"Info & Einstellungen",sampleSelectionTitle:"Auswahl der Drum-Samples",sampleSelectionDescription:"Wähle für jedes Drum eine Sample-Variante (A/B/C). Klicke zum Vorhören.",statusChecking:"Prüfen...",statusDownloading:"Herunterladen...",statusInstalling:"Installieren...",statusActivating:"Aktivieren...",statusLatestVersion:"Aktuelle Version",tapHintShowSettings:"Tippe schnell 5-mal, um die Einstellungen anzuzeigen"},es:{languageLabel:"Idioma",autoLabel:"Seguir sistema",introTitle:"Funciones y uso",introDescription:"Lee esta guía rápida para conocer controles, gestos y el flujo completo.",privacyTitle:"Política de privacidad",privacyItems:["Los datos de patrones y ajustes se guardan localmente en tu dispositivo.","La aplicación no sube datos personales a servidores externos por defecto."],termsTitle:"Términos de uso",termsItems:["Eres responsable de los archivos subidos y del contenido exportado.","Usa la aplicación legalmente y respeta derechos de autor de terceros."],modalTitle:"Acerca de y ajustes",sampleSelectionTitle:"Selección de muestras de batería",sampleSelectionDescription:"Elige una variante de muestra (A/B/C) para cada tambor. Haz clic para previsualizar.",statusChecking:"Comprobando...",statusDownloading:"Descargando...",statusInstalling:"Instalando...",statusActivating:"Activando...",statusLatestVersion:"Última versión",tapHintShowSettings:"Toca 5 veces rápido para mostrar los ajustes"},pt:{languageLabel:"Idioma",autoLabel:"Seguir sistema",introTitle:"Recursos e uso",introDescription:"Leia este guia rápido para entender controles, gestos e o fluxo completo.",privacyTitle:"Política de privacidade",privacyItems:["Os dados de padrões e configurações são armazenados localmente no seu dispositivo.","Por padrão, o app não envia dados pessoais para servidores externos."],termsTitle:"Termos de uso",termsItems:["Você é responsável pelos arquivos enviados e conteúdo exportado.","Use o app de forma legal e respeite direitos autorais de terceiros."],modalTitle:"Sobre e configurações",sampleSelectionTitle:"Seleção de amostras de bateria",sampleSelectionDescription:"Escolha uma variante de amostra (A/B/C) para cada peça. Clique para pré-ouvir.",statusChecking:"Verificando...",statusDownloading:"Baixando...",statusInstalling:"Instalando...",statusActivating:"Ativando...",statusLatestVersion:"Versão mais recente",tapHintShowSettings:"Toque 5 vezes rapidamente para mostrar as configurações"},it:{languageLabel:"Lingua",autoLabel:"Segui sistema",introTitle:"Funzioni e utilizzo",introDescription:"Consulta questa guida rapida per conoscere controlli, gesti e flusso completo.",privacyTitle:"Informativa sulla privacy",privacyItems:["I dati di pattern e impostazioni sono salvati localmente sul dispositivo.","Per impostazione predefinita l'app non invia dati personali a server esterni."],termsTitle:"Termini di utilizzo",termsItems:["Sei responsabile dei file caricati e dei contenuti esportati.","Usa l'app in modo legale e rispetta i copyright di terze parti."],modalTitle:"Informazioni e impostazioni",sampleSelectionTitle:"Selezione campioni di batteria",sampleSelectionDescription:"Scegli una variante di campione (A/B/C) per ogni tamburo. Clicca per ascoltare l’anteprima.",statusChecking:"Controllo...",statusDownloading:"Download...",statusInstalling:"Installazione...",statusActivating:"Attivazione...",statusLatestVersion:"Ultima versione",tapHintShowSettings:"Tocca rapidamente 5 volte per mostrare le impostazioni"},ru:{languageLabel:"Язык",autoLabel:"Как в системе",introTitle:"Функции и использование",introDescription:"Прочитайте краткое руководство по основным действиям, жестам и рабочему процессу.",privacyTitle:"Политика конфиденциальности",privacyItems:["Данные паттернов и настроек по умолчанию хранятся локально на устройстве.","По умолчанию приложение не отправляет личные данные на внешние серверы."],termsTitle:"Пользовательское соглашение",termsItems:["Вы несете ответственность за загружаемые файлы и экспортируемый контент.","Используйте приложение законно и уважайте авторские права третьих лиц."],modalTitle:"О приложении и настройки",sampleSelectionTitle:"Выбор сэмплов ударных",sampleSelectionDescription:"Выберите вариант сэмпла (A/B/C) для каждого барабана. Нажмите, чтобы прослушать.",statusChecking:"Проверка...",statusDownloading:"Загрузка...",statusInstalling:"Установка...",statusActivating:"Активация...",statusLatestVersion:"Последняя версия",tapHintShowSettings:"Быстро нажмите 5 раз, чтобы показать настройки"},ar:{languageLabel:"اللغة",autoLabel:"اتباع لغة النظام",introTitle:"الميزات وطريقة الاستخدام",introDescription:"اقرأ هذا الدليل السريع لفهم عناصر التحكم الأساسية والإيماءات وسير العمل الكامل.",privacyTitle:"سياسة الخصوصية",privacyItems:["يتم حفظ بيانات الإيقاع والإعدادات على جهازك محليًا بشكل افتراضي.","لا يقوم التطبيق برفع بياناتك الشخصية إلى خوادم خارجية بشكل افتراضي."],termsTitle:"اتفاقية المستخدم",termsItems:["أنت مسؤول عن الملفات التي ترفعها والمحتوى الذي تصدّره.","يرجى استخدام التطبيق بشكل قانوني واحترام حقوق النشر الخاصة بالغير."],modalTitle:"حول التطبيق والإعدادات",sampleSelectionTitle:"اختيار عينات الطبول",sampleSelectionDescription:"اختر نسخة عيّنة (A/B/C) لكل طبلة. انقر للمعاينة.",statusChecking:"جارٍ التحقق...",statusDownloading:"جارٍ التنزيل...",statusInstalling:"جارٍ التثبيت...",statusActivating:"جارٍ التفعيل...",statusLatestVersion:"أحدث إصدار",tapHintShowSettings:"انقر 5 مرات بسرعة لإظهار الإعدادات"},hi:{languageLabel:"भाषा",autoLabel:"सिस्टम भाषा का पालन करें",introTitle:"फीचर और उपयोग",introDescription:"इस त्वरित गाइड से मुख्य कंट्रोल, जेस्चर और पूरा वर्कफ़्लो समझें।",privacyTitle:"गोपनीयता नीति",privacyItems:["पैटर्न और सेटिंग डेटा डिफ़ॉल्ट रूप से आपके डिवाइस पर स्थानीय रूप से सहेजा जाता है।","ऐप डिफ़ॉल्ट रूप से आपकी व्यक्तिगत जानकारी बाहरी सर्वर पर अपलोड नहीं करता।"],termsTitle:"उपयोग की शर्तें",termsItems:["अपलोड की गई फ़ाइलों और एक्सपोर्ट किए गए कंटेंट की ज़िम्मेदारी आपकी है।","कृपया ऐप का कानूनी रूप से उपयोग करें और तृतीय-पक्ष कॉपीराइट का सम्मान करें।"],modalTitle:"ऐप जानकारी और सेटिंग्स",sampleSelectionTitle:"ड्रम सैंपल चयन",sampleSelectionDescription:"हर ड्रम के लिए सैंपल वैरिएंट (A/B/C) चुनें। क्लिक करके प्रीव्यू सुनें।",statusChecking:"जाँच हो रही है...",statusDownloading:"डाउनलोड हो रहा है...",statusInstalling:"इंस्टॉल हो रहा है...",statusActivating:"सक्रिय किया जा रहा है...",statusLatestVersion:"नवीनतम संस्करण",tapHintShowSettings:"सेटिंग्स दिखाने के लिए जल्दी से 5 बार टैप करें"},th:{languageLabel:"ภาษา",autoLabel:"ตามภาษาระบบ",introTitle:"ฟีเจอร์และการใช้งาน",introDescription:"อ่านคู่มือสั้นนี้เพื่อเข้าใจการควบคุมหลัก ท่าทาง และเวิร์กโฟลว์ทั้งหมด",privacyTitle:"นโยบายความเป็นส่วนตัว",privacyItems:["ข้อมูลแพทเทิร์นและการตั้งค่าจะถูกเก็บไว้ในอุปกรณ์ของคุณเป็นค่าเริ่มต้น","แอปจะไม่อัปโหลดข้อมูลส่วนบุคคลไปยังเซิร์ฟเวอร์ภายนอกโดยค่าเริ่มต้น"],termsTitle:"ข้อตกลงผู้ใช้",termsItems:["คุณต้องรับผิดชอบต่อไฟล์ที่อัปโหลดและเนื้อหาที่ส่งออก","โปรดใช้งานแอปอย่างถูกกฎหมายและเคารพลิขสิทธิ์ของบุคคลที่สาม"],modalTitle:"เกี่ยวกับแอปและการตั้งค่า",sampleSelectionTitle:"เลือกตัวอย่างเสียงกลอง",sampleSelectionDescription:"เลือกตัวแปรเสียงตัวอย่าง (A/B/C) สำหรับกลองแต่ละชิ้น คลิกเพื่อฟังตัวอย่าง",statusChecking:"กำลังตรวจสอบ...",statusDownloading:"กำลังดาวน์โหลด...",statusInstalling:"กำลังติดตั้ง...",statusActivating:"กำลังเปิดใช้งาน...",statusLatestVersion:"เวอร์ชันล่าสุด",tapHintShowSettings:"แตะเร็ว ๆ 5 ครั้งเพื่อแสดงการตั้งค่า"},vi:{languageLabel:"Ngôn ngữ",autoLabel:"Theo hệ thống",introTitle:"Tính năng và cách dùng",introDescription:"Đọc hướng dẫn nhanh để nắm các thao tác chính, cử chỉ và toàn bộ quy trình.",privacyTitle:"Chính sách quyền riêng tư",privacyItems:["Dữ liệu nhịp và cài đặt được lưu cục bộ trên thiết bị của bạn theo mặc định.","Ứng dụng không tải dữ liệu cá nhân của bạn lên máy chủ bên ngoài theo mặc định."],termsTitle:"Điều khoản sử dụng",termsItems:["Bạn chịu trách nhiệm về tệp tải lên và nội dung xuất ra.","Vui lòng sử dụng ứng dụng hợp pháp và tôn trọng bản quyền của bên thứ ba."],modalTitle:"Giới thiệu và cài đặt",sampleSelectionTitle:"Chọn mẫu âm thanh trống",sampleSelectionDescription:"Chọn biến thể mẫu (A/B/C) cho từng trống. Nhấp để nghe thử.",statusChecking:"Đang kiểm tra...",statusDownloading:"Đang tải xuống...",statusInstalling:"Đang cài đặt...",statusActivating:"Đang kích hoạt...",statusLatestVersion:"Phiên bản mới nhất",tapHintShowSettings:"Chạm nhanh 5 lần để hiển thị cài đặt"},id:{languageLabel:"Bahasa",autoLabel:"Ikuti sistem",introTitle:"Fitur dan penggunaan",introDescription:"Baca panduan singkat ini untuk memahami kontrol, gestur, dan alur kerja lengkap.",privacyTitle:"Kebijakan privasi",privacyItems:["Data pola dan pengaturan disimpan secara lokal di perangkat Anda secara default.","Aplikasi tidak mengunggah data pribadi Anda ke server eksternal secara default."],termsTitle:"Syarat penggunaan",termsItems:["Anda bertanggung jawab atas file yang diunggah dan konten yang diekspor.","Gunakan aplikasi secara legal dan hormati hak cipta pihak ketiga."],modalTitle:"Tentang & pengaturan",sampleSelectionTitle:"Pilih sampel drum",sampleSelectionDescription:"Pilih varian sampel (A/B/C) untuk tiap drum. Klik untuk pratinjau.",statusChecking:"Memeriksa...",statusDownloading:"Mengunduh...",statusInstalling:"Memasang...",statusActivating:"Mengaktifkan...",statusLatestVersion:"Versi terbaru",tapHintShowSettings:"Ketuk cepat 5 kali untuk menampilkan pengaturan"},ms:{languageLabel:"Bahasa",autoLabel:"Ikut sistem",introTitle:"Ciri dan penggunaan",introDescription:"Baca panduan ringkas ini untuk memahami kawalan utama, gerak isyarat dan aliran kerja.",privacyTitle:"Dasar privasi",privacyItems:["Data corak dan tetapan disimpan secara setempat pada peranti anda secara lalai.","Aplikasi tidak memuat naik data peribadi anda ke pelayan luaran secara lalai."],termsTitle:"Terma penggunaan",termsItems:["Anda bertanggungjawab terhadap fail yang dimuat naik dan kandungan yang dieksport.","Sila gunakan aplikasi secara sah dan hormati hak cipta pihak ketiga."],modalTitle:"Perihal & tetapan",sampleSelectionTitle:"Pilihan sampel dram",sampleSelectionDescription:"Pilih varian sampel (A/B/C) untuk setiap dram. Klik untuk pratonton.",statusChecking:"Memeriksa...",statusDownloading:"Memuat turun...",statusInstalling:"Memasang...",statusActivating:"Mengaktifkan...",statusLatestVersion:"Versi terkini",tapHintShowSettings:"Ketik 5 kali dengan pantas untuk memaparkan tetapan"},tr:{languageLabel:"Dil",autoLabel:"Sistemi takip et",introTitle:"Özellikler ve kullanım",introDescription:"Temel kontrolleri, hareketleri ve tüm iş akışını öğrenmek için bu kısa kılavuzu okuyun.",privacyTitle:"Gizlilik politikası",privacyItems:["Ritim ve ayar verileri varsayılan olarak cihazınızda yerel olarak saklanır.","Uygulama varsayılan olarak kişisel verilerinizi harici sunuculara yüklemez."],termsTitle:"Kullanım koşulları",termsItems:["Yüklenen dosyalar ve dışa aktarılan içeriklerden siz sorumlusunuz.","Lütfen uygulamayı yasal şekilde kullanın ve üçüncü taraf telif haklarına saygı gösterin."],modalTitle:"Hakkında ve ayarlar",sampleSelectionTitle:"Davul örnekleri seçimi",sampleSelectionDescription:"Her davul için örnek varyantı (A/B/C) seçin. Önizlemek için tıklayın.",statusChecking:"Kontrol ediliyor...",statusDownloading:"İndiriliyor...",statusInstalling:"Yükleniyor...",statusActivating:"Etkinleştiriliyor...",statusLatestVersion:"En son sürüm",tapHintShowSettings:"Ayarları göstermek için hızlıca 5 kez dokunun"},pl:{languageLabel:"Język",autoLabel:"Zgodnie z systemem",introTitle:"Funkcje i użycie",introDescription:"Przeczytaj krótki przewodnik, aby poznać główne sterowanie, gesty i cały przepływ pracy.",privacyTitle:"Polityka prywatności",privacyItems:["Dane rytmów i ustawień są domyślnie zapisywane lokalnie na urządzeniu.","Aplikacja domyślnie nie wysyła danych osobowych na zewnętrzne serwery."],termsTitle:"Warunki użytkowania",termsItems:["Użytkownik odpowiada za przesłane pliki i eksportowane treści.","Korzystaj z aplikacji zgodnie z prawem i szanuj prawa autorskie osób trzecich."],modalTitle:"Informacje i ustawienia",sampleSelectionTitle:"Wybór sampli perkusji",sampleSelectionDescription:"Wybierz wariant sampla (A/B/C) dla każdego bębna. Kliknij, aby odsłuchać.",statusChecking:"Sprawdzanie...",statusDownloading:"Pobieranie...",statusInstalling:"Instalowanie...",statusActivating:"Aktywowanie...",statusLatestVersion:"Najnowsza wersja",tapHintShowSettings:"Stuknij szybko 5 razy, aby pokazać ustawienia"},nl:{languageLabel:"Taal",autoLabel:"Systeem volgen",introTitle:"Functies en gebruik",introDescription:"Lees deze snelle gids om de belangrijkste bediening, gebaren en workflow te begrijpen.",privacyTitle:"Privacybeleid",privacyItems:["Patroon- en instellingengegevens worden standaard lokaal op je apparaat opgeslagen.","De app uploadt standaard geen persoonlijke gegevens naar externe servers."],termsTitle:"Gebruiksvoorwaarden",termsItems:["Je bent verantwoordelijk voor geüploade bestanden en geëxporteerde inhoud.","Gebruik de app legaal en respecteer auteursrechten van derden."],modalTitle:"Over en instellingen",sampleSelectionTitle:"Selectie van drumsamples",sampleSelectionDescription:"Kies per drum een samplevariant (A/B/C). Klik om te beluisteren.",statusChecking:"Controleren...",statusDownloading:"Downloaden...",statusInstalling:"Installeren...",statusActivating:"Activeren...",statusLatestVersion:"Nieuwste versie",tapHintShowSettings:"Tik snel 5 keer om instellingen te tonen"},sv:{languageLabel:"Språk",autoLabel:"Följ systemet",introTitle:"Funktioner och användning",introDescription:"Läs den här snabbguiden för att förstå huvudkontroller, gester och hela arbetsflödet.",privacyTitle:"Integritetspolicy",privacyItems:["Mönster- och inställningsdata lagras lokalt på din enhet som standard.","Appen laddar inte upp personuppgifter till externa servrar som standard."],termsTitle:"Användarvillkor",termsItems:["Du ansvarar för uppladdade filer och exporterat innehåll.","Använd appen lagligt och respektera tredje parts upphovsrätt."],modalTitle:"Om appen och inställningar",sampleSelectionTitle:"Val av trumsamplingar",sampleSelectionDescription:"Välj en samplevariant (A/B/C) för varje trumma. Klicka för att förhandslyssna.",statusChecking:"Kontrollerar...",statusDownloading:"Laddar ner...",statusInstalling:"Installerar...",statusActivating:"Aktiverar...",statusLatestVersion:"Senaste versionen",tapHintShowSettings:"Tryck snabbt 5 gånger för att visa inställningar"},da:{languageLabel:"Sprog",autoLabel:"Følg system",introTitle:"Funktioner og brug",introDescription:"Læs denne korte guide for at forstå hovedkontroller, bevægelser og hele arbejdsgangen.",privacyTitle:"Privatlivspolitik",privacyItems:["Mønster- og indstillingsdata gemmes lokalt på din enhed som standard.","Appen uploader ikke persondata til eksterne servere som standard."],termsTitle:"Brugervilkår",termsItems:["Du er ansvarlig for uploadede filer og eksporteret indhold.","Brug appen lovligt og respekter tredjeparts ophavsrettigheder."],modalTitle:"Om appen og indstillinger",sampleSelectionTitle:"Valg af trommesamples",sampleSelectionDescription:"Vælg en sample-variant (A/B/C) for hver tromme. Klik for at forhøre.",statusChecking:"Tjekker...",statusDownloading:"Downloader...",statusInstalling:"Installerer...",statusActivating:"Aktiverer...",statusLatestVersion:"Seneste version",tapHintShowSettings:"Tryk hurtigt 5 gange for at vise indstillinger"},fi:{languageLabel:"Kieli",autoLabel:"Seuraa järjestelmää",introTitle:"Ominaisuudet ja käyttö",introDescription:"Lue tämä pikaopas, jotta ymmärrät päätoiminnot, eleet ja koko työnkulun.",privacyTitle:"Tietosuojakäytäntö",privacyItems:["Rytmi- ja asetustiedot tallennetaan oletuksena paikallisesti laitteellesi.","Sovellus ei oletuksena lähetä henkilötietojasi ulkoisille palvelimille."],termsTitle:"Käyttöehdot",termsItems:["Olet vastuussa ladatuista tiedostoista ja viedyistä sisällöistä.","Käytä sovellusta laillisesti ja kunnioita kolmansien osapuolten tekijänoikeuksia."],modalTitle:"Tietoja sovelluksesta ja asetukset",sampleSelectionTitle:"Rumpusamplejen valinta",sampleSelectionDescription:"Valitse jokaiselle rummulle sample-variantti (A/B/C). Klikkaa esikuunnellaksesi.",statusChecking:"Tarkistetaan...",statusDownloading:"Ladataan...",statusInstalling:"Asennetaan...",statusActivating:"Otetaan käyttöön...",statusLatestVersion:"Uusin versio",tapHintShowSettings:"Napauta nopeasti 5 kertaa näyttääksesi asetukset"},no:{languageLabel:"Språk",autoLabel:"Følg systemet",introTitle:"Funksjoner og bruk",introDescription:"Les denne hurtigguiden for å forstå hovedkontroller, gester og hele arbeidsflyten.",privacyTitle:"Personvernerklæring",privacyItems:["Mønster- og innstillingsdata lagres lokalt på enheten din som standard.","Appen laster ikke opp personopplysninger til eksterne servere som standard."],termsTitle:"Bruksvilkår",termsItems:["Du er ansvarlig for opplastede filer og eksportert innhold.","Bruk appen lovlig og respekter tredjeparts opphavsrett."],modalTitle:"Om appen og innstillinger",sampleSelectionTitle:"Valg av trommesamples",sampleSelectionDescription:"Velg en samplevariant (A/B/C) for hver tromme. Klikk for å forhåndslytte.",statusChecking:"Sjekker...",statusDownloading:"Laster ned...",statusInstalling:"Installerer...",statusActivating:"Aktiverer...",statusLatestVersion:"Nyeste versjon",tapHintShowSettings:"Trykk raskt 5 ganger for å vise innstillinger"}},jr={default:{languageLabel:"Language",autoLabel:"Follow system",introTitle:"Features & Usage",introDescription:"A step-by-step guide for first-time users. Read top to bottom to learn the full workflow and discover hidden gestures.",privacyTitle:"Privacy Policy",privacyItems:["All pattern and setting data is stored on your device by default.","The app does not upload your personal data to external servers by default."],termsTitle:"Terms of Use",termsItems:["You are responsible for uploaded files and exported content.","Please use the app lawfully and respect third-party copyrights."],sampleSelectionTitle:"Drum Samples Selection",sampleSelectionDescription:"Choose between different sample variants (A/B/C) for each drum. Click to preview.",statusChecking:"Checking...",statusDownloading:"Downloading...",statusInstalling:"Installing...",statusActivating:"Activating...",statusLatestVersion:"Latest version",modalTitle:"About & Settings",tapHintShowSettings:"Tap 5 times quickly to show settings"},translations:_r},Ar={"zh-CN":{"Crash 1":"强音镲 1","Crash 2":"强音镲 2","Hi-Hat Open":"开镲","Hi-Hat Closed":"闭镲",Ride:"叮叮镲","Tom 1":"高音桶鼓","Tom 2":"中音桶鼓",Snare:"军鼓","Tom 3":"低音桶鼓",Kick:"底鼓"},"zh-TW":{"Crash 1":"強音鈸 1","Crash 2":"強音鈸 2","Hi-Hat Open":"開鈸","Hi-Hat Closed":"閉鈸",Ride:"叮叮鈸","Tom 1":"高音桶鼓","Tom 2":"中音桶鼓",Snare:"軍鼓","Tom 3":"低音桶鼓",Kick:"底鼓"},ja:{"Hi-Hat Open":"オープンハイハット","Hi-Hat Closed":"クローズドハイハット",Ride:"ライド",Snare:"スネア",Kick:"キック"},ko:{"Hi-Hat Open":"오픈 하이햇","Hi-Hat Closed":"클로즈드 하이햇",Ride:"라이드",Snare:"스네어",Kick:"킥"},fr:{"Hi-Hat Open":"Charleston ouvert","Hi-Hat Closed":"Charleston fermé",Ride:"Ride",Snare:"Caisse claire",Kick:"Grosse caisse"},de:{"Hi-Hat Open":"Hi-Hat offen","Hi-Hat Closed":"Hi-Hat geschlossen",Ride:"Ride",Snare:"Snare",Kick:"Bassdrum"},es:{"Hi-Hat Open":"Hi-hat abierto","Hi-Hat Closed":"Hi-hat cerrado",Ride:"Ride",Snare:"Caja",Kick:"Bombo"},pt:{"Hi-Hat Open":"Chimbal aberto","Hi-Hat Closed":"Chimbal fechado",Ride:"Ride",Snare:"Caixa",Kick:"Bumbo"},it:{"Hi-Hat Open":"Charleston aperto","Hi-Hat Closed":"Charleston chiuso",Ride:"Ride",Snare:"Rullante",Kick:"Cassa"},ru:{"Hi-Hat Open":"Хай-хэт открытый","Hi-Hat Closed":"Хай-хэт закрытый",Ride:"Райд",Snare:"Малый барабан",Kick:"Бочка"},ar:{"Hi-Hat Open":"هاي هات مفتوح","Hi-Hat Closed":"هاي هات مغلق",Ride:"رايد",Snare:"سنير",Kick:"باس درام"},hi:{"Hi-Hat Open":"ओपन हाई-हैट","Hi-Hat Closed":"क्लोज्ड हाई-हैट",Ride:"राइड",Snare:"स्नेयर",Kick:"किक"},th:{"Hi-Hat Open":"ไฮแฮตเปิด","Hi-Hat Closed":"ไฮแฮตปิด",Ride:"ไรด์",Snare:"สแนร์",Kick:"กระเดื่อง"},vi:{"Hi-Hat Open":"Hi-hat mở","Hi-Hat Closed":"Hi-hat đóng",Ride:"Ride",Snare:"Snare",Kick:"Kick"},id:{"Hi-Hat Open":"Hi-hat terbuka","Hi-Hat Closed":"Hi-hat tertutup",Ride:"Ride",Snare:"Snare",Kick:"Kick"},ms:{"Hi-Hat Open":"Hi-hat terbuka","Hi-Hat Closed":"Hi-hat tertutup",Ride:"Ride",Snare:"Snare",Kick:"Kick"},tr:{"Hi-Hat Open":"Açık hi-hat","Hi-Hat Closed":"Kapalı hi-hat",Ride:"Ride",Snare:"Trampet",Kick:"Kick"},pl:{"Hi-Hat Open":"Hi-hat otwarty","Hi-Hat Closed":"Hi-hat zamknięty",Ride:"Ride",Snare:"Werbel",Kick:"Stopa"},nl:{"Hi-Hat Open":"Open hi-hat","Hi-Hat Closed":"Gesloten hi-hat",Ride:"Ride",Snare:"Snare",Kick:"Kick"},sv:{"Hi-Hat Open":"Öppen hi-hat","Hi-Hat Closed":"Stängd hi-hat",Ride:"Ride",Snare:"Virvel",Kick:"Bastrumma"},da:{"Hi-Hat Open":"Åben hi-hat","Hi-Hat Closed":"Lukket hi-hat",Ride:"Ride",Snare:"Lilletromme",Kick:"Stortromme"},fi:{"Hi-Hat Open":"Avoin hi-hat","Hi-Hat Closed":"Suljettu hi-hat",Ride:"Ride",Snare:"Virveli",Kick:"Bassorumpu"},no:{"Hi-Hat Open":"Åpen hi-hat","Hi-Hat Closed":"Lukket hi-hat",Ride:"Ride",Snare:"Skarptromme",Kick:"Basstromme"}},Ir={default:{"Crash 1":"Crash 1","Crash 2":"Crash 2","Hi-Hat Open":"Hi-Hat Open","Hi-Hat Closed":"Hi-Hat Closed",Ride:"Ride","Tom 1":"Tom 1","Tom 2":"Tom 2",Snare:"Snare","Tom 3":"Tom 3",Kick:"Kick"},translations:Ar},Nr={sectionTopBarTitle:"Top Bar: Metronome and Tempo",sectionPatternsTitle:"Patterns, Bars, and Loop Range",sectionGridTitle:"Grid Editor and Notation",sectionActionButtonsTitle:"Action Buttons (Right Side)",sectionBgmTitle:"Background Music (Practice Mode)",sectionSettingsTitle:"Settings and About",labelBeatDots:"Beat dots",tailBeatDots:"click to cycle time signatures (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"click for 0.5 BPM steps, press and hold to keep changing.",labelBpmNumber:"BPM number",tailBpmNumber:"tap the left/right side of the digits to cycle speed rates (a rate label appears).",labelPlay:"Play",tailPlay:"start or stop playback. Long-press to reset the loop counter to 0.",labelTabs:"Tabs",tailTabs:"the circle is Draft; letter tabs are saved patterns. Click a tab to load it.",labelNewPattern:"New pattern",tailNewPattern:"save the current draft as a new pattern tab.",labelImportPattern:"Import pattern",tailImportPattern:"load a pattern zip file.",labelBars:"Bars",tailBars:"remove or add a bar (uses your cursor position when possible).",labelLoopRange:"Loop range",tailLoopRange:"choose start/end pattern and bar; press and hold the +/- buttons to move faster.",labelPerBarBpm:"Per-bar BPM",tailPerBarBpm:"click to set or clear BPM for the current bar.",labelCopyPaste:"Copy/Paste",tailCopyPaste:"duplicate a whole pattern grid before or after.",labelSingleClickTap:"Single click/tap",tailSingleClickTap:"toggle a cell on or off.",labelDoubleClickTap:"Double-click/tap",tailDoubleClickTap:"cycle 32nd-note states (double, first, second, back to normal).",labelLongPressActiveCell:"Long-press on an active cell",tailLongPressActiveCell:"cycle note type (normal to ghost to grace) when supported.",labelNotationView:"Notation view",tailNotationView:"double-click/tap to jump the playhead (disabled only when playing with a rate label active).",labelCountIn:"Count-in",tailCountIn:"toggle a one-bar count-in before playback.",labelPracticeMode:"Practice mode",tailPracticeMode:"show background music and volume controls.",labelPlayBottom:"Play (bottom)",tailPlayBottom:"tap to play/pause. Long-press to stop and jump to the loop start.",labelSaveCurrent:"Save current",tailSaveCurrent:"save edits to the current pattern. Long-press to export a pattern zip (includes BGM).",labelDelete:"Delete",tailDelete:"remove the current pattern.",labelClear:"Clear",tailClear:"short press clears the current bar, long-press clears all bars.",labelUpload:"Upload",tailUpload:"add an MP3 file, or delete it.",labelVolume:"Volume",tailVolume:"click or press-and-hold to adjust. Click the % number to mute/unmute.",labelOffset:"Offset",tailOffset:"click the ms/s value to type an exact offset (disabled while playing).",labelPatternVolume:"Pattern volume",tailPatternVolume:"the right-side controls adjust drum volume (same +/- and mute behavior).",labelTheme:"Theme",tailTheme:"click to cycle themes.",labelBackupRestore:"Backup and Restore",tailBackupRestore:"import or export all data as a zip file.",labelSettings:"Settings",tailSettings:"open this.",tailUploadBeforeDelete:"add an MP3 file, or",tailUploadAfterDelete:"to delete it."},Rr={sectionTopBarTitle:"トップバー: メトロノームとテンポ",sectionPatternsTitle:"パターン、小節、ループ範囲",sectionGridTitle:"グリッドエディターと表記法",sectionActionButtonsTitle:"アクションボタン（右側）",sectionBgmTitle:"BGM (練習モード)",sectionSettingsTitle:"設定と概要",labelBeatDots:"拍点ドット",tailBeatDots:"クリックして拍子記号を切り替えます (4/4、3/4、2/4、6/8、5/4、7/8)。",labelTempo:"テンポ",tailTempo:"クリックして 0.5 BPM ステップ、押し続けると変化し続けます。",labelBpmNumber:"BPM数",tailBpmNumber:"数字の左側/右側をタップして速度レートを切り替えます (レートラベルが表示されます)。",labelPlay:"再生",tailPlay:"再生を開始または停止します。長押しするとループカウンターが0にリセットされます。",labelTabs:"タブ",tailTabs:"サークルはドラフトです。文字タブは保存されたパターンです。タブをクリックしてロードします。",labelNewPattern:"新しいパターン",tailNewPattern:"現在のドラフトを新しいパターン タブとして保存します。",labelImportPattern:"インポートパターン",tailImportPattern:"パターンの zip ファイルをロードします。",labelBars:"小節",tailBars:"小節を削除または追加します（可能な場合はカーソル位置を使用します）。",labelLoopRange:"ループ範囲",tailLoopRange:"開始/終了パターンとバーを選択します。 +/- ボタンを押し続けると、より速く移動します。",labelPerBarBpm:"小節あたりの BPM",tailPerBarBpm:"クリックして、現在の小節の BPM を設定またはクリアします。",labelCopyPaste:"コピー/ペースト",tailCopyPaste:"パターングリッド全体を前後に複製します。",labelSingleClickTap:"シングルクリック/タップ",tailSingleClickTap:"セルのオンとオフを切り替えます。",labelDoubleClickTap:"ダブルクリック/タップ",tailDoubleClickTap:"32 分音符の状態をサイクルします (二重、最初、二番目、通常に戻ります)。",labelLongPressActiveCell:"アクティブなセルを長押しします",tailLongPressActiveCell:"サイクルノートタイプ (ノーマルからゴースト、グレース) (サポートされている場合)。",labelNotationView:"記譜ビュー",tailNotationView:"ダブルクリック/タップして再生ヘッドをジャンプします (レート ラベルがアクティブな状態で再生している場合のみ無効になります)。",labelCountIn:"カウントイン",tailCountIn:"再生前に 1 小節のカウントインを切り替えます。",labelPracticeMode:"練習モード",tailPracticeMode:"BGM と音量コントロールを表示します。",labelPlayBottom:"遊ぶ（下）",tailPlayBottom:"タップして再生/一時停止します。長押しすると停止し、ループの開始にジャンプします。",labelSaveCurrent:"現在の保存",tailSaveCurrent:"現在のパターンへの編集を保存します。長押しすると、パターン zip (BGM 付き) がエクスポートされます。",labelDelete:"消去",tailDelete:"現在のパターンを削除します。",labelClear:"クリア",tailClear:"短く押すと現在のバーがクリアされ、長押しするとすべてのバーがクリアされます。",labelUpload:"アップロード",tailUpload:"MP3 ファイルを追加するか、削除します。",labelVolume:"音量",tailVolume:"クリックするか長押しして調整します。 % 数字をクリックしてミュート/ミュート解除します。",labelOffset:"オフセット",tailOffset:"ms/s 値をクリックして正確なオフセットを入力します (再生中は無効になります)。",labelPatternVolume:"パターンボリューム",tailPatternVolume:"右側のコントロールはドラムの音量を調整します (+/- とミュートの動作は同じです)。",labelTheme:"テーマ",tailTheme:"クリックしてテーマを循環させます。",labelBackupRestore:"バックアップと復元",tailBackupRestore:"すべてのデータを zip ファイルとしてインポートまたはエクスポートします。",labelSettings:"設定",tailSettings:"これを開けてください。",tailUploadBeforeDelete:"MP3 ファイルを追加するか、削除します。",tailUploadAfterDelete:""},Dr={sectionTopBarTitle:"상단 바: 메트로놈 및 템포",sectionPatternsTitle:"리듬 패턴, 마디, 루프 범위",sectionGridTitle:"그리드 편집기 및 표기법",sectionActionButtonsTitle:"동작 버튼(오른쪽)",sectionBgmTitle:"배경음악(연습모드)",sectionSettingsTitle:"설정 및 정보",labelBeatDots:"박자 점",tailBeatDots:"박자표(4/4, 3/4, 2/4, 6/8, 5/4, 7/8)를 순환하려면 클릭하세요.",labelTempo:"속도",tailTempo:"0.5 BPM 단계를 보려면 클릭하고, 계속 변경하려면 길게 누르세요.",labelBpmNumber:"BPM 번호",tailBpmNumber:"숫자의 왼쪽/오른쪽을 탭하면 속도 비율이 순환됩니다(속도 라벨이 나타납니다).",labelPlay:"재생",tailPlay:"재생을 시작하거나 중지합니다. 루프 카운터를 0으로 재설정하려면 길게 누르세요.",labelTabs:"탭",tailTabs:"원은 초안입니다. 문자 탭은 저장된 패턴입니다. 탭을 클릭하면 로드됩니다.",labelNewPattern:"새로운 패턴",tailNewPattern:"현재 초안을 새 패턴 탭으로 저장합니다.",labelImportPattern:"가져오기 패턴",tailImportPattern:"패턴 zip 파일을 로드합니다.",labelBars:"마디",tailBars:"마디를 제거하거나 추가합니다(가능한 경우 커서 위치 사용).",labelLoopRange:"루프 범위",tailLoopRange:"시작/끝 패턴과 막대를 선택합니다. 더 빠르게 이동하려면 +/- 버튼을 길게 누르세요.",labelPerBarBpm:"마디당 BPM",tailPerBarBpm:"현재 막대의 BPM을 설정하거나 지우려면 클릭하세요.",labelCopyPaste:"복사/붙여넣기",tailCopyPaste:"전체 패턴 그리드를 전후에 복제합니다.",labelSingleClickTap:"단일 클릭/탭",tailSingleClickTap:"셀을 켜거나 끕니다.",labelDoubleClickTap:"더블클릭/탭",tailDoubleClickTap:"32번째 음 상태를 순환합니다(이중, 첫 번째, 두 번째, 다시 정상으로).",labelLongPressActiveCell:"활성 셀을 길게 누르기",tailLongPressActiveCell:"지원되는 경우 노트 유형을 전환합니다(일반 -> 고스트 노트 -> 꾸밈음).",labelNotationView:"표기법 보기",tailNotationView:"재생 헤드를 이동하려면 두 번 클릭/탭하세요(속도 레이블이 활성화된 상태에서 재생하는 경우에만 비활성화됨).",labelCountIn:"카운트인",tailCountIn:"재생 전에 한 마디 카운트인을 전환합니다.",labelPracticeMode:"연습 모드",tailPracticeMode:"배경 음악 및 볼륨 컨트롤을 표시합니다.",labelPlayBottom:"플레이(아래)",tailPlayBottom:"탭하여 재생/일시 중지하세요. 중지하고 루프 시작으로 이동하려면 길게 누르세요.",labelSaveCurrent:"현재 저장",tailSaveCurrent:"현재 패턴에 대한 편집 내용을 저장합니다. 패턴 zip(BGM 포함)을 내보내려면 길게 누르세요.",labelDelete:"삭제",tailDelete:"현재 패턴을 제거합니다.",labelClear:"분명한",tailClear:"짧게 누르면 현재 막대가 지워지고, 길게 누르면 모든 막대가 지워집니다.",labelUpload:"업로드",tailUpload:"MP3 파일을 추가하거나 삭제하세요.",labelVolume:"용량",tailVolume:"조정하려면 클릭하거나 길게 누르세요. 음소거/음소거 해제하려면 % 숫자를 클릭하세요.",labelOffset:"오프셋",tailOffset:"정확한 오프셋을 입력하려면 ms/s 값을 클릭하세요(재생 중에는 비활성화됨).",labelPatternVolume:"패턴 볼륨",tailPatternVolume:"오른쪽 컨트롤은 드럼 볼륨을 조정합니다(동일한 +/- 및 음소거 동작).",labelTheme:"주제",tailTheme:"테마를 순환하려면 클릭하세요.",labelBackupRestore:"백업 및 복원",tailBackupRestore:"모든 데이터를 zip 파일로 가져오거나 내보냅니다.",labelSettings:"설정",tailSettings:"이것을 열어라.",tailUploadBeforeDelete:"MP3 파일을 추가하거나 삭제하세요.",tailUploadAfterDelete:""},Lr={sectionTopBarTitle:"Barre supérieure : métronome et tempo",sectionPatternsTitle:"Rythmes, mesures et plage de boucle",sectionGridTitle:"Éditeur de grille et notation",sectionActionButtonsTitle:"Boutons d'action (côté droit)",sectionBgmTitle:"Musique de fond (mode entraînement)",sectionSettingsTitle:"Paramètres et À propos",labelBeatDots:"Points de temps",tailBeatDots:"cliquez pour faire défiler les signatures rythmiques (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"cliquez pour des pas de 0,5 BPM, appuyez et maintenez pour continuer à changer.",labelBpmNumber:"Numéro de BPM",tailBpmNumber:"appuyez sur le côté gauche/droit des chiffres pour faire défiler les taux de vitesse (une étiquette de taux apparaît).",labelPlay:"Lire",tailPlay:"démarrer ou arrêter la lecture. Appuyez longuement pour remettre le compteur de boucle à 0.",labelTabs:"Onglets",tailTabs:"le cercle est Draft ; les onglets de lettres sont des patterns enregistrés. Cliquez sur un onglet pour le charger.",labelNewPattern:"Nouveau pattern",tailNewPattern:"enregistrez le brouillon actuel comme un nouvel onglet de pattern.",labelImportPattern:"Importer un pattern",tailImportPattern:"chargez un fichier zip de pattern.",labelBars:"Mesures",tailBars:"supprimer ou ajouter une mesure (utilise la position de votre curseur lorsque cela est possible).",labelLoopRange:"Plage de boucle",tailLoopRange:"choisissez le pattern et la mesure de début/fin ; appuyez et maintenez les boutons +/- pour vous déplacer plus rapidement.",labelPerBarBpm:"BPM par mesure",tailPerBarBpm:"cliquez pour définir ou effacer le BPM de la barre actuelle.",labelCopyPaste:"Copier/Coller",tailCopyPaste:"dupliquez une grille de motifs entière avant ou après.",labelSingleClickTap:"Un simple clic/appui",tailSingleClickTap:"activer ou désactiver une cellule.",labelDoubleClickTap:"Double-cliquez/appuyez",tailDoubleClickTap:"cycle des états de croche (double, première, seconde, retour à la normale).",labelLongPressActiveCell:"Appui long sur une cellule active",tailLongPressActiveCell:"alternez le type de note (normale -> note fantôme -> note d'ornement) lorsque pris en charge.",labelNotationView:"Vue Notation",tailNotationView:"double-cliquez/appuyez pour sauter la tête de lecture (désactivé uniquement lors de la lecture avec une étiquette de taux active).",labelCountIn:"Décompte",tailCountIn:"basculer un décompte d’une mesure avant la lecture.",labelPracticeMode:"Mode entraînement",tailPracticeMode:"afficher la musique de fond et les commandes de volume.",labelPlayBottom:"Jouer (en bas)",tailPlayBottom:"appuyez pour lire/mettre en pause. Appuyez longuement pour arrêter et passer au début de la boucle.",labelSaveCurrent:"Enregistrer le courant",tailSaveCurrent:"enregistrer les modifications du pattern actuel. Appuyez longuement pour exporter un zip de pattern (inclut la musique de fond).",labelDelete:"Supprimer",tailDelete:"supprimer le pattern actuel.",labelClear:"Clair",tailClear:"un appui court efface la barre actuelle, un appui long efface toutes les barres.",labelUpload:"Télécharger",tailUpload:"ajoutez un fichier MP3 ou supprimez-le.",labelVolume:"Volume",tailVolume:"cliquez ou maintenez enfoncé pour régler. Cliquez sur le nombre % pour désactiver/réactiver le son.",labelOffset:"Compenser",tailOffset:"cliquez sur la valeur ms/s pour saisir un décalage exact (désactivé pendant la lecture).",labelPatternVolume:"Volume du pattern",tailPatternVolume:"les commandes de droite ajustent le volume de la batterie (même comportement +/- et muet).",labelTheme:"Thème",tailTheme:"cliquez pour parcourir les thèmes.",labelBackupRestore:"Sauvegarde et restauration",tailBackupRestore:"importer ou exporter toutes les données sous forme de fichier zip.",labelSettings:"Paramètres",tailSettings:"ouvrez ceci.",tailUploadBeforeDelete:"ajoutez un fichier MP3 ou supprimez-le.",tailUploadAfterDelete:""},zr={sectionTopBarTitle:"Obere Leiste: Metronom und Tempo",sectionPatternsTitle:"Patterns, Takte und Loop-Bereich",sectionGridTitle:"Rastereditor und Notation",sectionActionButtonsTitle:"Aktionsschaltflächen (rechte Seite)",sectionBgmTitle:"Hintergrundmusik (Übungsmodus)",sectionSettingsTitle:"Einstellungen und Info",labelBeatDots:"Taktpunkte",tailBeatDots:"Klicken Sie, um die Taktarten (4/4, 3/4, 2/4, 6/8, 5/4, 7/8) zu durchlaufen.",labelTempo:"Tempo",tailTempo:"Klicken Sie für 0,5-BPM-Schritte und halten Sie die Taste gedrückt, um die Änderung fortzusetzen.",labelBpmNumber:"BPM-Nummer",tailBpmNumber:"Tippen Sie auf die linke/rechte Seite der Ziffern, um die Geschwindigkeitsraten zu wechseln (eine Geschwindigkeitsbezeichnung wird angezeigt).",labelPlay:"Abspielen",tailPlay:"Wiedergabe starten oder stoppen. Durch langes Drücken wird der Schleifenzähler auf 0 zurückgesetzt.",labelTabs:"Tabs",tailTabs:"der Kreis ist Entwurf; Buchstabentabulatoren sind gespeicherte Muster. Klicken Sie auf eine Registerkarte, um sie zu laden.",labelNewPattern:"Neues Muster",tailNewPattern:"Speichern Sie den aktuellen Entwurf als neue Musterregisterkarte.",labelImportPattern:"Muster importieren",tailImportPattern:"Laden Sie eine Muster-ZIP-Datei.",labelBars:"Takte",tailBars:"Einen Takt entfernen oder hinzufügen (verwendet nach Möglichkeit die Cursorposition).",labelLoopRange:"Schleifenbereich",tailLoopRange:"Wählen Sie Start-/Endmuster und Takt; Halten Sie die +/- Tasten gedrückt, um sich schneller zu bewegen.",labelPerBarBpm:"BPM pro Takt",tailPerBarBpm:"Klicken Sie, um den BPM für den aktuellen Takt festzulegen oder zu löschen.",labelCopyPaste:"Kopieren/Einfügen",tailCopyPaste:"Duplizieren Sie ein ganzes Musterraster vorher oder nachher.",labelSingleClickTap:"Einmaliges Klicken/Tippen",tailSingleClickTap:"Schalten Sie eine Zelle ein oder aus.",labelDoubleClickTap:"Doppelklicken/tippen",tailDoubleClickTap:"Zyklus 32tel-Notenzustände (doppelt, erste, zweite, zurück zum Normalzustand).",labelLongPressActiveCell:"Drücken Sie lange auf eine aktive Zelle",tailLongPressActiveCell:"Zyklusnotentyp (normal über Geisterton bis Vorschlag), sofern unterstützt.",labelNotationView:"Notationsansicht",tailNotationView:"Doppelklicken/tippen Sie, um zum Abspielkopf zu springen (nur deaktiviert, wenn mit aktiver Geschwindigkeitsbezeichnung abgespielt wird).",labelCountIn:"Einzählen",tailCountIn:"Schalten Sie vor der Wiedergabe einen eintaktigen Vorzähler um.",labelPracticeMode:"Übungsmodus",tailPracticeMode:"Hintergrundmusik und Lautstärkeregler anzeigen.",labelPlayBottom:"Spielen (unten)",tailPlayBottom:"Tippen Sie zum Abspielen/Pause. Zum Stoppen und Springen zum Schleifenanfang gedrückt halten.",labelSaveCurrent:"Aktuelles speichern",tailSaveCurrent:"Speichern Sie Änderungen am aktuellen Muster. Lange drücken, um eine Muster-ZIP-Datei zu exportieren (einschließlich Hintergrundmusik).",labelDelete:"Löschen",tailDelete:"Entfernen Sie das aktuelle Muster.",labelClear:"Klar",tailClear:"Kurzes Drücken löscht den aktuellen Balken, langes Drücken löscht alle Balken.",labelUpload:"Hochladen",tailUpload:"Fügen Sie eine MP3-Datei hinzu oder löschen Sie sie.",labelVolume:"Volumen",tailVolume:"Zum Anpassen klicken oder gedrückt halten. Klicken Sie auf die %-Zahl, um die Stummschaltung bzw. die Stummschaltung aufzuheben.",labelOffset:"Versatz",tailOffset:"Klicken Sie auf den ms/s-Wert, um einen genauen Offset einzugeben (während der Wiedergabe deaktiviert).",labelPatternVolume:"Mustervolumen",tailPatternVolume:"Die Regler auf der rechten Seite passen die Lautstärke des Schlagzeugs an (gleiches Verhalten bei +/- und Stummschaltung).",labelTheme:"Thema",tailTheme:"Klicken Sie, um Themen zu durchlaufen.",labelBackupRestore:"Sichern und Wiederherstellen",tailBackupRestore:"Alle Daten als ZIP-Datei importieren oder exportieren.",labelSettings:"Einstellungen",tailSettings:"öffne das.",tailUploadBeforeDelete:"Fügen Sie eine MP3-Datei hinzu oder löschen Sie sie.",tailUploadAfterDelete:""},Er={sectionTopBarTitle:"Barra superior: metrónomo y tempo",sectionPatternsTitle:"Patrones, compases y rango de bucle",sectionGridTitle:"Editor de cuadrícula y notación",sectionActionButtonsTitle:"Botones de acción (lado derecho)",sectionBgmTitle:"Música de fondo (modo de práctica)",sectionSettingsTitle:"Configuración y acerca de",labelBeatDots:"Puntos de pulso",tailBeatDots:"haga clic para alternar los tipos de compás (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"haga clic para ver pasos de 0,5 BPM, mantenga presionado para seguir cambiando.",labelBpmNumber:"número de BPM",tailBpmNumber:"toque el lado izquierdo/derecho de los dígitos para cambiar las velocidades (aparece una etiqueta de velocidad).",labelPlay:"Reproducir",tailPlay:"iniciar o detener la reproducción. Mantenga presionado para restablecer el contador de bucle a 0.",labelTabs:"Cortina a la italiana",tailTabs:"el círculo es Borrador; las pestañas de letras son patrones guardados. Haga clic en una pestaña para cargarla.",labelNewPattern:"Nuevo patrón",tailNewPattern:"guarde el borrador actual como una nueva pestaña de patrón.",labelImportPattern:"Patrón de importación",tailImportPattern:"cargue un archivo zip de patrón.",labelBars:"Compases",tailBars:"eliminar o agregar un compás (usa la posición del cursor cuando sea posible).",labelLoopRange:"rango de bucle",tailLoopRange:"elija el patrón y la barra de inicio/fin; Mantenga presionados los botones +/- para moverse más rápido.",labelPerBarBpm:"BPM por barra",tailPerBarBpm:"haga clic para establecer o borrar BPM para la barra actual.",labelCopyPaste:"Copiar/Pegar",tailCopyPaste:"duplicar una cuadrícula de patrón completa antes o después.",labelSingleClickTap:"Un solo clic/toque",tailSingleClickTap:"activar o desactivar una celda.",labelDoubleClickTap:"Haga doble clic/toque",tailDoubleClickTap:"ciclo de estados de 32 notas (doble, primera, segunda, regreso a la normalidad).",labelLongPressActiveCell:"Mantenga presionada una celda activa",tailLongPressActiveCell:"tipo de nota cíclica (normal a fantasma a gracia) cuando sea compatible.",labelNotationView:"Vista de notación",tailNotationView:"haga doble clic/toque para saltar el cursor de reproducción (deshabilitado solo cuando se reproduce con una etiqueta de tarifa activa).",labelCountIn:"cuenta atrás",tailCountIn:"alternar una cuenta atrás de un compás antes de la reproducción.",labelPracticeMode:"Modo practica",tailPracticeMode:"mostrar música de fondo y controles de volumen.",labelPlayBottom:"Jugar (abajo)",tailPlayBottom:"toque para reproducir/pausar. Mantenga presionado para detener y saltar al inicio del bucle.",labelSaveCurrent:"Guardar actual",tailSaveCurrent:"guardar las ediciones del patrón actual. Mantenga presionado para exportar un patrón zip (incluye música de fondo).",labelDelete:"Borrar",tailDelete:"eliminar el patrón actual.",labelClear:"Claro",tailClear:"una pulsación breve borra la barra actual, una pulsación larga borra todas las barras.",labelUpload:"Subir",tailUpload:"agregue un archivo MP3 o elimínelo.",labelVolume:"Volumen",tailVolume:"haga clic o mantenga presionado para ajustar. Haga clic en el número % para silenciar/activar el silencio.",labelOffset:"Compensar",tailOffset:"haga clic en el valor ms/s para escribir un desplazamiento exacto (deshabilitado durante la reproducción).",labelPatternVolume:"Volumen del patrón",tailPatternVolume:"los controles del lado derecho ajustan el volumen del tambor (mismo comportamiento +/- y silencio).",labelTheme:"Tema",tailTheme:"haga clic para recorrer los temas.",labelBackupRestore:"Copia de seguridad y restauración",tailBackupRestore:"importar o exportar todos los datos como un archivo zip.",labelSettings:"Ajustes",tailSettings:"abre esto.",tailUploadBeforeDelete:"agregue un archivo MP3 o elimínelo.",tailUploadAfterDelete:""},Mr={sectionTopBarTitle:"Barra superior: metrônomo e andamento",sectionPatternsTitle:"Padrões, compassos e faixa de loop",sectionGridTitle:"Editor de grade e notação",sectionActionButtonsTitle:"Botões de ação (lado direito)",sectionBgmTitle:"Música de fundo (modo de prática)",sectionSettingsTitle:"Configurações e sobre",labelBeatDots:"Pontos de pulso",tailBeatDots:"clique para alternar as assinaturas de compasso (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"clique para passos de 0,5 BPM, pressione e segure para continuar mudando.",labelBpmNumber:"Número de BPM",tailBpmNumber:"toque no lado esquerdo/direito dos dígitos para percorrer as taxas de velocidade (uma etiqueta de taxa aparece).",labelPlay:"Reproduzir",tailPlay:"iniciar ou parar a reprodução. Pressione longamente para redefinir o contador de loop para 0.",labelTabs:"Guias",tailTabs:"o círculo é Rascunho; guias de letras são padrões salvos. Clique em uma guia para carregá-la.",labelNewPattern:"Novo padrão",tailNewPattern:"salve o rascunho atual como uma nova guia de padrão.",labelImportPattern:"Padrão de importação",tailImportPattern:"carregue um arquivo zip padrão.",labelBars:"Compassos",tailBars:"remova ou adicione um compasso (usa a posição do cursor quando possível).",labelLoopRange:"Faixa de loop",tailLoopRange:"escolha o padrão e barra de início/fim; pressione e segure os botões +/- para mover mais rápido.",labelPerBarBpm:"BPM por barra",tailPerBarBpm:"clique para definir ou limpar o BPM da barra atual.",labelCopyPaste:"Copiar/Colar",tailCopyPaste:"duplique toda uma grade de padrões antes ou depois.",labelSingleClickTap:"Clique/toque único",tailSingleClickTap:"ativar ou desativar uma célula.",labelDoubleClickTap:"Clique duas vezes/toque",tailDoubleClickTap:"ciclo dos estados da 32ª nota (duplo, primeira, segunda, volta ao normal).",labelLongPressActiveCell:"Mantenha pressionado uma célula ativa",tailLongPressActiveCell:"tipo de nota de ciclo (normal para fantasma para graça) quando suportado.",labelNotationView:"Visualização de notação",tailNotationView:"clique duas vezes/toque para pular o indicador de reprodução (desativado apenas ao jogar com um rótulo de taxa ativo).",labelCountIn:"Contagem",tailCountIn:"alternar uma contagem de um compasso antes da reprodução.",labelPracticeMode:"Modo de prática",tailPracticeMode:"mostrar música de fundo e controles de volume.",labelPlayBottom:"Jogar (parte inferior)",tailPlayBottom:"toque para reproduzir/pausar. Mantenha pressionado para parar e pular para o início do loop.",labelSaveCurrent:"Salvar atual",tailSaveCurrent:"salve as edições no padrão atual. Mantenha pressionado para exportar um zip padrão (inclui BGM).",labelDelete:"Excluir",tailDelete:"remova o padrão atual.",labelClear:"Claro",tailClear:"um toque curto limpa a barra atual, um toque longo limpa todas as barras.",labelUpload:"Carregar",tailUpload:"adicione um arquivo MP3 ou exclua-o.",labelVolume:"Volume",tailVolume:"clique ou pressione e segure para ajustar. Clique no número % para ativar/desativar o som.",labelOffset:"Desvio",tailOffset:"clique no valor ms/s para digitar um deslocamento exato (desativado durante a reprodução).",labelPatternVolume:"Volume padrão",tailPatternVolume:"os controles do lado direito ajustam o volume da bateria (mesmo comportamento +/- e mudo).",labelTheme:"Tema",tailTheme:"clique para percorrer os temas.",labelBackupRestore:"Backup e restauração",tailBackupRestore:"importe ou exporte todos os dados como um arquivo zip.",labelSettings:"Configurações",tailSettings:"abra isso.",tailUploadBeforeDelete:"adicione um arquivo MP3 ou exclua-o.",tailUploadAfterDelete:""},Or={sectionTopBarTitle:"Barra superiore: metronomo e tempo",sectionPatternsTitle:"Pattern, battute e intervallo di loop",sectionGridTitle:"Editor della griglia e notazione",sectionActionButtonsTitle:"Pulsanti di azione (lato destro)",sectionBgmTitle:"Musica di sottofondo (modalità pratica)",sectionSettingsTitle:"Impostazioni e Informazioni",labelBeatDots:"Punti del beat",tailBeatDots:"fare clic per scorrere le indicazioni del tempo (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"fare clic per incrementi di 0,5 BPM, tenere premuto per continuare a modificare.",labelBpmNumber:"Numero di BPM",tailBpmNumber:"toccare il lato sinistro/destro delle cifre per scorrere le velocità (viene visualizzata un'etichetta della tariffa).",labelPlay:"Riproduci",tailPlay:"avviare o interrompere la riproduzione. Premere a lungo per ripristinare il contatore del loop su 0.",labelTabs:"Schede",tailTabs:"il cerchio è Bozza; le schede con lettere sono pattern salvati. Fai clic su una scheda per caricarla.",labelNewPattern:"Nuovo pattern",tailNewPattern:"salva la bozza corrente come una nuova scheda pattern.",labelImportPattern:"Importa pattern",tailImportPattern:"carica un file zip di pattern.",labelBars:"Battute",tailBars:"rimuovere o aggiungere una battuta (usa la posizione del cursore quando possibile).",labelLoopRange:"Gamma del ciclo",tailLoopRange:"scegliere il pattern e la barra di inizio/fine; tieni premuti i pulsanti +/- per muoverti più velocemente.",labelPerBarBpm:"BPM per battuta",tailPerBarBpm:"fare clic per impostare o cancellare i BPM per la barra corrente.",labelCopyPaste:"Copia/Incolla",tailCopyPaste:"duplicare un'intera griglia di pattern prima o dopo.",labelSingleClickTap:"Clic/tocco singolo",tailSingleClickTap:"attiva o disattiva una cella.",labelDoubleClickTap:"Fare doppio clic/toccare",tailDoubleClickTap:"ciclare gli stati di croma (doppia, prima, seconda, ritorno alla normalità).",labelLongPressActiveCell:"Premi a lungo su una cella attiva",tailLongPressActiveCell:"cambia il tipo di nota (normale -> nota fantasma -> acciaccatura) se supportato.",labelNotationView:"Vista della notazione",tailNotationView:"fare doppio clic/toccare per passare alla testina di riproduzione (disabilitato solo durante la riproduzione con un'etichetta di velocità attiva).",labelCountIn:"Conteggio",tailCountIn:"attiva o disattiva il conteggio iniziale di una battuta prima della riproduzione.",labelPracticeMode:"Modalità pratica",tailPracticeMode:"mostra la musica di sottofondo e i controlli del volume.",labelPlayBottom:"Gioca (in basso)",tailPlayBottom:"toccare per riprodurre/mettere in pausa. Premi a lungo per interrompere e passare all'inizio del loop.",labelSaveCurrent:"Risparmia corrente",tailSaveCurrent:"salva le modifiche al pattern corrente. Premi a lungo per esportare un file zip di pattern (include BGM).",labelDelete:"Eliminare",tailDelete:"rimuovi il pattern corrente.",labelClear:"Chiaro",tailClear:"una pressione breve cancella la barra corrente, una pressione prolungata cancella tutte le barre.",labelUpload:"Caricamento",tailUpload:"aggiungere un file MP3 o eliminarlo.",labelVolume:"Volume",tailVolume:"fare clic o tenere premuto per regolare. Fare clic sul numero % per disattivare/attivare l'audio.",labelOffset:"Offset",tailOffset:"fare clic sul valore ms/s per digitare un offset esatto (disabilitato durante la riproduzione).",labelPatternVolume:"Volume del pattern",tailPatternVolume:"i controlli sul lato destro regolano il volume della batteria (stesso comportamento +/- e muto).",labelTheme:"Tema",tailTheme:"fare clic per scorrere i temi.",labelBackupRestore:"Backup e ripristino",tailBackupRestore:"importare o esportare tutti i dati come file zip.",labelSettings:"Impostazioni",tailSettings:"apri questo.",tailUploadBeforeDelete:"aggiungere un file MP3 o eliminarlo.",tailUploadAfterDelete:""},Ur={sectionTopBarTitle:"Верхняя панель: метроном и темп",sectionPatternsTitle:"Паттерны, такты и диапазон лупа",sectionGridTitle:"Редактор сетки и обозначения",sectionActionButtonsTitle:"Кнопки действий (правая сторона)",sectionBgmTitle:"Фоновая музыка (режим практики)",sectionSettingsTitle:"Настройки и О программе",labelBeatDots:"Точки долей",tailBeatDots:"щелкните, чтобы переключать тактовые размеры (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Темп",tailTempo:"нажмите, чтобы увидеть шаг 0,5 BPM, нажмите и удерживайте, чтобы продолжить изменение.",labelBpmNumber:"номер BPM",tailBpmNumber:"нажимайте на левую/правую часть цифр, чтобы переключать скорости (появляется метка скорости).",labelPlay:"Воспроизвести",tailPlay:"запустить или остановить воспроизведение. Нажмите и удерживайте, чтобы сбросить счетчик циклов на 0.",labelTabs:"Вкладки",tailTabs:"круг — Черновик; буквенные вкладки — сохраненные паттерны. Нажмите вкладку, чтобы загрузить ее.",labelNewPattern:"Новый паттерн",tailNewPattern:"сохраните текущий черновик как новую вкладку паттерна.",labelImportPattern:"Импорт паттерна",tailImportPattern:"загрузите zip-файл паттерна.",labelBars:"Такты",tailBars:"удалить или добавить такт (по возможности используется позиция курсора).",labelLoopRange:"Диапазон петли",tailLoopRange:"выберите паттерн и такт начала/конца; нажмите и удерживайте кнопки +/-, чтобы двигаться быстрее.",labelPerBarBpm:"BPM за бар",tailPerBarBpm:"нажмите, чтобы установить или очистить BPM для текущего бара.",labelCopyPaste:"Копировать/Вставить",tailCopyPaste:"дублируйте всю сетку узоров до или после.",labelSingleClickTap:"Один щелчок/касание",tailSingleClickTap:"включить или выключить ячейку.",labelDoubleClickTap:"Дважды щелкните/коснитесь",tailDoubleClickTap:"зациклить состояния 32-й ноты (двойная, первая, вторая, возвращение в нормальное состояние).",labelLongPressActiveCell:"Длительное нажатие на активную ячейку",tailLongPressActiveCell:"переключать тип ноты (обычная -> призрачная -> форшлаг), если поддерживается.",labelNotationView:"Просмотр обозначений",tailNotationView:"дважды щелкните/коснитесь, чтобы перейти к курсору воспроизведения (отключено только при воспроизведении с активной меткой скорости).",labelCountIn:"Подсчет",tailCountIn:"переключить отсчет в один такт перед воспроизведением.",labelPracticeMode:"Режим практики",tailPracticeMode:"показывать фоновую музыку и регуляторы громкости.",labelPlayBottom:"Играть (внизу)",tailPlayBottom:"нажмите, чтобы воспроизвести/приостановить. Нажмите и удерживайте, чтобы остановиться и перейти к началу цикла.",labelSaveCurrent:"Сохранить текущий",tailSaveCurrent:"сохранить изменения в текущем паттерне. Нажмите и удерживайте, чтобы экспортировать zip паттерна (включая BGM).",labelDelete:"Удалить",tailDelete:"удалить текущий паттерн.",labelClear:"Прозрачный",tailClear:"короткое нажатие очищает текущий столбец, длительное нажатие очищает все столбцы.",labelUpload:"Загрузить",tailUpload:"добавьте файл MP3 или удалите его.",labelVolume:"Объем",tailVolume:"щелкните или нажмите и удерживайте, чтобы отрегулировать. Нажмите на число %, чтобы отключить/включить звук.",labelOffset:"Компенсировать",tailOffset:"щелкните значение мс/с, чтобы ввести точное смещение (отключено во время игры).",labelPatternVolume:"Громкость паттерна",tailPatternVolume:"правые элементы управления регулируют громкость барабанов (то же самое +/- и отключение звука).",labelTheme:"Тема",tailTheme:"нажмите, чтобы переключать темы.",labelBackupRestore:"Резервное копирование и восстановление",tailBackupRestore:"импортируйте или экспортируйте все данные в виде zip-файла.",labelSettings:"Настройки",tailSettings:"открой это.",tailUploadBeforeDelete:"добавьте файл MP3 или удалите его.",tailUploadAfterDelete:""},Vr={sectionTopBarTitle:"الشريط العلوي: المسرع والإيقاع",sectionPatternsTitle:"الأنماط، والموازير، ونطاق التكرار",sectionGridTitle:"محرر الشبكة والتدوين",sectionActionButtonsTitle:"أزرار الإجراءات (الجانب الأيمن)",sectionBgmTitle:"موسيقى الخلفية (وضع التدريب العملي)",sectionSettingsTitle:"الإعدادات وحول",labelBeatDots:"نقاط الإيقاع",tailBeatDots:"انقر لدورة التوقيعات الزمنية (4/4، 3/4، 2/4، 6/8، 5/4، 7/8).",labelTempo:"وتيرة",tailTempo:"انقر للحصول على خطوات بمعدل 0.5 نبضة في الدقيقة، ثم اضغط مع الاستمرار للاستمرار في التغيير.",labelBpmNumber:"رقم بي بي إم",tailBpmNumber:"اضغط على الجانب الأيسر/الأيمن من الأرقام لتدوير معدلات السرعة (تظهر تسمية المعدل).",labelPlay:"تشغيل",tailPlay:"بدء التشغيل أو إيقافه. اضغط لفترة طويلة لإعادة ضبط عداد الحلقة على 0.",labelTabs:"علامات التبويب",tailTabs:"الدائرة مسودة؛ علامات تبويب الحروف هي أنماط محفوظة. انقر فوق علامة تبويب لتحميلها.",labelNewPattern:"نمط جديد",tailNewPattern:"احفظ المسودة الحالية كعلامة تبويب نمط جديدة.",labelImportPattern:"نمط الاستيراد",tailImportPattern:"تحميل ملف مضغوط للنمط.",labelBars:"الموازير",tailBars:"إزالة ميزان أو إضافته (يستخدم موضع المؤشر عندما يكون ذلك ممكنًا).",labelLoopRange:"نطاق الحلقة",tailLoopRange:"اختر نمط البداية/النهاية والشريط؛ اضغط مع الاستمرار على الأزرار +/- للتحرك بشكل أسرع.",labelPerBarBpm:"لكل شريط BPM",tailPerBarBpm:"انقر لتعيين أو مسح BPM للشريط الحالي.",labelCopyPaste:"نسخ/لصق",tailCopyPaste:"تكرار شبكة نمط كاملة قبل أو بعد.",labelSingleClickTap:"نقرة واحدة/النقر",tailSingleClickTap:"تبديل خلية أو إيقاف تشغيلها.",labelDoubleClickTap:"انقر نقرًا مزدوجًا/اضغط",tailDoubleClickTap:"حالات الدورة الثانية والثلاثين (مزدوجة، الأولى، الثانية، العودة إلى وضعها الطبيعي).",labelLongPressActiveCell:"اضغط لفترة طويلة على خلية نشطة",tailLongPressActiveCell:"بدّل نوع النغمة (عادية -> نغمة شبحية -> نغمة زينة) عند الدعم.",labelNotationView:"عرض التدوين",tailNotationView:"انقر نقرًا مزدوجًا/اضغط للانتقال إلى رأس التشغيل (يتم تعطيله فقط عند اللعب مع تسمية معدل نشطة).",labelCountIn:"العد في",tailCountIn:"تبديل العد في شريط واحد قبل التشغيل.",labelPracticeMode:"وضع الممارسة",tailPracticeMode:"إظهار الموسيقى الخلفية وعناصر التحكم في مستوى الصوت.",labelPlayBottom:"تشغيل (أسفل)",tailPlayBottom:"اضغط للتشغيل/الإيقاف المؤقت. اضغط لفترة طويلة للتوقف والانتقال إلى بداية الحلقة.",labelSaveCurrent:"حفظ الحالي",tailSaveCurrent:"حفظ التعديلات على النمط الحالي. اضغط لفترة طويلة لتصدير نمط مضغوط (يتضمن BGM).",labelDelete:"يمسح",tailDelete:"إزالة النمط الحالي.",labelClear:"واضح",tailClear:"يؤدي الضغط لفترة قصيرة إلى مسح الشريط الحالي، بينما يؤدي الضغط لفترة طويلة إلى مسح جميع الأشرطة.",labelUpload:"رفع",tailUpload:"إضافة ملف MP3، أو حذفه.",labelVolume:"مقدار",tailVolume:"انقر أو اضغط مع الاستمرار للضبط. انقر فوق الرقم % لكتم الصوت/إلغاء كتم الصوت.",labelOffset:"إزاحة",tailOffset:"انقر فوق قيمة مللي ثانية/ثانية لكتابة إزاحة دقيقة (يتم تعطيلها أثناء اللعب).",labelPatternVolume:"حجم النمط",tailPatternVolume:"تقوم عناصر التحكم الموجودة على الجانب الأيمن بضبط مستوى صوت الأسطوانة (نفس سلوك +/- وكتم الصوت).",labelTheme:"سمة",tailTheme:"انقر لتدوير المواضيع.",labelBackupRestore:"النسخ الاحتياطي والاستعادة",tailBackupRestore:"استيراد أو تصدير جميع البيانات كملف مضغوط.",labelSettings:"إعدادات",tailSettings:"افتح هذا.",tailUploadBeforeDelete:"إضافة ملف MP3، أو حذفه.",tailUploadAfterDelete:""},Hr={sectionTopBarTitle:"शीर्ष बार: मेट्रोनोम और टेम्पो",sectionPatternsTitle:"पैटर्न, बार और लूप रेंज",sectionGridTitle:"ग्रिड संपादक और नोटेशन",sectionActionButtonsTitle:"एक्शन बटन (दाईं ओर)",sectionBgmTitle:"पृष्ठभूमि संगीत (अभ्यास मोड)",sectionSettingsTitle:"सेटिंग्स और इसके बारे में",labelBeatDots:"बीट डॉट्स",tailBeatDots:"समय हस्ताक्षरों को चक्रित करने के लिए क्लिक करें (4/4, 3/4, 2/4, 6/8, 5/4, 7/8)।",labelTempo:"गति",tailTempo:"0.5 बीपीएम चरणों के लिए क्लिक करें, बदलते रहने के लिए दबाकर रखें।",labelBpmNumber:"बीपीएम नंबर",tailBpmNumber:"चक्र गति दरों के लिए अंकों के बाईं/दाईं ओर टैप करें (एक दर लेबल दिखाई देता है)।",labelPlay:"चलाएँ",tailPlay:"प्लेबैक प्रारंभ करें या बंद करें. लूप काउंटर को 0 पर रीसेट करने के लिए देर तक दबाएँ।",labelTabs:"टैब",tailTabs:"सर्कल ड्राफ्ट है; अक्षर टैब सहेजे गए पैटर्न हैं। इसे लोड करने के लिए एक टैब पर क्लिक करें।",labelNewPattern:"नया पैटर्न",tailNewPattern:"वर्तमान ड्राफ्ट को नए पैटर्न टैब के रूप में सहेजें।",labelImportPattern:"आयात पैटर्न",tailImportPattern:"एक पैटर्न ज़िप फ़ाइल लोड करें.",labelBars:"बार",tailBars:"बार हटाएँ या जोड़ें (जब संभव हो तो अपने कर्सर की स्थिति का उपयोग करें)।",labelLoopRange:"लूप रेंज",tailLoopRange:"प्रारंभ/अंत पैटर्न और बार चुनें; तेजी से आगे बढ़ने के लिए +/- बटन दबाकर रखें।",labelPerBarBpm:"प्रति-बार बीपीएम",tailPerBarBpm:"वर्तमान बार के लिए BPM सेट करने या साफ़ करने के लिए क्लिक करें।",labelCopyPaste:"कॉपी पेस्ट",tailCopyPaste:"पहले या बाद में संपूर्ण पैटर्न ग्रिड को डुप्लिकेट करें।",labelSingleClickTap:"सिंगल क्लिक/टैप",tailSingleClickTap:"किसी सेल को चालू या बंद टॉगल करें।",labelDoubleClickTap:"डबल-क्लिक/टैप करें",tailDoubleClickTap:"चक्र 32वें-नोट की स्थिति (दोगुना, पहला, दूसरा, सामान्य पर वापस)।",labelLongPressActiveCell:"किसी सक्रिय सेल पर लंबे समय तक दबाकर रखें",tailLongPressActiveCell:"समर्थित होने पर नोट प्रकार बदलें (नॉर्मल -> घोस्ट नोट -> ग्रेस नोट)।",labelNotationView:"संकेतन दृश्य",tailNotationView:"प्लेहेड पर कूदने के लिए डबल-क्लिक/टैप करें (केवल सक्रिय रेट लेबल के साथ खेलने पर अक्षम)।",labelCountIn:"सम्मिलित करना",tailCountIn:"प्लेबैक से पहले वन-बार काउंट-इन टॉगल करें।",labelPracticeMode:"अभ्यास विधा",tailPracticeMode:"पृष्ठभूमि संगीत और वॉल्यूम नियंत्रण दिखाएं।",labelPlayBottom:"खेलें (नीचे)",tailPlayBottom:"चलाने/रोकने के लिए टैप करें। रुकने और लूप स्टार्ट पर जाने के लिए देर तक दबाएँ।",labelSaveCurrent:"वर्तमान सहेजें",tailSaveCurrent:"संपादनों को वर्तमान पैटर्न में सहेजें. पैटर्न ज़िप (बीजीएम शामिल) निर्यात करने के लिए देर तक दबाएं।",labelDelete:"मिटाना",tailDelete:"वर्तमान पैटर्न को हटा दें.",labelClear:"स्पष्ट",tailClear:"छोटी प्रेस से वर्तमान बार साफ़ हो जाता है, देर तक दबाने से सभी बार साफ़ हो जाते हैं।",labelUpload:"अपलोड करें",tailUpload:"एक MP3 फ़ाइल जोड़ें, या इसे हटा दें।",labelVolume:"आयतन",tailVolume:"समायोजित करने के लिए क्लिक करें या दबाकर रखें। म्यूट/अनम्यूट करने के लिए % संख्या पर क्लिक करें।",labelOffset:"ओफ़्सेट",tailOffset:"सटीक ऑफसेट (खेलते समय अक्षम) टाइप करने के लिए एमएस/एस मान पर क्लिक करें।",labelPatternVolume:"पैटर्न की मात्रा",tailPatternVolume:"दाईं ओर के नियंत्रण ड्रम वॉल्यूम को समायोजित करते हैं (समान +/- और म्यूट व्यवहार)।",labelTheme:"विषय",tailTheme:"विषयों को चक्रित करने के लिए क्लिक करें।",labelBackupRestore:"बैकअप और पुनर्स्थापना",tailBackupRestore:"सभी डेटा को ज़िप फ़ाइल के रूप में आयात या निर्यात करें।",labelSettings:"सेटिंग्स",tailSettings:"इसे खोलो.",tailUploadBeforeDelete:"एक MP3 फ़ाइल जोड़ें, या इसे हटा दें।",tailUploadAfterDelete:""},Fr={sectionTopBarTitle:"แถบด้านบน: เครื่องเมตรอนอมและจังหวะ",sectionPatternsTitle:"แพตเทิร์น ห้อง และช่วงลูป",sectionGridTitle:"ตัวแก้ไขกริดและสัญลักษณ์",sectionActionButtonsTitle:"ปุ่มการดำเนินการ (ด้านขวา)",sectionBgmTitle:"เพลงประกอบ (โหมดฝึกซ้อม)",sectionSettingsTitle:"การตั้งค่าและเกี่ยวกับ",labelBeatDots:"จุดจังหวะ",tailBeatDots:"คลิกเพื่อบันทึกรอบเวลา (4/4, 3/4, 2/4, 6/8, 5/4, 7/8)",labelTempo:"จังหวะ",tailTempo:"คลิกเพื่อดูขั้นตอน 0.5 BPM กดค้างไว้เพื่อเปลี่ยนแปลงต่อไป",labelBpmNumber:"หมายเลขบีพีเอ็ม",tailBpmNumber:"แตะด้านซ้าย/ขวาของตัวเลขเพื่อวนอัตราความเร็ว (ป้ายอัตราจะปรากฏขึ้น)",labelPlay:"เล่น",tailPlay:"เริ่มหรือหยุดการเล่น กดแบบยาวเพื่อรีเซ็ตตัวนับลูปเป็น 0",labelTabs:"แท็บ",tailTabs:"วงกลมคือแบบร่าง; แท็บตัวอักษรคือแพตเทิร์นที่บันทึกไว้ คลิกแท็บเพื่อโหลด",labelNewPattern:"แพตเทิร์นใหม่",tailNewPattern:"บันทึกแบบร่างปัจจุบันเป็นแท็บแพตเทิร์นใหม่",labelImportPattern:"นำเข้าแพตเทิร์น",tailImportPattern:"โหลดไฟล์ zip ของแพตเทิร์น",labelBars:"ห้อง",tailBars:"ลบหรือเพิ่มห้อง (เมื่อเป็นไปได้จะใช้ตำแหน่งเคอร์เซอร์ของคุณ)",labelLoopRange:"ช่วงวง",tailLoopRange:"เลือกแพตเทิร์นและห้องเริ่มต้น/สิ้นสุด; กดปุ่ม +/- ค้างไว้เพื่อเลื่อนเร็วขึ้น",labelPerBarBpm:"BPM ต่อบาร์",tailPerBarBpm:"คลิกเพื่อตั้งค่าหรือล้าง BPM สำหรับแถบปัจจุบัน",labelCopyPaste:"คัดลอก/วาง",tailCopyPaste:"ทำซ้ำตารางรูปแบบทั้งหมดก่อนหรือหลัง",labelSingleClickTap:"คลิก/แตะเพียงครั้งเดียว",tailSingleClickTap:"สลับเปิดหรือปิดเซลล์",labelDoubleClickTap:"ดับเบิลคลิก/แตะ",tailDoubleClickTap:"วงจรสถานะโน้ตที่ 32 (สองครั้ง ครั้งแรก วินาที และกลับสู่ภาวะปกติ)",labelLongPressActiveCell:"กดค้างบนเซลล์ที่ใช้งานอยู่",tailLongPressActiveCell:"สลับประเภทโน้ต (ปกติ -> โน้ตผี -> โน้ตประดับ) เมื่อรองรับ",labelNotationView:"มุมมองสัญลักษณ์",tailNotationView:"ดับเบิลคลิก/แตะเพื่อข้ามส่วนหัวของตัวควบคุมการเล่น (ปิดใช้งานเฉพาะเมื่อเล่นโดยที่ป้ายกำกับอัตราทำงานอยู่)",labelCountIn:"นับเข้า",tailCountIn:"สลับการนับเข้าหนึ่งบาร์ก่อนเล่น",labelPracticeMode:"โหมดฝึกซ้อม",tailPracticeMode:"แสดงเพลงพื้นหลังและการควบคุมระดับเสียง",labelPlayBottom:"เล่น (ล่าง)",tailPlayBottom:"แตะเพื่อเล่น/หยุดชั่วคราว กดค้างเพื่อหยุดและข้ามไปที่จุดเริ่มต้น",labelSaveCurrent:"บันทึกปัจจุบัน",tailSaveCurrent:"บันทึกการแก้ไขของแพตเทิร์นปัจจุบัน กดค้างเพื่อส่งออกไฟล์ zip ของแพตเทิร์น (รวม BGM)",labelDelete:"ลบ",tailDelete:"ลบแพตเทิร์นปัจจุบัน",labelClear:"ชัดเจน",tailClear:"การกดสั้นๆ จะล้างแถบปัจจุบัน การกดแบบยาวจะล้างแถบทั้งหมด",labelUpload:"อัปโหลด",tailUpload:"เพิ่มไฟล์ MP3 หรือลบออก",labelVolume:"ปริมาณ",tailVolume:"คลิกหรือกดค้างไว้เพื่อปรับ คลิกหมายเลข % เพื่อปิด/เปิดเสียง",labelOffset:"ออฟเซ็ต",tailOffset:"คลิกค่า ms/s เพื่อพิมพ์ออฟเซ็ตที่แน่นอน (ปิดใช้งานขณะเล่น)",labelPatternVolume:"ระดับเสียงแพตเทิร์น",tailPatternVolume:"ส่วนควบคุมทางด้านขวาจะปรับระดับเสียงของดรัม (ลักษณะ +/- และการปิดเสียงเดียวกัน)",labelTheme:"ธีม",tailTheme:"คลิกเพื่อหมุนเวียนธีม",labelBackupRestore:"สำรองและกู้คืน",tailBackupRestore:"นำเข้าหรือส่งออกข้อมูลทั้งหมดเป็นไฟล์ zip",labelSettings:"การตั้งค่า",tailSettings:"เปิดสิ่งนี้",tailUploadBeforeDelete:"เพิ่มไฟล์ MP3 หรือลบออก",tailUploadAfterDelete:""},Gr={sectionTopBarTitle:"Thanh trên cùng: Metronome và Tempo",sectionPatternsTitle:"Mẫu nhịp, ô nhịp và phạm vi lặp",sectionGridTitle:"Trình soạn thảo và ký hiệu lưới",sectionActionButtonsTitle:"Nút hành động (Bên phải)",sectionBgmTitle:"Nhạc nền (Chế độ luyện tập)",sectionSettingsTitle:"Cài đặt và Giới thiệu",labelBeatDots:"Chấm nhịp",tailBeatDots:"nhấp để chuyển đổi các ký hiệu thời gian (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"nhịp độ",tailTempo:"nhấp vào các bước 0,5 BPM, nhấn và giữ để tiếp tục thay đổi.",labelBpmNumber:"Số BPM",tailBpmNumber:"chạm vào bên trái/phải của các chữ số để chuyển đổi tốc độ chu kỳ (nhãn tốc độ xuất hiện).",labelPlay:"Phát",tailPlay:"bắt đầu hoặc dừng phát lại. Nhấn và giữ để đặt lại bộ đếm vòng lặp về 0.",labelTabs:"Tab",tailTabs:"vòng tròn là Bản nháp; tab chữ cái là các mẫu nhịp đã lưu. Nhấp vào một tab để tải nó.",labelNewPattern:"Mẫu nhịp mới",tailNewPattern:"lưu bản nháp hiện tại dưới dạng tab mẫu nhịp mới.",labelImportPattern:"Nhập mẫu nhịp",tailImportPattern:"tải một tệp zip mẫu nhịp.",labelBars:"Ô nhịp",tailBars:"xóa hoặc thêm ô nhịp (khi có thể sẽ dùng vị trí con trỏ của bạn).",labelLoopRange:"Phạm vi vòng lặp",tailLoopRange:"chọn mẫu nhịp và ô nhịp bắt đầu/kết thúc; nhấn và giữ nút +/- để di chuyển nhanh hơn.",labelPerBarBpm:"BPM mỗi thanh",tailPerBarBpm:"bấm vào để đặt hoặc xóa BPM cho thanh hiện tại.",labelCopyPaste:"Sao chép/Dán",tailCopyPaste:"sao chép toàn bộ lưới mẫu trước hoặc sau.",labelSingleClickTap:"Một cú nhấp chuột/chạm",tailSingleClickTap:"bật hoặc tắt một ô.",labelDoubleClickTap:"Bấm đúp/chạm",tailDoubleClickTap:"chu kỳ trạng thái nốt thứ 32 (gấp đôi, thứ nhất, thứ hai, trở lại bình thường).",labelLongPressActiveCell:"Nhấn và giữ vào ô hiện hoạt",tailLongPressActiveCell:"đổi loại nốt (bình thường -> nốt ghost -> nốt trang trí) khi được hỗ trợ.",labelNotationView:"Chế độ xem ký hiệu",tailNotationView:"nhấp đúp/nhấn để chuyển đầu phát (chỉ bị tắt khi phát với nhãn tốc độ đang hoạt động).",labelCountIn:"Đếm vào",tailCountIn:"chuyển đổi đếm một ô nhịp trước khi phát lại.",labelPracticeMode:"Chế độ luyện tập",tailPracticeMode:"hiển thị nhạc nền và điều khiển âm lượng.",labelPlayBottom:"Chơi (dưới cùng)",tailPlayBottom:"nhấn để phát/tạm dừng. Nhấn và giữ để dừng và chuyển sang phần bắt đầu vòng lặp.",labelSaveCurrent:"Lưu hiện tại",tailSaveCurrent:"lưu các chỉnh sửa cho mẫu nhịp hiện tại. Nhấn và giữ để xuất zip mẫu nhịp (bao gồm BGM).",labelDelete:"Xóa bỏ",tailDelete:"xóa mẫu nhịp hiện tại.",labelClear:"Thông thoáng",tailClear:"nhấn nhanh sẽ xóa thanh hiện tại, nhấn lâu sẽ xóa tất cả các thanh.",labelUpload:"Tải lên",tailUpload:"thêm tệp MP3 hoặc xóa tệp đó.",labelVolume:"Âm lượng",tailVolume:"bấm hoặc nhấn và giữ để điều chỉnh. Bấm vào số % để tắt tiếng/bật tiếng.",labelOffset:"Bù lại",tailOffset:"nhấp vào giá trị ms/s để nhập giá trị bù chính xác (bị tắt khi phát).",labelPatternVolume:"Âm lượng mẫu nhịp",tailPatternVolume:"các nút điều khiển bên phải điều chỉnh âm lượng trống (tương tự hành vi +/- và tắt tiếng).",labelTheme:"chủ đề",tailTheme:"bấm vào để xoay vòng chủ đề.",labelBackupRestore:"Sao lưu và khôi phục",tailBackupRestore:"nhập hoặc xuất tất cả dữ liệu dưới dạng tệp zip.",labelSettings:"Cài đặt",tailSettings:"mở cái này.",tailUploadBeforeDelete:"thêm tệp MP3 hoặc xóa tệp đó.",tailUploadAfterDelete:""},Wr={sectionTopBarTitle:"Bilah Atas: Metronom dan Tempo",sectionPatternsTitle:"Pola, birama, dan rentang loop",sectionGridTitle:"Editor Grid dan Notasi",sectionActionButtonsTitle:"Tombol Aksi (Sisi Kanan)",sectionBgmTitle:"Musik Latar Belakang (Mode Latihan)",sectionSettingsTitle:"Pengaturan dan Tentang",labelBeatDots:"Titik ketukan",tailBeatDots:"klik untuk memutar tanda birama (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"klik untuk langkah 0,5 BPM, tekan dan tahan untuk terus mengubah.",labelBpmNumber:"nomor BPM",tailBpmNumber:"ketuk sisi kiri/kanan angka untuk memutar tarif kecepatan (label tarif muncul).",labelPlay:"Putar",tailPlay:"memulai atau menghentikan pemutaran. Tekan lama untuk mengatur ulang penghitung loop ke 0.",labelTabs:"tab",tailTabs:"lingkaran itu adalah Draf; tab huruf adalah pola yang disimpan. Klik tab untuk memuatnya.",labelNewPattern:"Pola baru",tailNewPattern:"simpan draf saat ini sebagai tab pola baru.",labelImportPattern:"Pola impor",tailImportPattern:"memuat file zip pola.",labelBars:"Birama",tailBars:"hapus atau tambahkan birama (gunakan posisi kursor Anda jika memungkinkan).",labelLoopRange:"Rentang lingkaran",tailLoopRange:"pilih pola dan birama awal/akhir; tekan dan tahan tombol +/- untuk bergerak lebih cepat.",labelPerBarBpm:"BPM per batang",tailPerBarBpm:"klik untuk mengatur atau menghapus BPM untuk bilah saat ini.",labelCopyPaste:"Salin/Tempel",tailCopyPaste:"duplikat seluruh pola grid sebelum atau sesudah.",labelSingleClickTap:"Klik/ketuk satu kali",tailSingleClickTap:"mengaktifkan atau menonaktifkan sel.",labelDoubleClickTap:"Klik dua kali/ketuk",tailDoubleClickTap:"siklus status nada ke-32 (ganda, pertama, kedua, kembali normal).",labelLongPressActiveCell:"Tekan lama pada sel yang aktif",tailLongPressActiveCell:"ganti jenis not (normal -> not ghost -> not hias) bila didukung.",labelNotationView:"Tampilan notasi",tailNotationView:"klik dua kali/ketuk untuk melompati playhead (hanya dinonaktifkan saat memutar dengan label tarif aktif).",labelCountIn:"Hitung masuk",tailCountIn:"alihkan hitungan satu bar sebelum pemutaran.",labelPracticeMode:"Modus latihan",tailPracticeMode:"tampilkan musik latar dan kontrol volume.",labelPlayBottom:"Putar (bawah)",tailPlayBottom:"ketuk untuk memutar/menjeda. Tekan lama untuk berhenti dan melompat ke awal putaran.",labelSaveCurrent:"Hemat saat ini",tailSaveCurrent:"simpan hasil edit pada pola saat ini. Tekan lama untuk mengekspor zip pola (termasuk BGM).",labelDelete:"Menghapus",tailDelete:"hapus pola saat ini.",labelClear:"Jernih",tailClear:"tekan sebentar akan menghapus bilah saat ini, tekan lama akan menghapus semua bilah.",labelUpload:"Mengunggah",tailUpload:"menambahkan file MP3, atau menghapusnya.",labelVolume:"Volume",tailVolume:"klik atau tekan dan tahan untuk menyesuaikan. Klik angka % untuk menonaktifkan/mengaktifkan suara.",labelOffset:"Mengimbangi",tailOffset:"klik nilai ms/s untuk mengetikkan offset yang tepat (dinonaktifkan saat memutar).",labelPatternVolume:"Volume pola",tailPatternVolume:"kontrol sisi kanan menyesuaikan volume drum (perilaku +/- dan mute yang sama).",labelTheme:"Tema",tailTheme:"klik untuk memutar tema.",labelBackupRestore:"Cadangkan dan Pulihkan",tailBackupRestore:"impor atau ekspor semua data sebagai file zip.",labelSettings:"Pengaturan",tailSettings:"buka ini.",tailUploadBeforeDelete:"menambahkan file MP3, atau menghapusnya.",tailUploadAfterDelete:""},Kr={sectionTopBarTitle:"Bar Atas: Metronom dan Tempo",sectionPatternsTitle:"Corak, bar dan julat gelung",sectionGridTitle:"Editor dan Notasi Grid",sectionActionButtonsTitle:"Butang Tindakan (Sebelah Kanan)",sectionBgmTitle:"Muzik Latar Belakang (Mod Latihan)",sectionSettingsTitle:"Tetapan dan Perihal",labelBeatDots:"Titik ketukan",tailBeatDots:"klik untuk mengitar tandatangan masa (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"klik untuk 0.5 BPM langkah, tekan dan tahan untuk terus menukar.",labelBpmNumber:"nombor BPM",tailBpmNumber:"ketik sebelah kiri/kanan digit untuk mengitar kadar kelajuan (label kadar muncul).",labelPlay:"Mainkan",tailPlay:"mulakan atau hentikan main semula. Tekan lama untuk menetapkan semula pembilang gelung kepada 0.",labelTabs:"Tab",tailTabs:"bulatan ialah Draf; tab huruf ialah corak yang disimpan. Klik tab untuk memuatkannya.",labelNewPattern:"Corak baru",tailNewPattern:"simpan draf semasa sebagai tab corak baharu.",labelImportPattern:"Corak import",tailImportPattern:"muatkan fail zip corak.",labelBars:"Bar",tailBars:"alih keluar atau tambah bar (menggunakan kedudukan kursor anda apabila boleh).",labelLoopRange:"Julat gelung",tailLoopRange:"pilih corak dan birama mula/akhir; tekan dan tahan butang +/- untuk bergerak lebih pantas.",labelPerBarBpm:"BPM setiap bar",tailPerBarBpm:"klik untuk menetapkan atau mengosongkan BPM untuk bar semasa.",labelCopyPaste:"Salin/Tampal",tailCopyPaste:"pendua keseluruhan grid corak sebelum atau selepas.",labelSingleClickTap:"Satu klik/ketik",tailSingleClickTap:"hidupkan atau matikan sel.",labelDoubleClickTap:"Klik dua kali/ketik",tailDoubleClickTap:"kitaran keadaan nota ke-32 (berganda, pertama, kedua, kembali normal).",labelLongPressActiveCell:"Tekan lama pada sel aktif",tailLongPressActiveCell:"tukar jenis nota (normal -> nota ghost -> nota hias) apabila disokong.",labelNotationView:"Paparan tatatanda",tailNotationView:"klik dua kali/ketik untuk melompat kepala main (dilumpuhkan hanya apabila bermain dengan label kadar aktif).",labelCountIn:"Kira masuk",tailCountIn:"togol kiraan masuk satu bar sebelum main semula.",labelPracticeMode:"Mod latihan",tailPracticeMode:"tunjukkan muzik latar belakang dan kawalan kelantangan.",labelPlayBottom:"Main (bawah)",tailPlayBottom:"ketik untuk main/jeda. Tekan lama untuk berhenti dan lompat ke permulaan gelung.",labelSaveCurrent:"Simpan semasa",tailSaveCurrent:"simpan suntingan pada corak semasa. Tekan lama untuk mengeksport zip corak (termasuk BGM).",labelDelete:"Padam",tailDelete:"keluarkan corak semasa.",labelClear:"Jelas",tailClear:"tekan pendek mengosongkan bar semasa, tekan lama mengosongkan semua bar.",labelUpload:"Muat naik",tailUpload:"tambah fail MP3, atau padamkannya.",labelVolume:"Kelantangan",tailVolume:"klik atau tekan-dan-tahan untuk melaraskan. Klik nombor % untuk meredam/menyahredam.",labelOffset:"Offset",tailOffset:"klik nilai ms/s untuk menaip offset tepat (dilumpuhkan semasa bermain).",labelPatternVolume:"Kelantangan corak",tailPatternVolume:"kawalan sebelah kanan melaraskan kelantangan dram (+/- dan kelakuan senyap yang sama).",labelTheme:"Tema",tailTheme:"klik untuk mengitar tema.",labelBackupRestore:"Sandaran dan Pulihkan",tailBackupRestore:"import atau eksport semua data sebagai fail zip.",labelSettings:"tetapan",tailSettings:"buka ni.",tailUploadBeforeDelete:"tambah fail MP3, atau padamkannya.",tailUploadAfterDelete:""},$r={sectionTopBarTitle:"Üst Çubuk: Metronom ve Tempo",sectionPatternsTitle:"Desenler, ölçüler ve döngü aralığı",sectionGridTitle:"Izgara Düzenleyici ve Gösterim",sectionActionButtonsTitle:"Eylem Düğmeleri (Sağ Taraf)",sectionBgmTitle:"Fon Müziği (Alıştırma Modu)",sectionSettingsTitle:"Ayarlar ve Hakkında",labelBeatDots:"Vuruş noktaları",tailBeatDots:"Zaman işaretlerini (4/4, 3/4, 2/4, 6/8, 5/4, 7/8) değiştirmek için tıklayın.",labelTempo:"Tempo",tailTempo:"0,5 BPM'lik adımlar için tıklayın, değiştirmeye devam etmek için basılı tutun.",labelBpmNumber:"BPM numarası",tailBpmNumber:"Hız oranlarını değiştirmek için rakamların sol/sağ tarafına dokunun (bir oran etiketi görünür).",labelPlay:"Çal",tailPlay:"oynatmayı başlatın veya durdurun. Döngü sayacını 0'a sıfırlamak için uzun basın.",labelTabs:"Sekmeler",tailTabs:"daire Taslaktır; harf sekmeleri kayıtlı kalıplardır. Yüklemek için bir sekmeye tıklayın.",labelNewPattern:"Yeni desen",tailNewPattern:"geçerli taslağı yeni bir desen sekmesi olarak kaydedin.",labelImportPattern:"Deseni içe aktar",tailImportPattern:"bir desen zip dosyası yükleyin.",labelBars:"Ölçüler",tailBars:"Bir ölçüyü kaldırın veya ekleyin (mümkün olduğunda imleç konumunuzu kullanır).",labelLoopRange:"Döngü aralığı",tailLoopRange:"başlangıç/bitiş desenini ve çubuğunu seçin; Daha hızlı hareket etmek için +/- düğmelerini basılı tutun.",labelPerBarBpm:"Çubuk başına BPM",tailPerBarBpm:"Geçerli çubuk için BPM'yi ayarlamak veya temizlemek için tıklayın.",labelCopyPaste:"Kopyala/Yapıştır",tailCopyPaste:"tüm desen ızgarasını önce veya sonra çoğaltın.",labelSingleClickTap:"Tek tıklama/dokunma",tailSingleClickTap:"Bir hücreyi açın veya kapatın.",labelDoubleClickTap:"Çift tıklama/dokunma",tailDoubleClickTap:"32. nota durumları döngüsü (çift, birinci, ikinci, normale dönüş).",labelLongPressActiveCell:"Aktif bir hücreye uzun basın",tailLongPressActiveCell:"desteklendiğinde nota türünü değiştirin (normal -> hayalet nota -> süsleme notası).",labelNotationView:"Gösterim görünümü",tailNotationView:"Oynatma kafasını atlamak için çift tıklayın/dokunun (yalnızca etkin bir hız etiketiyle oynatıldığında devre dışı bırakılır).",labelCountIn:"Geri sayım",tailCountIn:"oynatmadan önce tek çubuklu sayımı değiştirin.",labelPracticeMode:"Alıştırma modu",tailPracticeMode:"arka plan müziğini ve ses seviyesi kontrollerini gösterir.",labelPlayBottom:"Oynat (altta)",tailPlayBottom:"oynatmak/duraklatmak için dokunun. Durdurmak ve döngü başlangıcına atlamak için uzun basın.",labelSaveCurrent:"Geçerli olanı kaydet",tailSaveCurrent:"Düzenlemeleri geçerli desene kaydedin. Bir desen zip'ini (BGM dahil) dışa aktarmak için uzun basın.",labelDelete:"Silmek",tailDelete:"mevcut deseni kaldırın.",labelClear:"Temizlemek",tailClear:"kısa basış mevcut çubuğu siler, uzun basış tüm çubukları siler.",labelUpload:"Yüklemek",tailUpload:"bir MP3 dosyası ekleyin veya silin.",labelVolume:"Hacim",tailVolume:"ayarlamak için tıklayın veya basılı tutun. Sesi kapatmak/açmak için % sayısını tıklayın.",labelOffset:"Telafi etmek",tailOffset:"Tam bir uzaklık girmek için ms/s değerini tıklayın (oynatma sırasında devre dışı bırakılır).",labelPatternVolume:"Desen hacmi",tailPatternVolume:"sağ taraftaki kontroller tambur sesini ayarlar (aynı +/- ve sessiz davranışı).",labelTheme:"Tema",tailTheme:"temaları değiştirmek için tıklayın.",labelBackupRestore:"Yedekleme ve Geri Yükleme",tailBackupRestore:"tüm verileri zip dosyası olarak içe veya dışa aktarın.",labelSettings:"Ayarlar",tailSettings:"şunu aç.",tailUploadBeforeDelete:"bir MP3 dosyası ekleyin veya silin.",tailUploadAfterDelete:""},qr={sectionTopBarTitle:"Górny pasek: Metronom i Tempo",sectionPatternsTitle:"Wzory, takty i zakres pętli",sectionGridTitle:"Edytor siatki i notacja",sectionActionButtonsTitle:"Przyciski akcji (prawa strona)",sectionBgmTitle:"Muzyka w tle (tryb ćwiczeń)",sectionSettingsTitle:"Ustawienia i informacje",labelBeatDots:"Punkty taktu",tailBeatDots:"kliknij, aby przełączać metrum (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"kliknij, aby wyświetlić kroki co 0,5 BPM, naciśnij i przytrzymaj, aby zmieniać dalej.",labelBpmNumber:"Numer BPM",tailBpmNumber:"dotknij lewej/prawej strony cyfr, aby zmienić prędkości cyklu (pojawi się etykieta prędkości).",labelPlay:"Odtwórz",tailPlay:"rozpocząć lub zatrzymać odtwarzanie. Naciśnij długo, aby zresetować licznik pętli do 0.",labelTabs:"Zakładki",tailTabs:"okrąg to Przeciąg; tabulatory literowe są zapisanymi wzorami. Kliknij kartę, aby ją załadować.",labelNewPattern:"Nowy wzór",tailNewPattern:"zapisz bieżącą wersję roboczą jako nową zakładkę ze wzorami.",labelImportPattern:"Importuj wzór",tailImportPattern:"załaduj plik zip ze wzorem.",labelBars:"Takty",tailBars:"Usuń lub dodaj takt (jeśli to możliwe, wykorzystuje pozycję kursora).",labelLoopRange:"Zasięg pętli",tailLoopRange:"wybierz wzór początkowy/końcowy i pasek; naciśnij i przytrzymaj przyciski +/-, aby poruszać się szybciej.",labelPerBarBpm:"BPM na takt",tailPerBarBpm:"kliknij, aby ustawić lub wyczyścić BPM dla bieżącego paska.",labelCopyPaste:"Kopiuj/wklej",tailCopyPaste:"zduplikuj całą siatkę wzoru przed lub po.",labelSingleClickTap:"Pojedyncze kliknięcie/dotknięcie",tailSingleClickTap:"włączyć lub wyłączyć komórkę.",labelDoubleClickTap:"Kliknij dwukrotnie/stuknij",tailDoubleClickTap:"cykle stanów 32. nuty (podwójne, pierwsze, drugie, powrót do normy).",labelLongPressActiveCell:"Naciśnij długo aktywną komórkę",tailLongPressActiveCell:"zmień typ nuty (normalna -> nuta ghost -> przednutka), jeśli jest obsługiwane.",labelNotationView:"Widok notacji",tailNotationView:"kliknij dwukrotnie/dotknij, aby przeskoczyć głowicę odtwarzania (wyłączone tylko podczas odtwarzania z aktywną etykietą szybkości).",labelCountIn:"Odliczanie",tailCountIn:"przełączyć odliczanie o jeden takt przed odtwarzaniem.",labelPracticeMode:"Tryb ćwiczeń",tailPracticeMode:"pokaż muzykę w tle i sterowanie głośnością.",labelPlayBottom:"Odtwórz (na dole)",tailPlayBottom:"dotknij, aby odtworzyć/wstrzymać. Naciśnij długo, aby zatrzymać i przejść do początku pętli.",labelSaveCurrent:"Zapisz bieżący",tailSaveCurrent:"zapisz zmiany w bieżącym wzorze. Naciśnij długo, aby wyeksportować wzór zip (w tym podkład muzyczny).",labelDelete:"Usuwać",tailDelete:"usuń bieżący wzór.",labelClear:"Jasne",tailClear:"krótkie naciśnięcie czyści bieżący słupek, długie naciśnięcie czyści wszystkie słupki.",labelUpload:"Wgrywać",tailUpload:"dodać plik MP3 lub go usunąć.",labelVolume:"Tom",tailVolume:"kliknij lub naciśnij i przytrzymaj, aby dostosować. Kliknij liczbę %, aby wyciszyć/wyłączyć wyciszenie.",labelOffset:"Zrównoważyć",tailOffset:"kliknij wartość ms/s, aby wpisać dokładne przesunięcie (wyłączone podczas odtwarzania).",labelPatternVolume:"Objętość wzoru",tailPatternVolume:"elementy sterujące po prawej stronie regulują głośność bębna (to samo zachowanie +/- i wyciszenie).",labelTheme:"Temat",tailTheme:"kliknij, aby przełączać motywy.",labelBackupRestore:"Kopia zapasowa i przywracanie",tailBackupRestore:"importuj lub eksportuj wszystkie dane jako plik ZIP.",labelSettings:"Ustawienia",tailSettings:"otwórz to.",tailUploadBeforeDelete:"dodać plik MP3 lub go usunąć.",tailUploadAfterDelete:""},Zr={sectionTopBarTitle:"Bovenste balk: metronoom en tempo",sectionPatternsTitle:"Patronen, maten en loopbereik",sectionGridTitle:"Rastereditor en notatie",sectionActionButtonsTitle:"Actieknoppen (rechterkant)",sectionBgmTitle:"Achtergrondmuziek (oefenmodus)",sectionSettingsTitle:"Instellingen en Over",labelBeatDots:"Telpunten",tailBeatDots:"klik om de maatsoorten te doorlopen (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"klik voor stappen van 0,5 BPM, houd ingedrukt om te blijven veranderen.",labelBpmNumber:"BPM-nummer",tailBpmNumber:"tik op de linker-/rechterkant van de cijfers om de snelheidstarieven te doorlopen (er verschijnt een tarieflabel).",labelPlay:"Afspelen",tailPlay:"het afspelen starten of stoppen. Lang indrukken om de lusteller op 0 te zetten.",labelTabs:"Tabbladen",tailTabs:"de cirkel is Draft; lettertabbladen zijn opgeslagen patronen. Klik op een tabblad om het te laden.",labelNewPattern:"Nieuw patroon",tailNewPattern:"sla het huidige concept op als een nieuw patroontabblad.",labelImportPattern:"Patroon importeren",tailImportPattern:"laad een patroon-zipbestand.",labelBars:"Maten",tailBars:"verwijder of voeg een maat toe (gebruikt indien mogelijk uw cursorpositie).",labelLoopRange:"Loopbereik",tailLoopRange:"kies start/eindpatroon en balk; houd de +/- knoppen ingedrukt om sneller te bewegen.",labelPerBarBpm:"BPM per maat",tailPerBarBpm:"klik om de BPM voor de huidige maat in te stellen of te wissen.",labelCopyPaste:"Kopiëren/plakken",tailCopyPaste:"dupliceer een heel patroonraster ervoor of erna.",labelSingleClickTap:"Enkele klik/tap",tailSingleClickTap:"een cel in- of uitschakelen.",labelDoubleClickTap:"Dubbelklik/tik",tailDoubleClickTap:"cyclus van de 32e noottoestanden (dubbel, eerste, tweede, terug naar normaal).",labelLongPressActiveCell:"Druk lang op een actieve cel",tailLongPressActiveCell:"wissel het notetype (normaal -> ghost note -> voorslag) indien ondersteund.",labelNotationView:"Notatieweergave",tailNotationView:"dubbelklik/tik om naar de afspeelkop te springen (alleen uitgeschakeld bij spelen met een actief tarieflabel).",labelCountIn:"Aftellen",tailCountIn:"schakel een aftelling van één maat in vóór het afspelen.",labelPracticeMode:"Oefenmodus",tailPracticeMode:"toon achtergrondmuziek en volumeregelaars.",labelPlayBottom:"Spelen (onder)",tailPlayBottom:"tik om af te spelen/pauzeren. Houd ingedrukt om te stoppen en naar het begin van de lus te springen.",labelSaveCurrent:"Bewaar stroom",tailSaveCurrent:"bewaar bewerkingen in het huidige patroon. Houd ingedrukt om een ​​patroon-zip te exporteren (inclusief achtergrondmuziek).",labelDelete:"Verwijderen",tailDelete:"verwijder het huidige patroon.",labelClear:"Duidelijk",tailClear:"kort indrukken wist de huidige balk, lang indrukken wist alle balken.",labelUpload:"Uploaden",tailUpload:"voeg een MP3-bestand toe of verwijder het.",labelVolume:"Volume",tailVolume:"klik of houd ingedrukt om aan te passen. Klik op het %-getal om het dempen/dempen op te heffen.",labelOffset:"Offset",tailOffset:"klik op de ms/s-waarde om een ​​exacte offset in te voeren (uitgeschakeld tijdens het spelen).",labelPatternVolume:"Patroonvolume",tailPatternVolume:"de bedieningselementen aan de rechterkant passen het drumvolume aan (hetzelfde gedrag +/- en dempen).",labelTheme:"Thema",tailTheme:"klik om thema's te doorlopen.",labelBackupRestore:"Back-up en herstel",tailBackupRestore:"importeer of exporteer alle gegevens als zip-bestand.",labelSettings:"Instellingen",tailSettings:"open dit.",tailUploadBeforeDelete:"voeg een MP3-bestand toe of verwijder het.",tailUploadAfterDelete:""},Yr={sectionTopBarTitle:"Övre fältet: Metronom och tempo",sectionPatternsTitle:"Mönster, takter och loopområde",sectionGridTitle:"Rutnätsredigerare och notation",sectionActionButtonsTitle:"Åtgärdsknappar (höger sida)",sectionBgmTitle:"Bakgrundsmusik (övningsläge)",sectionSettingsTitle:"Inställningar och Om",labelBeatDots:"Taktdots",tailBeatDots:"klicka för att växla taktarter (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"klicka för steg om 0,5 BPM, håll in för att fortsätta ändra.",labelBpmNumber:"BPM-nummer",tailBpmNumber:"tryck på vänster/höger sida av siffrorna för att växla hastigheter (en hastighetsetikett visas).",labelPlay:"Spela",tailPlay:"starta eller stoppa uppspelning. Långtryck för att återställa loopräknaren till 0.",labelTabs:"Flikar",tailTabs:"cirkeln är Utkast; bokstavsflikar är sparade mönster. Klicka på en flik för att ladda den.",labelNewPattern:"Nytt mönster",tailNewPattern:"spara aktuellt utkast som en ny mönsterflik.",labelImportPattern:"Importera mönster",tailImportPattern:"ladda en pattern-zipfil.",labelBars:"Takter",tailBars:"ta bort eller lägg till en takt (använder markörposition när möjligt).",labelLoopRange:"Loopområde",tailLoopRange:"välj start/slut-mönster och takt; håll in +/- för snabbare flytt.",labelPerBarBpm:"BPM per takt",tailPerBarBpm:"klicka för att sätta eller rensa BPM för aktuell takt.",labelCopyPaste:"Kopiera/Klistra in",tailCopyPaste:"duplicera ett helt mönsterrutnät före eller efter.",labelSingleClickTap:"Enkelt klick/tryck",tailSingleClickTap:"växla en cell på eller av.",labelDoubleClickTap:"Dubbelklick/tryck",tailDoubleClickTap:"växla 32-delstillstånd (dubbel, första, andra, tillbaka till normal).",labelLongPressActiveCell:"Långtryck på en aktiv cell",tailLongPressActiveCell:"växla nottyp (normal -> ghost note -> förslag) när det stöds.",labelNotationView:"Notationsvy",tailNotationView:"dubbelklick/tryck för att hoppa spelhuvudet (inaktiveras endast när uppspelning med hastighetsetikett är aktiv).",labelCountIn:"Inräkning",tailCountIn:"växla en takt inräkning före uppspelning.",labelPracticeMode:"Övningsläge",tailPracticeMode:"visa bakgrundsmusik och volymkontroller.",labelPlayBottom:"Spela (nedre)",tailPlayBottom:"tryck för spela/paus. Långtryck för att stoppa och hoppa till loopstart.",labelSaveCurrent:"Spara aktuell",tailSaveCurrent:"spara ändringar i aktuellt mönster. Långtryck för att exportera en pattern-zip (inkluderar BGM).",labelDelete:"Radera",tailDelete:"ta bort aktuellt mönster.",labelClear:"Rensa",tailClear:"kort tryck rensar aktuell takt, långtryck rensar alla takter.",labelUpload:"Ladda upp",tailUpload:"lägg till en MP3-fil, eller radera den.",labelVolume:"Volym",tailVolume:"klicka eller håll in för att justera. Klicka på %-numret för ljud av/på.",labelOffset:"Förskjutning",tailOffset:"klicka på ms/s-värdet för att skriva exakt förskjutning (inaktiverad under uppspelning).",labelPatternVolume:"Mönstervolym",tailPatternVolume:"kontrollerna till höger justerar trumvolym (samma +/- och mute-beteende).",labelTheme:"Tema",tailTheme:"klicka för att växla teman.",labelBackupRestore:"Säkerhetskopiera och återställ",tailBackupRestore:"importera eller exportera all data som en zipfil.",labelSettings:"Inställningar",tailSettings:"öppna detta.",tailUploadBeforeDelete:"lägg till en MP3-fil, eller radera den.",tailUploadAfterDelete:""},Jr={sectionTopBarTitle:"Topbjælke: metronom og tempo",sectionPatternsTitle:"Mønstre, takter og loopområde",sectionGridTitle:"Gittereditor og notation",sectionActionButtonsTitle:"Handlingsknapper (højre side)",sectionBgmTitle:"Baggrundsmusik (øvetilstand)",sectionSettingsTitle:"Indstillinger og Om",labelBeatDots:"Taktprikker",tailBeatDots:"klik for at skifte taktart (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"klik for trin på 0,5 BPM, hold nede for fortsat ændring.",labelBpmNumber:"BPM-tal",tailBpmNumber:"tryk på venstre/højre side af tallene for at skifte hastighed (en hastighedsetiket vises).",labelPlay:"Afspil",tailPlay:"start eller stop afspilning. Langt tryk nulstiller loop-tælleren til 0.",labelTabs:"Faner",tailTabs:"cirklen er kladde; bogstavfaner er gemte mønstre. Klik på en fane for at indlæse den.",labelNewPattern:"Nyt mønster",tailNewPattern:"gem den aktuelle kladde som en ny mønsterfane.",labelImportPattern:"Importer mønster",tailImportPattern:"indlæs en pattern-zipfil.",labelBars:"Takter",tailBars:"fjern eller tilføj en takt (bruger markørposition når muligt).",labelLoopRange:"Loopområde",tailLoopRange:"vælg start/slut-mønster og takt; hold +/- nede for hurtigere flytning.",labelPerBarBpm:"BPM pr. takt",tailPerBarBpm:"klik for at sætte eller rydde BPM for den aktuelle takt.",labelCopyPaste:"Kopiér/Indsæt",tailCopyPaste:"duplikér et helt mønstergitter før eller efter.",labelSingleClickTap:"Enkelt klik/tryk",tailSingleClickTap:"slå en celle til eller fra.",labelDoubleClickTap:"Dobbeltklik/tryk",tailDoubleClickTap:"skift 32.-dels-tilstande (dobbelt, første, anden, tilbage til normal).",labelLongPressActiveCell:"Langt tryk på en aktiv celle",tailLongPressActiveCell:"skift notetype (normal -> ghost note -> forslagsnote), når understøttet.",labelNotationView:"Notationsvisning",tailNotationView:"dobbeltklik/tryk for at flytte afspilningshovedet (kun deaktiveret ved afspilning med hastighedsetiket).",labelCountIn:"Optælling",tailCountIn:"slå en optælling på én takt til før afspilning.",labelPracticeMode:"Øvetilstand",tailPracticeMode:"vis baggrundsmusik og lydstyrkekontroller.",labelPlayBottom:"Afspil (nederst)",tailPlayBottom:"tryk for afspil/pause. Langt tryk for stop og hop til loop-start.",labelSaveCurrent:"Gem nuværende",tailSaveCurrent:"gem ændringer i det nuværende mønster. Langt tryk for at eksportere pattern-zip (inkluderer BGM).",labelDelete:"Slet",tailDelete:"fjern det nuværende mønster.",labelClear:"Ryd",tailClear:"kort tryk rydder den aktuelle takt, langt tryk rydder alle takter.",labelUpload:"Upload",tailUpload:"tilføj en MP3-fil, eller slet den.",labelVolume:"Lydstyrke",tailVolume:"klik eller hold nede for at justere. Klik på %-tallet for lyd til/fra.",labelOffset:"Forskydning",tailOffset:"klik på ms/s-værdien for at skrive en præcis forskydning (deaktiveret under afspilning).",labelPatternVolume:"Mønstervolumen",tailPatternVolume:"kontrollerne i højre side justerer trommevolumen (samme +/- og mute-adfærd).",labelTheme:"Tema",tailTheme:"klik for at skifte temaer.",labelBackupRestore:"Backup og gendan",tailBackupRestore:"importér eller eksportér alle data som en zipfil.",labelSettings:"Indstillinger",tailSettings:"åbn dette.",tailUploadBeforeDelete:"tilføj en MP3-fil, eller slet den.",tailUploadAfterDelete:""},Xr={sectionTopBarTitle:"Yläpalkki: metronomi ja tempo",sectionPatternsTitle:"Kuviot, tahdit ja toistoalue",sectionGridTitle:"Ruudukkoeditori ja nuotinnus",sectionActionButtonsTitle:"Toimintapainikkeet (oikea puoli)",sectionBgmTitle:"Taustamusiikki (harjoittelutila)",sectionSettingsTitle:"Asetukset ja Tietoja",labelBeatDots:"Tahtipisteet",tailBeatDots:"napauta vaihtaaksesi tahtilajia (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"napauta 0,5 BPM askelin, pidä painettuna muuttaaksesi jatkuvasti.",labelBpmNumber:"BPM-numero",tailBpmNumber:"napauta numeroiden vasenta/oikeaa puolta vaihtaaksesi nopeuksia (nopeustunniste näkyy).",labelPlay:"Toista",tailPlay:"aloita tai pysäytä toisto. Pitkä painallus nollaa silmukkalaskurin arvoon 0.",labelTabs:"Välilehdet",tailTabs:"ympyrä on luonnos; kirjainvälilehdet ovat tallennettuja kuvioita. Lataa kuvio napsauttamalla välilehteä.",labelNewPattern:"Uusi kuvio",tailNewPattern:"tallenna nykyinen luonnos uutena kuviovälilehtenä.",labelImportPattern:"Tuo kuvio",tailImportPattern:"lataa pattern-zip-tiedosto.",labelBars:"Tahdit",tailBars:"poista tai lisää tahti (käyttää kohdistimen sijaintia, jos mahdollista).",labelLoopRange:"Toistoalue",tailLoopRange:"valitse alku/loppu-kuvio ja tahti; pidä +/- painettuna siirtyäksesi nopeammin.",labelPerBarBpm:"Tahtikohtainen BPM",tailPerBarBpm:"aseta tai poista nykyisen tahdin BPM napsauttamalla.",labelCopyPaste:"Kopioi/Liitä",tailCopyPaste:"kopioi koko kuviollinen ruudukko ennen tai jälkeen.",labelSingleClickTap:"Yksi napsautus/napautus",tailSingleClickTap:"kytke solu päälle tai pois.",labelDoubleClickTap:"Kaksoisnapsautus/napautus",tailDoubleClickTap:"kierrä 32-osanuottitiloja (tupla, ensimmäinen, toinen, takaisin normaaliin).",labelLongPressActiveCell:"Pitkä painallus aktiivisessa solussa",tailLongPressActiveCell:"vaihda nuottityyppiä (normaali -> haamunuotti -> etunuotti), kun tuettu.",labelNotationView:"Nuotinnusnäkymä",tailNotationView:"kaksoisnapsauta/napauta hypätäksesi toistopäähän (poissa käytöstä vain, kun nopeustunnisteellinen toisto on aktiivinen).",labelCountIn:"Sisäänlasku",tailCountIn:"kytke yhden tahdin sisäänlasku ennen toistoa.",labelPracticeMode:"Harjoittelutila",tailPracticeMode:"näytä taustamusiikki ja äänenvoimakkuussäätimet.",labelPlayBottom:"Toista (alhaalla)",tailPlayBottom:"napauta toista/tauko. Pitkä painallus pysäyttää ja siirtää silmukan alkuun.",labelSaveCurrent:"Tallenna nykyinen",tailSaveCurrent:"tallenna muutokset nykyiseen kuvioon. Pitkä painallus vie pattern-zipin (sis. BGM).",labelDelete:"Poista",tailDelete:"poista nykyinen kuvio.",labelClear:"Tyhjennä",tailClear:"lyhyt painallus tyhjentää nykyisen tahdin, pitkä painallus kaikki tahdit.",labelUpload:"Lataa",tailUpload:"lisää MP3-tiedosto tai poista se.",labelVolume:"Äänenvoimakkuus",tailVolume:"säädä napsauttamalla tai pitämällä painettuna. Napsauta %-lukua mykistääksesi/poistaaksesi mykistyksen.",labelOffset:"Siirtymä",tailOffset:"napauta ms/s-arvoa syöttääksesi tarkan siirtymän (pois käytöstä toiston aikana).",labelPatternVolume:"Kuvion äänenvoimakkuus",tailPatternVolume:"oikean puolen säätimet muuttavat rumpujen äänenvoimakkuutta (sama +/- ja mykistyskäytös).",labelTheme:"Teema",tailTheme:"napsauta vaihtaaksesi teemaa.",labelBackupRestore:"Varmuuskopioi ja palauta",tailBackupRestore:"tuo tai vie kaikki tiedot zip-tiedostona.",labelSettings:"Asetukset",tailSettings:"avaa tämä.",tailUploadBeforeDelete:"lisää MP3-tiedosto tai poista se.",tailUploadAfterDelete:""},Qr={sectionTopBarTitle:"Toppfelt: metronom og tempo",sectionPatternsTitle:"Mønstre, takter og loop-område",sectionGridTitle:"Rutenetteditor og notasjon",sectionActionButtonsTitle:"Handlingsknapper (høyre side)",sectionBgmTitle:"Bakgrunnsmusikk (øvingsmodus)",sectionSettingsTitle:"Innstillinger og Om",labelBeatDots:"Taktprikker",tailBeatDots:"klikk for å bytte taktart (4/4, 3/4, 2/4, 6/8, 5/4, 7/8).",labelTempo:"Tempo",tailTempo:"klikk for trinn på 0,5 BPM, hold inne for å fortsette å endre.",labelBpmNumber:"BPM-tall",tailBpmNumber:"trykk på venstre/høyre side av tallene for å bytte hastighet (en hastighetsetikett vises).",labelPlay:"Spill av",tailPlay:"start eller stopp avspilling. Langt trykk nullstiller loop-telleren til 0.",labelTabs:"Faner",tailTabs:"sirkelen er Utkast; bokstavfaner er lagrede mønstre. Klikk en fane for å laste den.",labelNewPattern:"Nytt mønster",tailNewPattern:"lagre gjeldende utkast som en ny mønsterfane.",labelImportPattern:"Importer mønster",tailImportPattern:"last inn en pattern-zip-fil.",labelBars:"Takter",tailBars:"fjern eller legg til en takt (bruker markørposisjon når mulig).",labelLoopRange:"Loop-område",tailLoopRange:"velg start/slutt-mønster og takt; hold +/- inne for å flytte raskere.",labelPerBarBpm:"BPM per takt",tailPerBarBpm:"klikk for å sette eller fjerne BPM for gjeldende takt.",labelCopyPaste:"Kopier/Lim inn",tailCopyPaste:"dupliser et helt mønsterrutenett før eller etter.",labelSingleClickTap:"Enkelt klikk/trykk",tailSingleClickTap:"slå en celle av eller på.",labelDoubleClickTap:"Dobbeltklikk/trykk",tailDoubleClickTap:"veksle 32.-dels-tilstander (dobbel, første, andre, tilbake til normal).",labelLongPressActiveCell:"Langt trykk på en aktiv celle",tailLongPressActiveCell:"veksle notetype (normal -> ghost note -> forslagsnote) når støttet.",labelNotationView:"Notasjonsvisning",tailNotationView:"dobbeltklikk/trykk for å hoppe avspillingshodet (deaktivert kun ved avspilling med hastighetsetikett).",labelCountIn:"Inntelling",tailCountIn:"slå på en takts inntelling før avspilling.",labelPracticeMode:"Øvingsmodus",tailPracticeMode:"vis bakgrunnsmusikk og volumkontroller.",labelPlayBottom:"Spill av (nederst)",tailPlayBottom:"trykk for spill/pause. Langt trykk for stopp og hopp til loop-start.",labelSaveCurrent:"Lagre gjeldende",tailSaveCurrent:"lagre endringer i gjeldende mønster. Langt trykk for å eksportere pattern-zip (inkluderer BGM).",labelDelete:"Slett",tailDelete:"fjern gjeldende mønster.",labelClear:"Tøm",tailClear:"kort trykk tømmer gjeldende takt, langt trykk tømmer alle takter.",labelUpload:"Last opp",tailUpload:"legg til en MP3-fil, eller slett den.",labelVolume:"Volum",tailVolume:"klikk eller hold inne for å justere. Klikk på %-tallet for demp/opphev demping.",labelOffset:"Forskyvning",tailOffset:"klikk på ms/s-verdien for å skrive inn en nøyaktig forskyvning (deaktivert under avspilling).",labelPatternVolume:"Mønstervolum",tailPatternVolume:"kontrollene på høyre side justerer trommevolumet (samme +/- og mute-oppførsel).",labelTheme:"Tema",tailTheme:"klikk for å bytte tema.",labelBackupRestore:"Sikkerhetskopi og gjenoppretting",tailBackupRestore:"importer eller eksporter alle data som en zip-fil.",labelSettings:"Innstillinger",tailSettings:"åpne dette.",tailUploadBeforeDelete:"legg til en MP3-fil, eller slett den.",tailUploadAfterDelete:""},ei={en:Nr,"zh-CN":{sectionTopBarTitle:"顶部栏：节拍器和速度",sectionPatternsTitle:"节奏型、小节与循环范围",sectionGridTitle:"网格编辑器和符号",sectionActionButtonsTitle:"操作按钮（右侧）",sectionBgmTitle:"背景音乐（练习模式）",sectionSettingsTitle:"设置和关于",labelBeatDots:"节拍点",tailBeatDots:"单击以循环拍号（4/4、3/4、2/4、6/8、5/4、7/8）。",labelTempo:"速度",tailTempo:"单击 0.5 BPM 步长，按住可继续更改。",labelBpmNumber:"BPM数",tailBpmNumber:"点击数字的左/右侧可循环速度速率（出现速率标签）。",labelPlay:"播放",tailPlay:"开始或停止播放。长按可将循环计数器重置为 0。",labelTabs:"标签页",tailTabs:"圆圈为草稿；字母标签页是已保存的节奏型。点击标签页即可加载。",labelNewPattern:"新节奏型",tailNewPattern:"将当前草稿保存为新的节奏型标签页。",labelImportPattern:"导入节奏型",tailImportPattern:"加载节奏型 zip 文件。",labelBars:"小节",tailBars:"删除或添加一个小节（尽可能使用你的光标位置）。",labelLoopRange:"循环范围",tailLoopRange:"选择起始/结束节奏型与小节；按住 +/- 按钮可加快移动速度。",labelPerBarBpm:"每小节 BPM",tailPerBarBpm:"单击可设置或清除当前小节的 BPM。",labelCopyPaste:"复制/粘贴",tailCopyPaste:"在之前或之后复制整个节奏型网格。",labelSingleClickTap:"单击/点击",tailSingleClickTap:"打开或关闭单元格。",labelDoubleClickTap:"双击/点击",tailDoubleClickTap:"循环第 32 个音符状态（双音、第一音、第二音、恢复正常）。",labelLongPressActiveCell:"长按活动单元格",tailLongPressActiveCell:"支持时循环音符类型（正常到鬼音到倚音）。",labelNotationView:"符号视图",tailNotationView:"双击/点击可跳转播放头（仅在速率标签处于活动状态时禁用）。",labelCountIn:"预备拍",tailCountIn:"在播放前切换一小节预备拍。",labelPracticeMode:"练习模式",tailPracticeMode:"显示背景音乐和音量控制。",labelPlayBottom:"播放（下）",tailPlayBottom:"点击播放/暂停。长按停止并跳转到循环开始。",labelSaveCurrent:"保存当前",tailSaveCurrent:"保存对当前节奏型的编辑。长按可导出节奏型 zip（包括 BGM）。",labelDelete:"删除",tailDelete:"删除当前节奏型。",labelClear:"清除",tailClear:"短按清除当前栏，长按清除所有栏。",labelUpload:"上传",tailUpload:"添加 MP3 文件，或删除它。",labelVolume:"体积",tailVolume:"单击或按住进行调整。单击 % 数字可静音/取消静音。",labelOffset:"抵消",tailOffset:"单击 ms/s 值可输入精确的偏移量（播放时禁用）。",labelPatternVolume:"节奏型音量",tailPatternVolume:"右侧控件可调节鼓音量（相同的 +/- 和静音行为）。",labelTheme:"主题",tailTheme:"单击可循环主题。",labelBackupRestore:"备份与恢复",tailBackupRestore:"将所有数据导入或导出为 zip 文件。",labelSettings:"设置",tailSettings:"打开这个。",tailUploadBeforeDelete:"添加 MP3 文件，或删除它。",tailUploadAfterDelete:""},"zh-TW":{sectionTopBarTitle:"頂部欄：節拍器和速度",sectionPatternsTitle:"節奏型、小節與循環範圍",sectionGridTitle:"網格編輯器和符號",sectionActionButtonsTitle:"操作按鈕（右側）",sectionBgmTitle:"背景音樂（練習模式）",sectionSettingsTitle:"設置和關於",labelBeatDots:"節拍點",tailBeatDots:"單擊以循環拍號（4/4、3/4、2/4、6/8、5/4、7/8）。",labelTempo:"速度",tailTempo:"單擊 0.5 BPM 步長，按住可繼續更改。",labelBpmNumber:"BPM數",tailBpmNumber:"點擊數字的左/右側可循環速度速率（出現速率標籤）。",labelPlay:"播放",tailPlay:"開始或停止播放。長按可將循環計數器重置為 0。",labelTabs:"標籤頁",tailTabs:"圓圈為草稿；字母標籤頁是已儲存的節奏型。點擊標籤頁即可載入。",labelNewPattern:"新節奏型",tailNewPattern:"將目前草稿儲存為新的節奏型標籤頁。",labelImportPattern:"匯入節奏型",tailImportPattern:"載入節奏型 zip 檔案。",labelBars:"小節",tailBars:"刪除或新增一個小節（盡可能使用你的游標位置）。",labelLoopRange:"循環範圍",tailLoopRange:"選擇起始/結束節奏型與小節；按住 +/- 按鈕可加快移動速度。",labelPerBarBpm:"每小節 BPM",tailPerBarBpm:"單擊可設置或清除當前小節的 BPM。",labelCopyPaste:"複製/粘貼",tailCopyPaste:"在之前或之後複製整個節奏型網格。",labelSingleClickTap:"單擊/點擊",tailSingleClickTap:"打開或關閉單元格。",labelDoubleClickTap:"雙擊/點擊",tailDoubleClickTap:"循環第 32 個音符狀態（雙音、第一音、第二音、恢復正常）。",labelLongPressActiveCell:"長按活動單元格",tailLongPressActiveCell:"支持時循環音符類型（正常到鬼音到倚音）。",labelNotationView:"符號視圖",tailNotationView:"雙擊/點擊可跳轉播放頭（僅在速率標籤處於活動狀態時禁用）。",labelCountIn:"預備拍",tailCountIn:"在播放前切換一小節預備拍。",labelPracticeMode:"練習模式",tailPracticeMode:"顯示背景音樂和音量控制。",labelPlayBottom:"播放（下）",tailPlayBottom:"點擊播放/暫停。長按停止並跳轉到循環開始。",labelSaveCurrent:"保存當前",tailSaveCurrent:"保存對目前節奏型的編輯。長按可匯出節奏型 zip（包括 BGM）。",labelDelete:"刪除",tailDelete:"刪除目前節奏型。",labelClear:"清除",tailClear:"短按清除當前欄，長按清除所有欄。",labelUpload:"上傳",tailUpload:"添加 MP3 文件，或刪除它。",labelVolume:"體積",tailVolume:"單擊或按住進行調整。單擊 % 數字可靜音/取消靜音。",labelOffset:"抵消",tailOffset:"單擊 ms/s 值可輸入精確的偏移量（播放時禁用）。",labelPatternVolume:"節奏型音量",tailPatternVolume:"右側控件可調節鼓音量（相同的 +/- 和靜音行為）。",labelTheme:"主題",tailTheme:"單擊可循環主題。",labelBackupRestore:"備份與恢復",tailBackupRestore:"將所有數據導入或導出為 zip 文件。",labelSettings:"設定",tailSettings:"打開這個。",tailUploadBeforeDelete:"添加 MP3 文件，或刪除它。",tailUploadAfterDelete:""},ja:Rr,ko:Dr,fr:Lr,de:zr,es:Er,pt:Mr,it:Or,ru:Ur,ar:Vr,hi:Hr,th:Fr,vi:Gr,id:Wr,ms:Kr,tr:$r,pl:qr,nl:Zr,sv:Yr,da:Jr,fi:Xr,no:Qr},ti=[{code:"en",label:"English"},{code:"zh-CN",label:"简体中文"},{code:"zh-TW",label:"繁體中文"},{code:"ja",label:"日本語"},{code:"ko",label:"한국어"},{code:"fr",label:"Français"},{code:"de",label:"Deutsch"},{code:"es",label:"Español"},{code:"pt",label:"Português"},{code:"it",label:"Italiano"},{code:"ru",label:"Русский"},{code:"ar",label:"العربية"},{code:"hi",label:"हिन्दी"},{code:"th",label:"ไทย"},{code:"vi",label:"Tiếng Việt"},{code:"id",label:"Bahasa Indonesia"},{code:"ms",label:"Bahasa Melayu"},{code:"tr",label:"Türkçe"},{code:"pl",label:"Polski"},{code:"nl",label:"Nederlands"},{code:"sv",label:"Svenska"},{code:"da",label:"Dansk"},{code:"fi",label:"Suomi"},{code:"no",label:"Norsk"}],ai=["en","zh-CN","zh-TW","ja","ko","fr","de","es","pt","it","ru","ar","hi","th","vi","id","ms","tr","pl","nl","sv","da","fi","no"],ni=ti,on=jr,ri=on.default,ja=on.translations,ii=new Set(ai);function ln(t){return ii.has(t)}function si(t){const a=t.trim().toLowerCase();if(a.startsWith("zh"))return a.includes("-tw")||a.includes("-hk")||a.includes("-mo")||a.includes("hant")?"zh-TW":"zh-CN";if(a.startsWith("nb")||a.startsWith("nn"))return"no";const e=a.split("-")[0];return ln(e)?e:"en"}function Ut(t,a=navigator.language){return t==="auto"?si(a):t}function oi(t,a=navigator.language){const e=Ut(t,a);return{...ri,...ja[e]??ja.en}}const Aa=ei;function li(t,a=navigator.language){const e=Ut(t,a);return{...Aa.en,...Aa[e]??{}}}const cn=Ir,ci=cn.default,ui=cn.translations;function di(t,a,e=navigator.language){var r;const s=Ut(a,e);return((r=ui[s])==null?void 0:r[t])??ci[t]}const un="drummer-app-data",dn="drummer-metronome-bpm",ta="drummer-cross-pattern-loop",pn="drummer-sample-selection",fn="drummer-settings-language",pi="vexflow",mn=new Set([Pe,je,De,Ke,ze,Ve,He]);function fi(t){return t.map(a=>a.map(e=>typeof e=="boolean"?e?je:Pe:typeof e=="number"&&mn.has(e)?e:Pe))}function mi(t){return t.grid.length>0&&t.grid[0].length>0&&typeof t.grid[0][0]=="boolean"?{...t,grid:fi(t.grid)}:t}function vt(){try{const t=localStorage.getItem(un);if(t){const a=JSON.parse(t);return a.patterns=a.patterns.map(mi),a}}catch(t){console.error("Failed to load storage data:",t)}return{patterns:[]}}function ua(t){try{localStorage.setItem(un,JSON.stringify(t))}catch(a){console.error("Failed to save storage data:",a)}}function St(t){const a=vt(),e=a.patterns.findIndex(s=>s.id===t.id);e>=0?a.patterns[e]=t:a.patterns.push(t),ua(a)}function tt(){return vt().patterns}function hi(t){const a=vt();a.patterns=a.patterns.filter(e=>e.id!==t),a.currentPatternId===t&&(a.currentPatternId=void 0),ua(a)}function gi(){return vt().currentPatternId}function Oe(t){const a=vt();a.currentPatternId=t,ua(a)}function jt(){return`pattern-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function Ue(t){try{localStorage.setItem(dn,String(t))}catch(a){console.error("Failed to save metronome BPM:",a)}}function Ia(){try{localStorage.removeItem("metronome_bpm");const t=localStorage.getItem(dn);if(t){const a=parseInt(t,10);if(!isNaN(a)&&a>=20&&a<=300)return a}}catch(t){console.error("Failed to load metronome BPM:",t)}return null}function bi(t){try{t===void 0?localStorage.removeItem(ta):localStorage.setItem(ta,JSON.stringify(t))}catch(a){console.error("Failed to save cross pattern loop:",a)}}function ki(){try{const t=localStorage.getItem(ta);if(t){const a=JSON.parse(t);if(typeof a=="object"&&typeof a.startPatternName=="string"&&typeof a.startBar=="number"&&typeof a.endPatternName=="string"&&typeof a.endBar=="number"&&a.startBar>=0&&a.endBar>=0)return a}}catch(t){console.error("Failed to load cross pattern loop:",t)}}function vi(t){if(typeof t!="object"||t===null)return!1;const a=t;if(typeof a.id!="string"||a.id.length===0||typeof a.name!="string"||a.name.length===0||typeof a.bpm!="number"||a.bpm<20||a.bpm>300||!Array.isArray(a.timeSignature)||a.timeSignature.length!==2||typeof a.timeSignature[0]!="number"||typeof a.timeSignature[1]!="number"||typeof a.bars!="number"||a.bars<1||a.bars>100||!Array.isArray(a.grid))return!1;for(const e of a.grid){if(!Array.isArray(e))return!1;for(const s of e)if(typeof s!="number"||!mn.has(s))return!1}if(!Array.isArray(a.drums))return!1;for(const e of a.drums)if(typeof e!="string")return!1;if(typeof a.createdAt!="number"||typeof a.updatedAt!="number"||a.loopRange!==void 0&&(!Array.isArray(a.loopRange)||a.loopRange.length!==2||typeof a.loopRange[0]!="number"||typeof a.loopRange[1]!="number"))return!1;if(a.barBpmOverrides!==void 0){if(typeof a.barBpmOverrides!="object"||a.barBpmOverrides===null)return!1;for(const[e,s]of Object.entries(a.barBpmOverrides)){const r=parseInt(e,10);if(isNaN(r)||r<0||typeof s!="number"||s<20||s>300)return!1}}return!0}function Na(t){try{const a=JSON.parse(t);if(vi(a))return a}catch{}return null}function yi(t){return JSON.stringify(t)}function Wt(t){const a=t.map(s=>s.name).filter(s=>/^[A-Z]$/.test(s));let e="A";if(a.length>0){const s=a.map(n=>n.charCodeAt(0)),r=Math.max(...s);if(r<90)e=String.fromCharCode(r+1);else for(let n=65;n<=90;n++)if(!s.includes(n)){e=String.fromCharCode(n);break}}return e}function Ra(){return pi}function wi(t){try{localStorage.setItem(pn,JSON.stringify(t))}catch(a){console.error("Failed to save sample selection:",a)}}function da(){try{const t=localStorage.getItem(pn);if(t){const a=JSON.parse(t),e=new Set(["A","B","C"]),s={};for(const[r,n]of Object.entries(a))e.has(n)&&(s[r]=n);return s}}catch(t){console.error("Failed to load sample selection:",t)}return{}}function Xe(t){return da()[t]||"A"}function xi(t,a){const e=da();e[t]=a,wi(e)}function Bi(t){try{localStorage.setItem(fn,t)}catch(a){console.error("Failed to save settings language preference:",a)}}function Si(){try{const t=localStorage.getItem(fn);if(!t||t==="auto")return"auto";if(ln(t))return t}catch(t){console.error("Failed to load settings language preference:",t)}return"auto"}function hn(t="New Pattern"){const a=ea[0],e=Rt*a*fe;return{id:jt(),name:t,bpm:mt,timeSignature:ea,bars:Rt,grid:Array(_a.length).fill(null).map(()=>Array(e).fill(Pe)),drums:_a,createdAt:Date.now(),updatedAt:Date.now()}}const Ti=t=>t===ze||t===Ve||t===He;function Kt(t,a,e,s){if(!t)return;const r={};for(const[n,o]of Object.entries(t)){const l=parseInt(n,10);l!==s&&(l>=a?r[l+e]=o:r[l]=o)}return Object.keys(r).length>0?r:void 0}function Ci(t){const[a,e]=T.useState(t),s=T.useCallback(c=>{e(h=>({...h,bpm:c,updatedAt:Date.now()}))},[]),r=T.useCallback((c,h)=>{e(m=>{const b={...m.barBpmOverrides};h===null?delete b[c]:b[c]=h;const S=Object.keys(b).length>0;return{...m,barBpmOverrides:S?b:void 0,updatedAt:Date.now()}})},[]),n=T.useCallback((c,h)=>{e(m=>{const b=m.grid.map((S,w)=>{if(w===c){const _=[...S];return _[h]=_[h]===Pe?je:Pe,_}return S});return{...m,grid:b,updatedAt:Date.now()}})},[]),o=T.useCallback((c,h)=>{e(m=>{var D;const b=(D=m.grid[c])==null?void 0:D[h];if(b===Pe||Ti(b))return m;const S=m.drums[c],w=Pa[S],_=m.grid.map((R,I)=>{if(I===c){const N=[...R];let H;return b===je?H=w.allowGhost?De:je:b===De?H=w.allowGrace?Ke:je:H=je,N[h]=H,N}return R});return{...m,grid:_,updatedAt:Date.now()}})},[]),l=T.useCallback((c,h)=>{e(m=>{var R;const b=(R=m.grid[c])==null?void 0:R[h],S=m.drums[c];if(!Pa[S].allowThirtySecond){if(b===Pe){const I=m.grid.map((N,H)=>{if(H===c){const E=[...N];return E[h]=je,E}return N});return{...m,grid:I,updatedAt:Date.now()}}return m}let _;b===je||b===De||b===Ke?_=ze:b===ze?_=Ve:b===Ve?_=He:_=je;const D=m.grid.map((I,N)=>{if(N===c){const H=[...I];return H[h]=_,H}return I});return{...m,grid:D,updatedAt:Date.now()}})},[]),f=T.useCallback(c=>{e(h=>{var H;const[m]=h.timeSignature,b=m*fe;let S,w;if(c!==void 0){const E=Math.floor(c/b),B=c%b,L=b/2;B<L?(S=E,w=E):(S=E+1,w=E)}else S=h.bars,w=h.bars-1;const _=w*b,D=_+b,R=h.grid.map(E=>{const B=E.slice(_,D),L=[...E];return L.splice(S*b,0,...B),L});let I=Kt(h.barBpmOverrides,S,1);const N=(H=h.barBpmOverrides)==null?void 0:H[w];return N!==void 0&&(I=I??{},I[S]=N),{...h,bars:h.bars+1,grid:R,barBpmOverrides:I,updatedAt:Date.now()}})},[]),x=T.useCallback(c=>{e(h=>{if(h.bars<=1)return h;const[m]=h.timeSignature,b=m*fe;let S;if(c!==void 0){const R=Math.floor(c/b),I=c%b,N=b/2;I<N,S=R}else S=h.bars-1;const w=S*b,_=h.grid.map(R=>{const I=[...R];return I.splice(w,b),I}),D=Kt(h.barBpmOverrides,S+1,-1,S);return{...h,bars:h.bars-1,grid:_,barBpmOverrides:D,loopRange:h.loopRange&&h.loopRange[1]>=h.bars-1?[h.loopRange[0],h.bars-2]:h.loopRange,updatedAt:Date.now()}})},[]),y=T.useCallback(()=>{e(c=>{const h=c.grid.map(m=>m.map(()=>Pe));return{...c,grid:h,updatedAt:Date.now()}})},[]),k=T.useCallback(c=>{e(h=>{const[m]=h.timeSignature,b=m*fe,w=Math.floor(c/b)*b,_=w+b,D=h.grid.map(R=>{const I=[...R];for(let N=w;N<_;N++)I[N]=Pe;return I});return{...h,grid:D,updatedAt:Date.now()}})},[]),v=T.useCallback((c,h)=>{e(m=>{var H;if(h.bars<=0||h.grid.length!==m.drums.length||h.timeSignature[0]!==m.timeSignature[0]||h.timeSignature[1]!==m.timeSignature[1])return m;const[b]=m.timeSignature,S=b*fe,w=Math.max(0,Math.min(m.bars,c)),_=w*S,D=h.bars*S;if(h.grid.some(E=>E.length!==D))return m;const R=m.grid.map((E,B)=>{const L=h.grid[B],d=[...E];return d.splice(_,0,...L),d}),I=h.bpm!==m.bpm;let N=Kt(m.barBpmOverrides,w,h.bars);for(let E=0;E<h.bars;E++){const B=(H=h.barBpmOverrides)==null?void 0:H[E];B!==void 0?(N=N??{},N[w+E]=B):I&&(N=N??{},N[w+E]=h.bpm)}return{...m,bars:m.bars+h.bars,grid:R,barBpmOverrides:N,updatedAt:Date.now()}})},[]),p=T.useCallback(c=>{e(c)},[]),g=T.useCallback(()=>{e(hn())},[]);return{pattern:a,updateBPM:s,updateBarBpm:r,toggleCell:n,toggleGhost:o,cycleThirtySecond:l,addBar:f,removeBar:x,clearGrid:y,clearBar:k,insertPatternGrid:v,loadPattern:p,resetPattern:g}}function Pi(t,a){const e=T.useRef(t),s=T.useRef(a);T.useEffect(()=>{e.current=t},[t]),T.useEffect(()=>{s.current=a},[a]),T.useEffect(()=>{const r=n=>{if(e.current||s.current)return n.preventDefault(),n.returnValue="",""};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}},[])}const _i="drummer-audio-cache",ji=1,Ie="audio-buffers",gn="cache-version",$t="1.0.0";async function yt(){return new Promise((t,a)=>{const e=indexedDB.open(_i,ji);e.onerror=()=>a(e.error),e.onsuccess=()=>t(e.result),e.onupgradeneeded=s=>{const r=s.target.result;r.objectStoreNames.contains(Ie)||r.createObjectStore(Ie,{keyPath:"name"})}})}function Ai(t){const a=[];for(let e=0;e<t.numberOfChannels;e++)a.push(t.getChannelData(e));return{numberOfChannels:t.numberOfChannels,length:t.length,sampleRate:t.sampleRate,channelData:a}}function Ii(t,a){const e=t.createBuffer(a.numberOfChannels,a.length,a.sampleRate);for(let s=0;s<a.numberOfChannels;s++)e.getChannelData(s).set(a.channelData[s]);return e}async function Ni(t,a){try{const e=await yt(),r=e.transaction(Ie,"readwrite").objectStore(Ie),n=Ai(a);await new Promise((o,l)=>{const f=r.put({name:t,data:n});f.onsuccess=()=>o(),f.onerror=()=>l(f.error)}),e.close()}catch(e){console.warn(`Failed to cache audio buffer "${t}":`,e)}}async function Ri(t,a){try{const e=await yt(),r=e.transaction(Ie,"readonly").objectStore(Ie),n=await new Promise((o,l)=>{const f=r.get(a);f.onsuccess=()=>o(f.result),f.onerror=()=>l(f.error)});return e.close(),n?Ii(t,n.data):null}catch(e){return console.warn(`Failed to get cached audio buffer "${a}":`,e),null}}async function Di(){try{const t=await yt(),e=t.transaction(Ie,"readwrite").objectStore(Ie);await new Promise((s,r)=>{const n=e.clear();n.onsuccess=()=>s(),n.onerror=()=>r(n.error)}),t.close()}catch(t){console.warn("Failed to clear audio cache:",t)}}async function Li(){try{const t=await yt(),e=t.transaction(Ie,"readonly").objectStore(Ie),s=await new Promise((r,n)=>{const o=e.get(gn);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)});return t.close(),s?s.version:null}catch(t){return console.warn("Failed to get cache version:",t),null}}async function zi(t){try{const a=await yt(),s=a.transaction(Ie,"readwrite").objectStore(Ie);await new Promise((r,n)=>{const o=s.put({name:gn,version:t});o.onsuccess=()=>r(),o.onerror=()=>n(o.error)}),a.close()}catch(a){console.warn("Failed to set cache version:",a)}}async function Ei(){try{const t=await Li();t!==$t&&(console.log(`Cache version mismatch. Expected: ${$t}, Found: ${t}. Clearing cache...`),await Di(),await zi($t))}catch(t){console.warn("Failed to check cache version:",t)}}const Mi="/drummer/assets/kick-f5f64180.mp3",Oi="/drummer/assets/snare-8dad42f7.mp3",Ui="/drummer/assets/hi-hat-closed-20faf03a.mp3",Vi="/drummer/assets/hi-hat-open-c13c6d66.mp3",Hi="/drummer/assets/crash-0688e97a.mp3",Fi="/drummer/assets/crash2-2d466720.mp3",Gi="/drummer/assets/ride-3a112803.mp3",Wi="/drummer/assets/tom1-e6733423.mp3",Ki="/drummer/assets/tom2-5814473e.mp3",$i="/drummer/assets/tom3-3f3fe247.mp3",At="/drummer/assets/metronome-6b186e46.mp3",qi="/drummer/assets/kick-alt-5db34cd3.mp3",Zi="/drummer/assets/snare-alt-7443784f.mp3",Yi="/drummer/assets/hi-hat-closed-alt-579c1ecc.mp3",Ji="/drummer/assets/hi-hat-open-alt-2a309767.mp3",Xi="/drummer/assets/crash-alt-b6475d55.mp3",Qi="/drummer/assets/crash2-alt-ccf2fd73.mp3",es="/drummer/assets/ride-alt-cd8ec646.mp3",ts="/drummer/assets/tom1-alt-b6d45de2.mp3",as="/drummer/assets/tom2-alt-4a6c5691.mp3",ns="/drummer/assets/tom3-alt-91899744.mp3",rs="/drummer/assets/kick-another-e784ace5.mp3",is="/drummer/assets/snare-another-64a92387.mp3",ss="/drummer/assets/hi-hat-closed-another-95abeeca.mp3",os="/drummer/assets/hi-hat-open-another-5258c760.mp3",ls="/drummer/assets/crash-another-786f59e2.mp3",cs="/drummer/assets/crash2-another-bc14d1c8.mp3",us="/drummer/assets/ride-another-c76d7e1b.mp3",ds="/drummer/assets/tom1-another-d6cf6645.mp3",ps="/drummer/assets/tom2-another-dd8e625d.mp3",fs="/drummer/assets/tom3-another-917e78c9.mp3",ms={kick:{A:Mi,B:qi,C:rs},snare:{A:Oi,B:Zi,C:is},hiHatClosed:{A:Ui,B:Yi,C:ss},hiHatOpen:{A:Vi,B:Ji,C:os},crash1:{A:Hi,B:Xi,C:ls},crash2:{A:Fi,B:Qi,C:cs},ride:{A:Gi,B:es,C:us},tom1:{A:Wi,B:ts,C:ds},tom2:{A:Ki,B:as,C:ps},tom3:{A:$i,B:ns,C:fs},metronome:{A:At,B:At,C:At}},Qe={Kick:"kick",Snare:"snare","Hi-Hat Closed":"hiHatClosed","Hi-Hat Open":"hiHatOpen","Crash 1":"crash1","Crash 2":"crash2",Ride:"ride","Tom 1":"tom1","Tom 2":"tom2","Tom 3":"tom3"};let qt=null,Zt=!1;const bn=new Map;let aa=!1,ht=null,bt=1,kn=100,na=null;function hs(){return qt||(qt=mr()),qt}function gs(){const t=hs();return t.rawContext??t.context??t}function Fe(t,a){const s=Math.max(0,a-Te().currentTime)*1e3;setTimeout(()=>{t.forEach(r=>r.dispose())},s)}function Te(){return gs()}async function vn(){if(Te().state==="suspended"&&!Zt){Zt=!0;try{await en()}finally{Zt=!1}}}async function bs(t,a,e=!1){const s=Te();try{let r;const n=await Ri(s,a);if(n&&!e)r=n;else{const l=await(await fetch(t)).arrayBuffer();r=await s.decodeAudioData(l),await Ni(a,r)}bn.set(a,r)}catch{}}function pa(t=!1){if(aa&&!t)return Promise.resolve();if(ht)return ht;const a=["A","B","C"],e=["kick","snare","hiHatClosed","hiHatOpen","crash1","crash2","ride","tom1","tom2","tom3"],s=[];for(const n of e)for(const o of a){const l=ms[n][o],f=`${n}-${o}`;s.push({name:n,url:l,cacheKey:f})}s.push({name:"metronome",url:At,cacheKey:"metronome"});let r=0;return ht=(async()=>{for(const n of s)await bs(n.url,n.cacheKey,t),r++,na&&na(r,s.length,n.cacheKey);aa=!0})(),ht}function ks(){Te().state==="suspended"&&en().catch(()=>{}),pa()}async function yn(){await Ei(),await pa()}async function vs(){try{aa=!1,ht=null,await pa(!0)}catch(t){console.warn("Failed to update sample cache:",t)}}function Yt(t){na=t}async function ys(){return Promise.resolve()}function wn(t,a=1,e=1){return $e("metronome",t,a,!1,e,!1)}function xn(t,a=800,e=.01){const s=new xe(.3).toDestination(),r=new lt({frequency:a,type:"sine"});r.connect(s),s.gain.setValueAtTime(.3,t),s.gain.exponentialRampToValueAtTime(.01,t+e),r.start(t),r.stop(t+e),Fe([r,s],t+e+.1)}function ws(t){wn(t,.8,1.2)||xn(t,1e3,.02)}function xs(t){wn(t,.6,1)||xn(t,600,.01)}function Bn(t){const a=Qe.Kick,e=Xe("Kick"),s=`${a}-${e}`;$e(s,t,.9)||Bs(t)}function Bs(t){const a=new xe(.85).toDestination(),e=new xe,s=new lt({type:"sine"});s.connect(e),e.connect(a),s.frequency.setValueAtTime(150,t),s.frequency.exponentialRampToValueAtTime(40,t+.08),e.gain.setValueAtTime(1,t),e.gain.setValueAtTime(.8,t+.01),e.gain.exponentialRampToValueAtTime(.001,t+.25),s.start(t),s.stop(t+.25),Fe([s,e,a],t+.35)}function $e(t,a,e=1,s=!0,r=1,n=!0){const o=bn.get(t);if(!o)return!1;const l=n?kn/100:1,f=s?Math.max(0,Math.min(1,e*bt*l)):Math.max(0,Math.min(1,e*l)),x=new xe(f).toDestination(),y=new fr(o);y.connect(x),y.playbackRate=r;const k=Math.max(a,Te().currentTime);y.start(k);const v=Math.max(.01,r),p=o.duration/v;return Fe([y,x],k+p+.1),!0}function ra(t){const a=Qe.Snare,e=Xe("Snare"),s=`${a}-${e}`;$e(s,t,.9)||Ss(t)}function Ss(t){const a=new xe(.5).toDestination(),e=new lt({type:"triangle"}),s=new xe;e.connect(s),s.connect(a),e.frequency.setValueAtTime(200,t),e.frequency.exponentialRampToValueAtTime(120,t+.05),s.gain.setValueAtTime(.7,t),s.gain.exponentialRampToValueAtTime(.001,t+.12);const r=new lt({type:"sine"}),n=new xe;r.connect(n),n.connect(a),r.frequency.setValueAtTime(400,t),r.frequency.exponentialRampToValueAtTime(200,t+.03),n.gain.setValueAtTime(.3,t),n.gain.exponentialRampToValueAtTime(.001,t+.08);const o=new Et("white"),l=new Mt({type:"bandpass",frequency:5e3,Q:1}),f=new xe;o.connect(l),l.connect(f),f.connect(a),f.gain.setValueAtTime(.5,t),f.gain.exponentialRampToValueAtTime(.001,t+.18),e.start(t),e.stop(t+.12),r.start(t),r.stop(t+.08),o.start(t),o.stop(t+.18),Fe([e,s,r,n,o,l,f,a],t+.28)}function Sn(t){const a=Qe["Hi-Hat Closed"],e=Xe("Hi-Hat Closed"),s=`${a}-${e}`;$e(s,t,.7)||Ts(t)}function Ts(t){const a=new xe(.25).toDestination(),e=new Et("white"),s=new Mt({type:"highpass",frequency:7e3}),r=new xe;e.connect(s),s.connect(r),r.connect(a),r.gain.setValueAtTime(1,t),r.gain.exponentialRampToValueAtTime(.001,t+.05),e.start(t),e.stop(t+.05),Fe([e,s,r,a],t+.15)}function Tn(t){const a=Qe["Hi-Hat Open"],e=Xe("Hi-Hat Open"),s=`${a}-${e}`;$e(s,t,.5)||Cs(t)}function Cs(t){const a=new xe(.4).toDestination(),e=new Et("white"),s=new Mt({type:"highpass",frequency:6e3}),r=new xe;e.connect(s),s.connect(r),r.connect(a),r.gain.setValueAtTime(1,t),r.gain.exponentialRampToValueAtTime(.001,t+.35),e.start(t),e.stop(t+.35),Fe([e,s,r,a],t+.45)}function Dt(t,a=1){const e=a>1?"Crash 1":"Crash 2",s=Qe[e],r=Xe(e),n=`${s}-${r}`;$e(n,t,.6)||Ps(t,a)}function Ps(t,a=1){const e=new xe(.5).toDestination(),s=new Et("white"),r=new Mt({type:"highpass",frequency:3e3*a}),n=new xe;s.connect(r),r.connect(n),n.connect(e),n.gain.setValueAtTime(1,t),n.gain.exponentialRampToValueAtTime(.001,t+1.2),s.start(t),s.stop(t+1.2),Fe([s,r,n,e],t+1.3)}function Cn(t){const a=Qe.Ride,e=Xe("Ride"),s=`${a}-${e}`;$e(s,t,.7)||_s(t)}function _s(t){const a=new xe(.4).toDestination(),e=new xe,s=new lt({type:"sine",frequency:3e3});s.connect(e),e.connect(a),e.gain.setValueAtTime(.4,t),e.gain.exponentialRampToValueAtTime(.001,t+.5),s.start(t),s.stop(t+.5),Fe([s,e,a],t+.6)}function st(t,a=200){let e;a>=230?e="Tom 1":a>=180?e="Tom 2":e="Tom 3";const s=Qe[e],r=Xe(e),n=`${s}-${r}`;$e(n,t,1)||js(t,a)}function js(t,a=200){const e=new xe(.65).toDestination(),s=new xe,r=new lt({type:"sine"});r.connect(s),s.connect(e),r.frequency.setValueAtTime(a*1.5,t),r.frequency.exponentialRampToValueAtTime(a*.6,t+.2),s.gain.setValueAtTime(1,t),s.gain.exponentialRampToValueAtTime(.001,t+.3),r.start(t),r.stop(t+.3),Fe([r,s,e],t+.4)}async function ia(t,a=1){await vn(),await yn(),bt=a;const s=Te().currentTime;switch(t){case"Kick":Bn(s);break;case"Snare":ra(s);break;case"Hi-Hat Closed":Sn(s);break;case"Hi-Hat Open":Tn(s);break;case"Crash 1":Dt(s,1.2);break;case"Crash 2":Dt(s,1);break;case"Ride":Cn(s);break;case"Tom 1":st(s,280);break;case"Tom 2":st(s,220);break;case"Tom 3":st(s,160);break;default:ra(s)}bt=1}function As(t){bt=t}function Is(){bt=1}function Ns(t){kn=Math.max(0,Math.min(100,t))}function Rs({isMetronomePlaying:t,isPatternPlaying:a,setIsMetronomePlaying:e,setIsPatternPlaying:s}){const r=T.useRef(!1),n=T.useRef(!1),o=T.useRef(t),l=T.useRef(a);T.useEffect(()=>{o.current=t},[t]),T.useEffect(()=>{l.current=a},[a]),T.useEffect(()=>{const f=async()=>{if(document.hidden)r.current=o.current,n.current=l.current,e(!1),s(!1);else try{await vn(),r.current&&e(!0),n.current&&s(!0)}catch(x){console.error("Failed to resume audio context:",x)}};return document.addEventListener("visibilitychange",f),()=>{document.removeEventListener("visibilitychange",f)}},[e,s])}function Ds(){const[t,a]=T.useState(!0),[e,s]=T.useState({loaded:0,total:11,currentName:""}),[r,n]=T.useState(!1),[o,l]=T.useState(!1),f=T.useRef(!1),x=T.useRef(!1),y=T.useRef({loaded:0,total:11});return T.useEffect(()=>{(async()=>{const v=setTimeout(()=>{n(!0),f.current=!0},200);let p=null;const g=()=>{Yt(null),setTimeout(()=>{l(!0),setTimeout(()=>{a(!1)},300)},300)};try{Yt((m,b,S)=>{s({loaded:m,total:b,currentName:S}),y.current={loaded:m,total:b},m===b&&f.current&&!p&&(p=setTimeout(g,0))}),ks();const h=new Promise((m,b)=>{setTimeout(()=>b(new Error("Sample loading timeout")),1e4)});await Promise.race([yn(),h]),vs().catch(()=>{})}catch{}finally{if(clearTimeout(v),x.current=!0,!f.current)Yt(null),l(!0),setTimeout(()=>{a(!1)},300);else if(!p){const{loaded:c,total:h}=y.current;c===h?g():(s(m=>({...m,loaded:m.total})),setTimeout(g,300))}}})()},[]),{isLoading:t,loadingProgress:e,showProgress:r,isFadingOut:o}}const Ls=300,zs=5;function Es(){T.useEffect(()=>{const t={count:0},a={time:0},e=r=>!!(r.closest("button")||r.closest("input")||r.closest("select")||r.closest("a")||r.closest(".bottom-play-button-container")),s=r=>{const n=r.target;if(e(n))return;const o=Date.now();o-a.time>Ls&&(t.count=0),t.count++,a.time=o,t.count>=zs&&(window.dispatchEvent(new CustomEvent("show-version")),t.count=0)};return document.body.addEventListener("pointerdown",s,{passive:!0}),()=>{document.body.removeEventListener("pointerdown",s)}},[])}function Ms(){const[t,a]=T.useState(!1),[e,s]=T.useState(!1),r=T.useCallback(()=>{a(l=>{const f=!l;return f&&s(!1),f})},[]),n=T.useCallback(()=>{s(l=>{const f=!l;return f&&a(!1),f})},[]),o=T.useCallback(()=>{a(!1),s(!1)},[]);return{isMetronomePlaying:t,isPatternPlaying:e,toggleMetronomePlay:r,togglePatternPlay:n,stopAll:o,setIsMetronomePlaying:a,setIsPatternPlaying:s}}const Os="drummer-bgm-files",Us=1,Ne="bgm-files",Pn="drummer-bgm-config",_n="drummer-master-volume",jn=100;function Vs(){return`bgm-${Date.now()}-${Math.random().toString(36).slice(2,10)}`}async function wt(){return new Promise((t,a)=>{const e=indexedDB.open(Os,Us);e.onerror=()=>a(e.error),e.onsuccess=()=>t(e.result),e.onupgradeneeded=s=>{const r=s.target.result;r.objectStoreNames.contains(Ne)||r.createObjectStore(Ne,{keyPath:"id"})}})}async function An(t){const a=await wt(),e=a.transaction(Ne,"readwrite"),s=e.objectStore(Ne),r=Vs(),n={id:r,blob:t,name:t.name,size:t.size,type:t.type,createdAt:Date.now()};try{return await new Promise((o,l)=>{e.oncomplete=()=>o(),e.onerror=()=>l(e.error),e.onabort=()=>l(new Error("Transaction aborted"));const f=s.put(n);f.onerror=()=>l(f.error)}),await new Promise(o=>setTimeout(o,50)),a.close(),{id:r,meta:{name:n.name,size:n.size,type:n.type}}}catch(o){throw a.close(),o}}async function In(t){const a=await wt(),s=a.transaction(Ne,"readonly").objectStore(Ne),r=await new Promise((n,o)=>{const l=s.get(t);l.onsuccess=()=>n(l.result??null),l.onerror=()=>o(l.error)});return a.close(),r}async function Jt(t){const a=await wt(),e=a.transaction(Ne,"readwrite"),s=e.objectStore(Ne);await new Promise((r,n)=>{e.oncomplete=()=>r(),e.onerror=()=>n(e.error);const o=s.delete(t);o.onerror=()=>n(o.error)}),a.close()}async function Hs(){const t=await wt(),e=t.transaction(Ne,"readonly").objectStore(Ne),s=await new Promise((r,n)=>{const o=e.getAll();o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)});return t.close(),s}async function Fs(){const t=await wt(),a=t.transaction(Ne,"readwrite"),e=a.objectStore(Ne);await new Promise((s,r)=>{a.oncomplete=()=>s(),a.onerror=()=>r(a.error);const n=e.clear();n.onerror=()=>r(n.error)}),t.close()}async function Nn(t,a,e){const s=atob(t),r=new Uint8Array(s.length);for(let l=0;l<s.length;l++)r[l]=s.charCodeAt(l);const n=new Blob([r],{type:e}),o=new File([n],a,{type:e,lastModified:Date.now()});return An(o)}function fa(){const t=localStorage.getItem(Pn);if(!t)return{};try{const a=JSON.parse(t);if(a&&typeof a=="object")return a}catch{}return{}}function Rn(t){localStorage.setItem(Pn,JSON.stringify(t))}function dt(t){const e=fa()[t];return{fileId:e==null?void 0:e.fileId,offsetMs:(e==null?void 0:e.offsetMs)??0,volumePct:(e==null?void 0:e.volumePct)??jn,meta:e==null?void 0:e.meta}}function at(t,a){const e=fa();e[t]={fileId:a.fileId,offsetMs:a.offsetMs??0,volumePct:a.volumePct??jn,meta:a.meta},Rn(e)}function Da(t){const a=fa();delete a[t],Rn(a)}const La=0;function Gs(){const t=localStorage.getItem(_n);if(!t)return La;try{const a=JSON.parse(t);if(typeof a=="number"&&a>=0&&a<=100)return a}catch{}return La}function Ws(t){const a=Math.max(0,Math.min(100,t));localStorage.setItem(_n,JSON.stringify(a))}function Xt(t,a){var n;const e=a.timeSignature[0],s=a.timeSignature[1];let r=0;for(let o=0;o<t;o++){const x=60/(((n=a.barBpmOverrides)==null?void 0:n[o])??a.bpm)*(4/s)*e;r+=x}return r}function Ks({isPlaying:t,isFullPracticeMode:a,playbackRate:e,bgmConfig:s,currentSubdivision:r,pattern:n,patternStartToken:o,rangeStartBar:l}){const f=n.timeSignature[0],x=n.timeSignature[1],y=T.useRef(null),k=T.useRef(void 0),[v,p]=T.useState({isLoading:!1,isLoaded:!1,error:null}),g=T.useRef(e);g.current=e;const c=T.useRef(0),h=T.useRef(null),m=T.useRef(0),b=T.useCallback(()=>{var Q;const w=y.current;if(!w)return;const D=Te().currentTime,R=(s.offsetMs??0)/1e3,I=Math.max(.1,g.current),N=c.current,H=Xt(l,n),L=N/g.current+H-R,d=L/I,U=L<0?Math.abs(L):0,M=D+U,V=Math.max(0,d);let K=V;if(((Q=w.buffer)==null?void 0:Q.duration)!==void 0){const j=Math.max(0,w.buffer.duration-.001);K=Math.min(j,V)}w.state==="started"&&w.stop();const F=Math.max(M,m.current+.001);m.current=F,w.start(F,K)},[s.offsetMs,n,l]);T.useEffect(()=>{let w=!1;return(async()=>{if(!s.fileId){k.current=void 0,y.current&&(y.current.stop(),y.current.dispose(),y.current=null),p({isLoading:!1,isLoaded:!1,error:null});return}if(!(s.fileId===k.current&&y.current)){p({isLoading:!0,isLoaded:!1,error:null});try{const D=await In(s.fileId);if(!D)throw new Error("Background music file not found");const R=Te(),I=await D.blob.arrayBuffer(),N=await R.decodeAudioData(I.slice(0));if(w)return;y.current&&(y.current.stop(),y.current.dispose());const H=new hr(N).toDestination();H.loop=!1,H.playbackRate=Math.max(.1,g.current),H.grainSize=.2,H.overlap=.02;const E=Math.max(0,Math.min(100,s.volumePct??100)),B=Math.max(1e-4,E/100);H.volume.value=wa(B),y.current=H,k.current=s.fileId,p({isLoading:!1,isLoaded:!0,error:null})}catch(D){w||p({isLoading:!1,isLoaded:!1,error:D instanceof Error?D.message:"Failed to load background music"})}}})(),()=>{w=!0}},[s.fileId,s.volumePct]),T.useEffect(()=>{var L;const w=f*fe,_=Math.floor(r/w),D=r%w,R=Xt(_,n),E=60/((((L=n.barBpmOverrides)==null?void 0:L[_])??n.bpm)*e)*(4/x)/fe,B=Xt(l,n);c.current=R+D*E-B},[r,n,x,e,l,f]),T.useEffect(()=>{const w=y.current;w&&(w.playbackRate=Math.max(.1,e))},[e]),T.useEffect(()=>{const w=y.current;if(!w)return;const _=Math.max(0,Math.min(100,s.volumePct??100)),D=Math.max(1e-4,_/100);w.volume.value=wa(D)},[s.volumePct]);const S=T.useRef(s.offsetMs??0);return T.useEffect(()=>{if(!y.current||!t||!a||!s.fileId||!v.isLoaded){S.current=s.offsetMs??0;return}const _=S.current;S.current=s.offsetMs??0,_!==(s.offsetMs??0)&&b()},[s.offsetMs,t,a,v.isLoaded,s.fileId,b]),T.useEffect(()=>{const w=y.current;if(!w)return;if(!a||!s.fileId){w.state==="started"&&w.stop();return}if(!t){w.state==="started"&&w.stop();return}const _=Te();_.state==="suspended"&&_.resume().catch(()=>{}),b()},[t,a,s.fileId,s.offsetMs,v.isLoaded,o,b]),T.useEffect(()=>{if(!t||!a||!s.fileId||!v.isLoaded){h.current=r;return}const w=h.current;h.current=r,w!==null&&r<w&&b()},[r,t,a,s.fileId,v.isLoaded,b]),T.useEffect(()=>{h.current=r},[r]),T.useEffect(()=>()=>{y.current&&(y.current.stop(),y.current.dispose(),y.current=null)},[]),v}let It=null;async function Dn(){if("wakeLock"in navigator)try{It=await navigator.wakeLock.request("screen")}catch{}}async function sa(){if(It!==null)try{await It.release(),It=null}catch{}}let za=0;const $s=16;function Ln({bpm:t,timeSignature:a,isPlaying:e,onBeatChange:s,resetToken:r}){const[n,o]=T.useState(0),[l,f]=T.useState(0),x=T.useRef(t),y=T.useRef(a),k=T.useRef(s);x.current=t,y.current=a,k.current=s;const v=T.useRef(0),p=T.useRef(0),g=T.useRef(null),c=T.useRef(!1),h=T.useRef(new Set),m=T.useCallback(()=>{const w=Te();if(!c.current)return;const _=x.current,D=y.current,R=D[0],I=D[1],H=60/_*(4/I)/fe,E=R*fe,B=w.currentTime,L=.1;for(;v.current<B+L;){const d=p.current,U=Math.floor(d/fe),M=Math.max(v.current,B),V=(M-B)*1e3;if(d%fe===0){U===0?ws(M):xs(M);const j=k.current;if(j){const A=window.setTimeout(()=>j(U),V);h.current.add(A)}}const K=d,F=U,Q=window.setTimeout(()=>{h.current.delete(Q),Date.now()-za>=$s?requestAnimationFrame(()=>{za=Date.now(),c.current&&(f(K),o(F))}):c.current&&(f(K),o(F))},Math.max(0,V));h.current.add(Q),p.current=(p.current+1)%E,v.current+=H}},[]),b=T.useCallback(async()=>{const w=Te();if(c.current)return;w.state==="suspended"&&await w.resume(),await new Promise(D=>requestAnimationFrame(D)),Dn(),c.current=!0;const _=w.currentTime;v.current=_,m(),g.current=window.setInterval(m,25)},[m]),S=T.useCallback(()=>{c.current=!1,g.current!==null&&(clearInterval(g.current),g.current=null),h.current.forEach(w=>{clearTimeout(w)}),h.current.clear(),sa()},[]);return T.useEffect(()=>(e?b():S(),()=>{S()}),[e,b,S]),T.useEffect(()=>{if(e&&c.current){const w=Te();v.current=w.currentTime}},[t,a,e]),T.useEffect(()=>{if(p.current=0,f(0),o(0),h.current.forEach(w=>{clearTimeout(w)}),h.current.clear(),e&&c.current){const w=Te();v.current=w.currentTime}},[r,e]),{currentBeat:n,currentSubdivision:l}}function qs({bpm:t,onChange:a,min:e=40,max:s=200,disabled:r=!1}){const n=T.useRef(null),[o,l]=T.useState(!1),[f,x]=T.useState(null),y=T.useCallback(w=>(w-e)/(s-e)*100,[e,s]),k=T.useCallback(w=>{const _=e+w/100*(s-e);return Math.round(_/5)*5},[e,s]),v=T.useCallback(w=>{if(!n.current)return;const _=n.current.getBoundingClientRect(),D=Math.max(0,Math.min(100,(w-_.left)/_.width*100)),R=k(D),I=Math.max(e,Math.min(s,R));a(I)},[k,e,s,a]),p=T.useCallback(w=>{r||(l(!0),v(w.clientX),w.target.setPointerCapture(w.pointerId))},[r,v]),g=T.useCallback(w=>{o&&v(w.clientX)},[o,v]),c=T.useCallback(()=>{l(!1)},[]);T.useEffect(()=>{if(o)return window.addEventListener("pointermove",g),window.addEventListener("pointerup",c),()=>{window.removeEventListener("pointermove",g),window.removeEventListener("pointerup",c)}},[o,g,c]),T.useEffect(()=>{const w=()=>{if(n.current){const _=n.current.getBoundingClientRect();x(_.width)}};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const h=y(t),m=Math.max(0,h),b=20,S=f?m*(f-b)/f:m;return i.jsx("div",{className:"bpm-slider-container",children:i.jsxs("div",{ref:n,className:`bpm-slider-track ${r?"bpm-slider-disabled":""}`,onPointerDown:p,children:[i.jsx("div",{className:"bpm-slider-fill",style:{width:`calc(${S}% + ${b/2}px)`}}),i.jsx("div",{className:"bpm-slider-thumb",style:{left:`calc((100% - ${b}px) * ${m/100})`}})]})})}function Zs({currentBeat:t,beatsPerBar:a}){return i.jsx("div",{className:"beat-dots",children:Array.from({length:a},(e,s)=>i.jsx("div",{className:`beat-dot ${s===t?"active":""}`},s))})}function Ys({isPlaying:t,onClick:a,loopCount:e=0,onResetCount:s}){const r=T.useRef(null),n=T.useRef(!1),o=T.useRef(0),l=500,f=()=>{s&&(n.current=!1,r.current=window.setTimeout(()=>{s(),n.current=!0,r.current=null},l))},x=()=>{r.current&&(clearTimeout(r.current),r.current=null)},y=()=>{r.current&&(clearTimeout(r.current),r.current=null)},k=()=>{s&&(o.current=Date.now(),n.current=!1,r.current=window.setTimeout(()=>{s(),n.current=!0,r.current=null},l))},v=c=>{r.current&&(clearTimeout(r.current),r.current=null),n.current&&(c.preventDefault(),setTimeout(()=>{n.current=!1},100))},p=c=>{if(n.current){c.preventDefault(),c.stopPropagation(),n.current=!1;return}a()},g=e>0;return i.jsx("button",{className:"play-button"+(t?" playing":" paused"),onClick:p,onMouseDown:f,onMouseUp:x,onMouseLeave:y,onTouchStart:k,onTouchEnd:v,"aria-label":t?"Pause":"Play",children:g?i.jsx("span",{className:"play-button-count",children:e}):t?i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}):i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"play-icon",children:i.jsx("polygon",{points:"6 3 18 12 6 21"})})})}function Ae(t,a={}){const{delay:e=500,interval:s=100,shouldStop:r,clickCallback:n}=a,o=T.useRef(null),l=T.useRef(null),f=T.useRef(!1),x=T.useRef(0),y=T.useRef(!1),k=T.useRef(t);k.current=t;const v=T.useCallback(()=>{f.current=!1,o.current&&(clearTimeout(o.current),o.current=null),l.current&&(clearInterval(l.current),l.current=null)},[]),p=T.useCallback(()=>{f.current||(f.current=!0,x.current=Date.now(),y.current=!1,o.current=setTimeout(()=>{if(f.current){if(r!=null&&r()){v();return}y.current=!0,k.current(),l.current=setInterval(()=>{if(f.current){if(r!=null&&r()){v();return}k.current()}},s)}},e))},[e,s,r,v]),g=T.useCallback(()=>{const D=Date.now()-x.current;!y.current&&D<e&&(n?n():k.current())},[e,n]),c=T.useCallback(()=>{p()},[p]),h=T.useCallback(()=>{v()},[v]),m=T.useCallback(()=>{v()},[v]),b=T.useCallback(D=>{p()},[p]),S=T.useCallback(D=>{v()},[v]),w=T.useCallback(D=>{v()},[v]),_=T.useCallback(D=>{D.preventDefault()},[]);return T.useEffect(()=>()=>{v()},[v]),{onClick:g,onMouseDown:c,onMouseUp:h,onMouseLeave:m,onTouchStart:b,onTouchEnd:S,onTouchCancel:w,onContextMenu:_}}function Js({bpm:t,timeSignature:a,isPlaying:e,resetToken:s,onBPMChange:r,isPatternPlaying:n=!1,isCountInPlaying:o=!1,countInBeat:l,onPatternPlayToggle:f,onTimeSignatureChange:x,rateIndex:y,onRateIndexChange:k,rates:v,rateLabels:p,patternPlayButton:g}){const c=T.useMemo(()=>[[4,4],[3,4],[2,4],[6,8],[5,4],[7,8]],[]),h=T.useCallback(()=>{const j=c.findIndex(A=>A[0]===a[0]&&A[1]===a[1]);return j>=0?j:0},[a,c]),[m,b]=T.useState(()=>{const j=c.findIndex(A=>A[0]===a[0]&&A[1]===a[1]);return j>=0?j:0});T.useEffect(()=>{const j=h();b(j)},[h]);const S=()=>{if(x){const j=(m+1)%c.length,A=c[j];b(j),x(A)}},{currentBeat:w}=Ln({bpm:t,timeSignature:a,isPlaying:n,resetToken:s}),[_,D]=T.useState(0),R=T.useRef(-1);T.useEffect(()=>{const j=a[0];R.current===j-1&&w===0&&D(A=>A+1),R.current=w},[w,a]),T.useEffect(()=>{n||(R.current=-1,D(0))},[n]);const I=()=>{D(0)},N=40,H=200,E=()=>{const j=Math.round(Math.max(N,t-1)*10)/10;r(j)},B=()=>{const j=Math.round(Math.min(H,t+1)*10)/10;r(j)},L=()=>{const j=Math.round(Math.max(N,t-.5)*10)/10;r(j)},d=()=>{const j=Math.round(Math.min(H,t+.5)*10)/10;r(j)},U=Ae(E,{shouldStop:()=>t<=N,clickCallback:L}),M=Ae(B,{shouldStop:()=>t>=H,clickCallback:d}),V=j=>{v.length&&k(j)},K=()=>{V(y+1)},F=()=>{v.length&&V(y+v.length-1)},Q=o&&l!==void 0?l:w;return i.jsxs("div",{className:"metronome-bar",children:[i.jsxs("div",{className:"metronome-row metronome-row-top",children:[i.jsx("div",{className:"beat-indicator-group",onClick:S,children:i.jsx(Zs,{currentBeat:Q,beatsPerBar:a[0]})}),i.jsxs("div",{className:"bpm-control-group",children:[i.jsx("button",{className:"bpm-control-button",...U,disabled:t<=N||!!p[y%p.length],"aria-label":"Decrease BPM",children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),i.jsxs("div",{className:"bpm-display",children:[i.jsxs("span",{className:"bpm-value",children:[i.jsx("span",{className:"bpm-value-clickable bpm-value-clickable-left",onClick:K,"aria-label":"BPM rate next"}),i.jsx("span",{className:"bpm-value-clickable bpm-value-clickable-right",onClick:F,"aria-label":"BPM rate prev"}),(()=>{const j=Math.round(t*10)/10,A=j!==Math.round(t),X=Math.floor(j),Z=A?String(j).split(".")[1]:null;return i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"bpm-value-integer",children:X}),Z&&i.jsxs("span",{className:"bpm-value-decimal",children:[".",Z]})]})})()]}),p[y%p.length]&&i.jsx("span",{className:"bpm-rate-label",children:p[y%p.length]})]}),i.jsx("button",{className:"bpm-control-button",...M,disabled:t>=H||!!p[y%p.length],"aria-label":"Increase BPM",children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),i.jsx("div",{className:"loop-count-group",children:g||f&&i.jsx(Ys,{isPlaying:n,onClick:f,loopCount:_,onResetCount:I})})]}),i.jsx("div",{className:"metronome-row metronome-row-bottom",children:i.jsx(qs,{bpm:t,onChange:r,disabled:!!p[y%p.length]})})]})}function Xs(t,a,e,s){return e+2*s+t*s}function Qs(t){return Cr[t]}const Ye=7,Se=Ye*.707,Ea=.8,Le=10,Lt=18,nt=Lt,pt=5*Lt;function eo({pattern:t,cellSize:a,currentBeat:e,scrollContainerRef:s,onDoubleClick:r}){const n=T.useRef(null),o=T.useRef(null),l=a,f=I=>{if(!r)return;const N=n.current;if(!N)return;const H=N.getBoundingClientRect(),E=I.clientX-H.left,B=Math.floor(E/l);r(B)},x=T.useRef(null),y=300,k=30,v=I=>{if(!r)return;const N=n.current;if(!N)return;const H=I.touches[0],E=Date.now(),B=N.getBoundingClientRect(),L=H.clientX-B.left;if(x.current){const{time:d,x:U}=x.current,M=E-d,V=Math.abs(L-U);if(M<y&&V<k){const K=Math.floor(L/l);r(K),x.current=null;return}}x.current={time:E,x:L}},p=I=>getComputedStyle(document.documentElement).getPropertyValue(I).trim(),g=p("--color-text"),c=p("--color-text-tertiary"),h=p("--color-beat-line"),m=p("--color-warning"),[b]=t.timeSignature,w=t.bars*b*fe*l,_=pt+nt,D=Array.from({length:t.bars+1},(I,N)=>({x:N*b*fe*l,isFirst:N===0,isLast:N===t.bars})),R=Array.from({length:t.bars*b+1},(I,N)=>({x:N*fe*l}));return i.jsx("div",{className:"drum-notation-container",ref:o,children:i.jsxs("svg",{ref:n,className:"drum-notation-svg",viewBox:`0 0 ${w} ${_}`,width:w,height:_,preserveAspectRatio:"none",onDoubleClick:f,onTouchStart:v,children:[i.jsx("line",{x1:0,y1:0,x2:w,y2:0,stroke:g,strokeWidth:2,opacity:.8}),Array.from({length:6},(I,N)=>{const H=nt+N*Lt,E=N===0;return i.jsx("line",{x1:0,y1:H,x2:w,y2:H,stroke:g,strokeWidth:N===5?2:1,opacity:.8,strokeDasharray:E?"4,4":"0"},`staff-line-${N}`)}),D.map((I,N)=>i.jsx("line",{x1:I.x,y1:0,x2:I.x,y2:nt+pt,stroke:I.isFirst||I.isLast?g:c,strokeWidth:I.isFirst||I.isLast?3:2,strokeDasharray:I.isFirst||I.isLast?"0":"4,4",opacity:I.isFirst||I.isLast?1:.6},`bar-line-${N}`)),R.map((I,N)=>N%b===0?null:i.jsx("line",{x1:I.x,y1:0,x2:I.x,y2:nt+pt,stroke:h,strokeWidth:1,opacity:.4},`beat-line-${N}`)),e!==void 0&&e>=0&&i.jsx("rect",{x:e*l,y:0,width:l,height:nt+pt,fill:m,opacity:.4}),t.grid.map((I,N)=>{const H=t.drums[N],E=Qs(H),B=Xs(E.line,pt,nt,Lt);return I.map((L,d)=>{if(!L)return null;const U=d*l+l/2,M=E.symbol,V=`symbol-${N}-${d}`,K=L===De,F=L===Ke,Q=L===ze,j=L===Ve,A=L===He,X=l*.22,Z=Q||j||A?[...Q||j?[U-X]:[],...Q||A?[U+X]:[]]:[U],$=re=>{const W=[],le=re-Ye-Ea,oe=re+Ye+Ea,de=B-Le/2,he=B+Le/2,ve=B-Le/2,u=B+Le/2;return K?(W.push(i.jsx("path",{d:`M ${le} ${de}
                        A ${Le} ${Le} 0 0 0 ${le} ${he}`,fill:"none",stroke:g,strokeWidth:1.5,strokeLinecap:"round"},`left-bracket-${re}`)),W.push(i.jsx("path",{d:`M ${oe} ${ve}
                        A ${Le} ${Le} 0 0 1 ${oe} ${u}`,fill:"none",stroke:g,strokeWidth:1.5,strokeLinecap:"round"},`right-bracket-${re}`))):F&&W.push(i.jsx("path",{d:`M ${le} ${de}
                        A ${Le} ${Le} 0 0 0 ${le} ${he}`,fill:"none",stroke:g,strokeWidth:1.5,strokeLinecap:"round"},`left-bracket-${re}`)),W},ee=re=>{if(H==="Crash 1"||H==="Crash 2")return i.jsxs("g",{children:[i.jsx("circle",{cx:re,cy:B,r:Ye,fill:"none",stroke:g,strokeWidth:2}),i.jsx("line",{x1:re-Se,y1:B-Se,x2:re+Se,y2:B+Se,stroke:g,strokeWidth:2,strokeLinecap:"round"}),i.jsx("line",{x1:re+Se,y1:B-Se,x2:re-Se,y2:B+Se,stroke:g,strokeWidth:2,strokeLinecap:"round"}),$(re)]},`${V}-${re}`);let W=null;switch(M){case"x":W=i.jsxs("g",{children:[i.jsx("line",{x1:re-Se,y1:B-Se,x2:re+Se,y2:B+Se,stroke:g,strokeWidth:2,strokeLinecap:"round"}),i.jsx("line",{x1:re+Se,y1:B-Se,x2:re-Se,y2:B+Se,stroke:g,strokeWidth:2,strokeLinecap:"round"})]});break;case"o":W=i.jsx("circle",{cx:re,cy:B,r:Ye,fill:"none",stroke:g,strokeWidth:2});break;case"●":W=i.jsx("circle",{cx:re,cy:B,r:Ye,fill:g});break;case"○":W=i.jsx("circle",{cx:re,cy:B,r:Ye,fill:"none",stroke:g,strokeWidth:2});break;default:return null}return i.jsxs("g",{children:[W,$(re)]},`${V}-${re}`)};return Z.map(re=>ee(re))})})]})})}const to=[{base:1,dots:0,units32:32},{base:2,dots:1,units32:24},{base:2,dots:0,units32:16},{base:4,dots:1,units32:12},{base:4,dots:0,units32:8},{base:8,dots:1,units32:6},{base:8,dots:0,units32:4},{base:16,dots:1,units32:3},{base:16,dots:0,units32:2},{base:32,dots:0,units32:1}],ao=[{base:4,dots:0,units32:8},{base:8,dots:0,units32:4},{base:16,dots:0,units32:2},{base:32,dots:0,units32:1}];function no(t){if(!Number.isFinite(t)||t<=0)throw new Error(`gapUnits32 must be > 0, got: ${t}`);const a=to.find(e=>e.units32<=t);return a||{base:32,dots:0,units32:1}}function Tt(t){if(!Number.isFinite(t)||t<0)throw new Error(`gapUnits32 must be >= 0, got: ${t}`);const a=[];let e=t;for(;e>0;){const s=ao.find(r=>r.units32<=e);if(!s)break;a.push(s),e-=s.units32}return a}const gt={"Crash 1":{keys:["b/5/x"],isLowerVoice:!1},"Crash 2":{keys:["a/5/x"],isLowerVoice:!1},"Hi-Hat Open":{keys:["g/5/x"],isLowerVoice:!1},"Hi-Hat Closed":{keys:["g/5/x"],isLowerVoice:!1},Ride:{keys:["f/5/x"],isLowerVoice:!1},"Tom 1":{keys:["e/5"],isLowerVoice:!1},"Tom 2":{keys:["d/5"],isLowerVoice:!1},Snare:{keys:["c/5"],isLowerVoice:!1},"Tom 3":{keys:["a/4"],isLowerVoice:!1},Kick:{keys:["f/4"],isLowerVoice:!0}};function ro(t){const a=[],e=[],[s]=t.timeSignature,r=t.bars*s*fe;for(let n=0;n<r;n++){const o=()=>({0:{normal:[],ghost:[],grace:[]},1:{normal:[],ghost:[],grace:[]}}),l=o(),f=o();let x=!1,y=!1;t.drums.forEach((v,p)=>{var m;const g=((m=t.grid[p])==null?void 0:m[n])??Pe;if(g===Pe)return;const c=gt[v].isLowerVoice?f:l,h=(b,S)=>{c[S][b].push({drum:v,cellState:g})};g===ze?(h("normal",0),h("normal",1),gt[v].isLowerVoice?y=!0:x=!0):g===Ve?(h("normal",0),gt[v].isLowerVoice?y=!0:x=!0):g===He?(h("normal",1),gt[v].isLowerVoice?y=!0:x=!0):g===Ke?(h("normal",0),h("grace",0)):h(g===De?"ghost":"normal",0)});const k=(v,p,g,c)=>{const h=p[g],m=[...h.normal.map(b=>({...b,kind:"normal"})),...h.ghost.map(b=>({...b,kind:"ghost"}))];if(m.length>0){const S=m.every(w=>w.kind==="ghost")?"ghost":"normal";v.push({subdivision:n,subPosition:g,drums:m,is32nd:c,kind:S,graceDrums:h.grace.length>0?[...h.grace]:void 0})}};k(a,l,0,x),k(a,l,1,!0),k(e,f,0,y),k(e,f,1,!0)}return{upperVoice:a,lowerVoice:e}}function io(t,a,e={}){const s=e.includeFullBarRestWhenEmpty??!1,r=e.omitTailRests??!0,n=e.maxSpanBarFraction??.25,o=a*2,l=n===.25?o/4:o,f=[...t].sort((p,g)=>p.subdivision!==g.subdivision?p.subdivision-g.subdivision:p.subPosition-g.subPosition),x=p=>p.subdivision*2+p.subPosition,y=[];let k=0;const v=p=>{if(l<=0)return 1;const g=p%l;return g===0?l:l-g};if(f.length===0){if(!s)return y;const p=Tt(o);for(const g of p)y.push({kind:"rest",startUnits32InBar:k,durationToken:g,durationUnits32:g.units32}),k+=g.units32;return y}for(let p=0;p<f.length;p++){const g=f[p],c=x(g),h=p+1<f.length?x(f[p+1]):o;if(c>k){const D=c-k,R=Tt(D);for(const I of R)y.push({kind:"rest",startUnits32InBar:k,durationToken:I,durationUnits32:I.units32}),k+=I.units32}k=Math.max(k,c);const m=Math.max(1,h-c),b=v(c),S=Math.max(1,Math.min(m,b)),w=no(S);y.push({kind:"note",event:g,startUnits32InBar:c,durationToken:w,durationUnits32:w.units32}),k=c+w.units32;const _=p+1>=f.length;if(!_&&k<h){const D=h-k,R=Tt(D);for(const I of R)y.push({kind:"rest",startUnits32InBar:k,durationToken:I,durationUnits32:I.units32}),k+=I.units32}if(_&&!r&&k<o){const D=o-k,R=Tt(D);for(const I of R)y.push({kind:"rest",startUnits32InBar:k,durationToken:I,durationUnits32:I.units32}),k+=I.units32}}return y}function so(t){var s;const a=t,e=(s=a.getXShift)==null?void 0:s.call(a);return typeof e=="number"?e:typeof a.x_shift=="number"?a.x_shift:0}function zn(t){const a=gr;typeof a.buildAndAttach=="function"&&a.buildAndAttach([t],{all:!0})}function oo(t,a,e,s,r,n){const o=t-s;if(n){if(n===4)return(o+1.5)*e+e/2;if(n===8)return(o+.5)*e+e/2}const l=o*e+e/2;if(!r)return l;const f=e*.22;return a===0?l-f:l+f}function lo(t,a){if(!a.includes("Hi-Hat Open"))return;const e=new it("○");e.setVerticalJustification(it.VerticalJustify.TOP),e.setJustification(it.HorizontalJustify.CENTER_STEM),e.setFont("",5,900),e.setXShift(-11),e.setYShift(36),t.addModifier(e,0)}function co(t){return{"Crash 1":-85,"Crash 2":-80,"Hi-Hat Open":-75,"Hi-Hat Closed":-75,Ride:-70,"Tom 1":-65,"Tom 2":-60,Snare:-55,"Tom 3":-45,Kick:-55}[t]??-55}function uo(t,a){if(!a||a.length===0)return;const e=a[0].drum,s=co(e),r=new it("♪");r.setVerticalJustification(it.VerticalJustify.BOTTOM),r.setJustification(it.HorizontalJustify.CENTER_STEM),r.setFont("",15,"normal"),r.setXShift(e==="Kick"?0:10),r.setYShift(s),t.addModifier(r,0)}function po(t,a,e){const s=[];let r;for(const{drum:f}of t.drums){const x=gt[f];s.push(...x.keys),r=x.keys.some(y=>y.includes("x"))}const n={keys:s,duration:String(e.base),clef:"percussion",stemDirection:a?-1:1},o=new tn(n);e.dots===1&&zn(o);const l=t.drums.filter(f=>f.kind==="ghost").map(f=>f.drum);if(l.length>0&&(o._ghostDrums=l),r&&!a){const f=o.getStem();f&&f.setOptions({stemUpYOffset:4})}return lo(o,t.drums.map(f=>f.drum)),uo(o,t.graceDrums),o}function fo(t,a){const e=`${t.base}r`,s=a?["f/4"]:["c/5"],r=new tn({keys:s,duration:e,clef:"percussion",stemDirection:a?-1:1});return t.dots===1&&zn(r),r}function Ma(t,a,e){const s=io(t,a,{includeFullBarRestWhenEmpty:!0,omitTailRests:!1,maxSpanBarFraction:.25});return s.some(n=>n.kind==="note")?s.map(n=>{if(n.kind==="note")return{note:po(n.event,e,n.durationToken),event:n.event,isRest:!1,startUnits32InBar:n.startUnits32InBar,durationUnits32:n.durationUnits32};const o=n.startUnits32InBar,l={subdivision:Math.floor(o/2),subPosition:o%2,drums:[],is32nd:o%2===1,kind:"normal"};return{note:fo(n.durationToken,e),event:l,isRest:!0,startUnits32InBar:n.startUnits32InBar,durationUnits32:n.durationUnits32}}):[]}function mo(t,a){const e=a*2,s=Math.floor(e/2);let r=!1,n=!1;for(const o of t){if(o.isRest)continue;const l=o.note.getDuration();Number.parseInt(l.replace(/[rd]/g,""),10)>=16&&((o.startUnits32InBar??o.event.subdivision*2+o.event.subPosition)<s?r=!0:n=!0)}return[r,n]}function ho(t,a){const e=a*2,s=Math.floor(e/2),r=[],n=[];for(const o of t)(o.startUnits32InBar??o.event.subdivision*2+o.event.subPosition)<s?r.push(o):n.push(o);return[r,n]}function go(t,a,e){return(t+a/2)/2*e-e/4*1.2}function bo(t,a,e){const s=a*2,r=Math.floor(s/e),n=Array.from({length:e},()=>[]);for(const o of t){const l=o.startUnits32InBar??o.event.subdivision*2+o.event.subPosition,f=Math.floor(l/r);f>=0&&f<e&&n[f].push(o)}return n.filter(o=>o.length>0)}const Nt=130,ko=40,vo=35,yo=(Nt-ko)/2-vo;function wo({pattern:t,cellSize:a,currentBeat:e,scrollContainerRef:s,onDoubleClick:r}){const n=T.useRef(null),o=a,l=T.useRef(null),f=300,x=30,[y]=t.timeSignature,k=t.bars*y*fe,v=k*o,p=y*fe*o,[g,c]=T.useState([]),h=1,m=T.useCallback(()=>{if(!s||!s.current||!n.current)return;const D=s.current,R=n.current,I=D.getBoundingClientRect(),N=R.getBoundingClientRect(),H=I.left-N.left,E=H+I.width,B=Math.max(0,Math.floor(H/p)),L=Math.min(t.bars-1,Math.ceil(E/p)),d=[],U=Math.max(0,B-h),M=Math.min(t.bars-1,L+h);for(let V=U;V<=M;V++)d.push(V);c(d)},[s,p,t.bars]);T.useEffect(()=>{m();const D=s==null?void 0:s.current;if(!D)return;const R=()=>{requestAnimationFrame(m)};return D.addEventListener("scroll",R,{passive:!0}),window.addEventListener("resize",m),()=>{D.removeEventListener("scroll",R),window.removeEventListener("resize",m)}},[s,m]);const b=T.useMemo(()=>new Set(g),[g]),S=T.useCallback(D=>{const R=n.current;if(!R)return 0;const I=R.getBoundingClientRect(),N=D-I.left;return Math.floor(N/o)},[o]),w=T.useCallback(D=>{if(!r)return;const R=S(D.clientX);r(R)},[r,S]),_=T.useCallback(D=>{if(!r)return;const R=D.touches[0],I=Date.now(),N=R.clientX;if(l.current){const{time:H,x:E}=l.current,B=I-H,L=Math.abs(N-E);if(B<f&&L<x){const d=S(N);r(d),l.current=null;return}}l.current={time:I,x:N}},[r,S]);return T.useEffect(()=>{var H,E;const D=n.current;if(!D)return;D.innerHTML="";const R=new xa(D,xa.Backends.SVG);R.resize(v,Nt);const I=R.getContext();for(let B=0;B<t.bars;B++){if(!b.has(B))continue;const L=B*p,d=new br(L,yo,p);d.setContext(I),B===t.bars-1&&d.setEndBarType(kr.type.END),d.draw();const{upperVoice:U,lowerVoice:M}=ro(t),V=B*y*fe,K=(B+1)*y*fe,F=U.filter(ee=>ee.subdivision>=V&&ee.subdivision<K),Q=M.filter(ee=>ee.subdivision>=V&&ee.subdivision<K),j=y*fe,A=Ma(F.map(ee=>({...ee,subdivision:ee.subdivision-V})),j,!1).map(ee=>({...ee,event:{...ee.event,subdivision:ee.event.subdivision+V}})),X=Ma(Q.map(ee=>({...ee,subdivision:ee.subdivision-V})),j,!0).map(ee=>({...ee,event:{...ee.event,subdivision:ee.event.subdivision+V}})),Z=A,$=X;if(Z.length>0||$.length>0){const ee=[],re=[...Z,...$];if(Z.length>0){const oe=new Ba({numBeats:y,beatValue:4}).setStrict(!1);oe.addTickables(Z.map(de=>de.note)),ee.push(oe)}if($.length>0){const oe=new Ba({numBeats:y,beatValue:4}).setStrict(!1);oe.addTickables($.map(de=>de.note)),ee.push(oe)}ee.length>0&&new vr().joinVoices(ee).format(ee,p-20);for(const oe of re){const{note:de,event:he,isRest:ve,startUnits32InBar:u,durationUnits32:q}=oe;let G;ve&&u!==void 0&&q?G=go(u,q,o):G=oo(he.subdivision,he.subPosition,o,V,he.is32nd)-o/4,de.setStave(d);const P=d.getX()+G,C=de.getAbsoluteX(),z=P-C;de.setXShift(so(de)+z)}const W=[],le=[{notes:Z,stemDirection:1},{notes:$,stemDirection:-1}];for(const{notes:oe,stemDirection:de}of le){const he=oe.filter(C=>{const z=C.note.getDuration(),Y=Number.parseInt(z.replace(/[rd]/g,""),10);return Number.isFinite(Y)&&Y>=8});if(he.length===0)continue;const[ve,u]=mo(he,j),[q,G]=ho(he,j),P=[{notes:q,hasSixteenth:ve},{notes:G,hasSixteenth:u}];for(const{notes:C,hasSixteenth:z}of P)if(C.length!==0)if(z){const Y=bo(C,j,y);for(const J of Y){if(J.length===0)continue;const O=Sa.generateBeams(J.map(te=>te.note),{stemDirection:de,flatBeams:!0,groups:[new Ta(1,4)]});W.push(...O)}}else{const Y=Sa.generateBeams(C.map(J=>J.note),{stemDirection:de,flatBeams:!0,groups:[new Ta(1,2)]});W.push(...Y)}}ee.forEach(oe=>oe.draw(I,d)),W.forEach(oe=>oe.setContext(I).draw());for(const oe of re){const de=oe.note;if(de._ghostDrums&&de._ghostDrums.length>0&&de.noteHeads){const he=new Set(de._ghostDrums),ve=oe.event.drums.map(u=>u.drum);for(let u=0;u<de.noteHeads.length;u++){const q=de.noteHeads[u];if(!q)continue;const G=ve[u];if(!G||!he.has(G))continue;const P=((H=q.getSVGElement)==null?void 0:H.call(q))??q.el;if(P){const C=(E=P.getBBox)==null?void 0:E.call(P);if(C){const z=C.x+C.width/2,Y=C.y+C.height/2;P.setAttribute("transform",`translate(${z}, ${Y}) scale(0.75) translate(${-z+(G==="Kick"?-2:2)}, ${-Y})`)}}}}}}}const N=D.querySelector("svg");if(N&&(N.querySelectorAll(".vf-stave").forEach(d=>{d.setAttribute("stroke","#aaa")}),N.querySelectorAll(".vf-stavebarline").forEach(d=>{d.querySelectorAll("rect").forEach(M=>{M.setAttribute("stroke","transparent"),M.setAttribute("fill","#333")})})),e!==void 0&&e>=0){const B=D.querySelector("svg");if(B){const L=document.createElementNS("http://www.w3.org/2000/svg","rect");L.setAttribute("x",String(e*o)),L.setAttribute("y","0"),L.setAttribute("width",String(o)),L.setAttribute("height",String(Nt)),L.setAttribute("fill","#fbbf24"),L.setAttribute("opacity","0.3"),L.setAttribute("stroke","transparent"),B.insertBefore(L,B.firstChild)}}},[t,e,o,v,y,k,p,b]),i.jsx(i.Fragment,{children:i.jsx("div",{className:"drum-notation-container vexflow-renderer",ref:n,onDoubleClick:w,onTouchStart:_,style:{width:v,height:Nt,backgroundColor:"#ffffff"}})})}const Oa="drummer-renderer-change";function xo(t){const[a,e]=T.useState(()=>Ra()),[s,r]=T.useState(!1);T.useEffect(()=>{const l=()=>{e(Ra()),r(!1)};return window.addEventListener(Oa,l),()=>{window.removeEventListener(Oa,l)}},[]);const n=T.useCallback(()=>{console.error("VexFlow rendering failed, falling back to Legacy renderer"),r(!0)},[]);return T.useMemo(()=>a==="vexflow"&&!s,[a,s])?i.jsx(Bo,{onError:n,children:i.jsx(wo,{...t})}):i.jsx(eo,{...t})}class Bo extends T.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(a,e){console.error("VexFlow rendering error:",a,e),this.props.onError()}render(){return this.state.hasError?null:this.props.children}}const Ua=300,Va=200,So=30;function To({cellState:t,onClick:a,onToggleGhost:e,onDoubleClick:s,isCurrentBeat:r,drumType:n,subdivisionIndex:o=0,style:l}){const f=T.useRef(0),x=100,y=T.useRef(0),k=T.useRef(null),v=T.useRef(null),p=T.useRef(!1),g=T.useRef(0),c=T.useRef(!1),h=T.useRef(null),[m,b]=T.useState(!1),S=t!==Pe,w=t===De,_=t===Ke,D=t===ze,R=t===Ve,I=t===He,N=D||R||I,H=Math.floor(o/4)%2===1,E=T.useCallback(()=>{const U=Date.now();U-f.current<x||(f.current=U,n&&!S&&ia(n),a())},[n,S,a]),B=T.useCallback(U=>{U.button!==0&&U.pointerType==="mouse"||(g.current=Date.now(),c.current=!1,p.current=!0,b(!0),h.current=window.setTimeout(()=>{if(c.current=!0,p.current=!1,S&&!N&&(e(),n)){let M;t===je?M=De:t===De?M=Ke:M=je,ia(n,M===De?.3:1)}b(!1)},Ua))},[S,e,n,t,N]),L=T.useCallback(()=>{const U=c.current,M=p.current;if(h.current&&(clearTimeout(h.current),h.current=null),v.current=window.setTimeout(()=>{b(!1)},So),U){c.current=!1;return}if(Date.now()-g.current<Ua&&M){const K=Date.now();if(K-y.current<Va){y.current=0,k.current&&(clearTimeout(k.current),k.current=null),s&&s();return}y.current=K,k.current&&clearTimeout(k.current),k.current=window.setTimeout(()=>{E(),k.current=null},Va)}},[E,s]),d=T.useCallback(()=>{h.current&&(clearTimeout(h.current),h.current=null),v.current&&(clearTimeout(v.current),v.current=null),b(!1),c.current&&(c.current=!1),p.current=!1},[]);return i.jsx("button",{className:`grid-cell ${S?"active":""} ${w?"ghost":""} ${_?"grace":""} ${N?"thirty-second":""} ${D?"double-32":""} ${R?"first-32":""} ${I?"second-32":""} ${r?"current-beat":""} ${H?"alt-beat":""} ${m?"pressing":""}`,style:l,onPointerDown:B,onPointerUp:L,onPointerLeave:d,onPointerCancel:d,type:"button","aria-label":_?"Grace note":w?"Ghost note":S?"Active":"Inactive",children:N&&i.jsxs("div",{className:`cell-32-dots ${D?"double":R?"first":"second"}`,"aria-hidden":"true",children:[(D||R)&&i.jsx("span",{className:"dot left"}),(D||I)&&i.jsx("span",{className:"dot right"})]})})}function Co(t,a,e,s,r){const n=t,o=n+a,l=Math.max(0,Math.floor(n/e)-s),f=Math.min(r,Math.ceil(o/e)+s);return{start:l,end:f}}function Po(t,a,e){const{itemSize:s,totalItems:r,bufferItems:n=0}=e,o=T.useRef(!1),[l,f]=T.useState(()=>({start:0,end:Math.min(r,Math.ceil(window.innerWidth/s)+n*2)})),x=T.useCallback(()=>{const v=t==null?void 0:t.current,p=a.current;if(!v||!p)return;o.current||(o.current=!0);const g=v.clientWidth;if(r*s<=g){f({start:0,end:r});return}const c=Co(v.scrollLeft,g,s,n,r);f(h=>h.start===c.start&&h.end===c.end?h:c)},[t,a,s,n,r]),y=t==null?void 0:t.current;T.useLayoutEffect(()=>{if(!y)return;x();let v;const p=()=>{v&&cancelAnimationFrame(v),v=requestAnimationFrame(x)};return y.addEventListener("scroll",p,{passive:!0}),window.addEventListener("resize",x),()=>{v&&cancelAnimationFrame(v),y.removeEventListener("scroll",p),window.removeEventListener("resize",x)}},[y,x]);const k=T.useMemo(()=>new Set(Array.from({length:l.end-l.start},(v,p)=>l.start+p)),[l]);return{...l,visibleSet:k}}function _o({pattern:t,cellSize:a,onCellClick:e,onToggleGhost:s,onCellDoubleClick:r,currentBeat:n,scrollContainerRef:o}){var v;const l=T.useRef(null),f=((v=t.grid[0])==null?void 0:v.length)||0,x=f*a,y=fe*2,{visibleSet:k}=Po(o,l,{itemSize:a,totalItems:f,bufferItems:y});return i.jsx("div",{className:"grid-container",children:i.jsx("div",{className:"grid-wrapper",children:i.jsx("div",{className:"grid-content",ref:l,style:{width:`${x}px`},children:i.jsx("div",{className:"grid-rows",children:t.grid.map((p,g)=>{const c=t.drums[g];return i.jsx("div",{className:"grid-row",style:{width:`${x}px`},children:p.map((h,m)=>{if(!k.has(m))return null;const b=n!==void 0&&m===n;return i.jsx(To,{cellState:h,onClick:()=>e(g,m),onDoubleClick:()=>r(g,m),onToggleGhost:()=>s(g,m),isCurrentBeat:b,drumType:c,subdivisionIndex:m,style:{left:`${m*a}px`}},m)})},g)})})})})})}function jo({pattern:t,cellSize:a}){var n;const[e]=t.timeSignature,r=(((n=t.grid[0])==null?void 0:n.length)||0)*a;return i.jsx("div",{className:"grid-container",children:i.jsx("div",{className:"grid-wrapper",children:i.jsx("div",{className:"grid-content",style:{width:`${r}px`},children:i.jsx("div",{className:"grid-beat-labels",children:Array.from({length:t.bars},(o,l)=>{const f=e*fe;return i.jsx("div",{className:"grid-beat-label-group",style:{width:`${f*a}px`},children:Array.from({length:e},(x,y)=>{const k=y*fe;return i.jsxs("div",{className:"grid-beat-label",style:{width:`${fe*a}px`,left:`${k*a}px`},children:[l+1,".",y+1]},y)})},l)})})})})})}function Ao({bars:t,onAddBar:a,onRemoveBar:e,canRemove:s,currentBeat:r}){return i.jsx("div",{className:"bar-controls",children:i.jsxs("span",{className:"bar-count",children:[i.jsx("button",{className:"bar-control-button",onClick:()=>e(r),disabled:!s,"aria-label":"Remove bar",children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),t,i.jsx("button",{className:"bar-control-button",onClick:()=>a(r),"aria-label":"Add bar",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})}function Io({currentPattern:t,savedPatterns:a,crossPatternLoop:e,onCrossPatternLoopChange:s,isDraftMode:r}){const n=T.useRef(t.bars),o=[...a].sort((E,B)=>E.name.localeCompare(B.name)),l=E=>{if(r&&E===""||!r&&E===t.name)return t.bars;const B=a.find(L=>L.name===E);return(B==null?void 0:B.bars)??t.bars},f=E=>E===""||E===t.name?!0:a.some(B=>B.name===E),x={startPatternName:r?"":t.name,startBar:0,endPatternName:r?"":t.name,endBar:t.bars-1};T.useEffect(()=>{if(!e)return;const E=r?"":t.name,B=(d,U)=>d===U?0:d===""?-1:U===""?1:d.localeCompare(U);(()=>{const{startPatternName:d,endPatternName:U}=e;return d===U?d===E:E===d||E===U?!0:B(d,E)<0&&B(E,U)<0})()||s({startPatternName:E,startBar:0,endPatternName:E,endBar:t.bars-1})},[r,t.name,e,s,t.bars]);const y=(E,B,L,d)=>E===L?B-d:E===""?-1:L===""?1:E.localeCompare(L),k=e??x;T.useEffect(()=>{if(!e||!f(e.startPatternName)||!f(e.endPatternName))return;const E=l(e.startPatternName),B=l(e.endPatternName);let L=!1;const d={...e};e.startBar>=E&&(d.startBar=Math.max(0,E-1),L=!0),e.endBar>=B&&(d.endBar=Math.max(0,B-1),L=!0);const U=r?e.endPatternName==="":e.endPatternName===t.name,M=e.startPatternName!==e.endPatternName;if(U&&!M){const V=t.bars-1,K=n.current,F=t.bars>K,Q=d.endBar===K-1;F&&Q&&(d.endBar=V,L=!0)}L&&y(d.startPatternName,d.startBar,d.endPatternName,d.endBar)>0&&(d.endBar=d.startBar),L&&s(d),n.current=t.bars},[t.bars,r,t.name,a]);const v=r?[{name:"",label:"○"},...o.map(E=>({name:E.name,label:E.name}))]:o.map(E=>({name:E.name,label:E.name})),p=E=>{const B=l(E),L=Math.min(k.startBar,B-1);y(E,L,k.endPatternName,k.endBar)>0?s({startPatternName:E,startBar:L,endPatternName:E,endBar:L}):s({...k,startPatternName:E,startBar:L})},g=E=>{const B=l(E),L=Math.min(k.endBar,B-1);y(k.startPatternName,k.startBar,E,L)>0?s({startPatternName:E,startBar:L,endPatternName:E,endBar:L}):s({...k,endPatternName:E,endBar:L})},c=()=>{k.startBar>0&&s({...k,startBar:k.startBar-1})},h=()=>{const E=l(k.startPatternName)-1,B=Math.min(E,k.startBar+1);y(k.startPatternName,B,k.endPatternName,k.endBar)<=0&&s({...k,startBar:B})},m=()=>{const E=k.endBar-1;E>=0&&y(k.startPatternName,k.startBar,k.endPatternName,E)<=0&&s({...k,endBar:E})},b=()=>{const E=l(k.endPatternName)-1;k.endBar<E&&s({...k,endBar:k.endBar+1})},S=k.startBar>0,w=k.startBar<l(k.startPatternName)-1&&y(k.startPatternName,k.startBar+1,k.endPatternName,k.endBar)<=0,_=k.endBar>0&&y(k.startPatternName,k.startBar,k.endPatternName,k.endBar-1)<=0,D=k.endBar<l(k.endPatternName)-1,R=Ae(c,{shouldStop:()=>!S}),I=Ae(h,{shouldStop:()=>!w}),N=Ae(m,{shouldStop:()=>!_}),H=Ae(b,{shouldStop:()=>!D});return i.jsx("div",{className:"loop-range-selector",children:i.jsxs("div",{className:"loop-range-controls",children:[i.jsxs("div",{className:"loop-range-item",children:[i.jsx("select",{className:"loop-pattern-select",value:k.startPatternName,onChange:E=>p(E.target.value),children:v.map(E=>i.jsx("option",{value:E.name,children:E.label},E.name))}),i.jsx("button",{className:"loop-range-button",...R,disabled:!S,"aria-label":"Decrease start bar",children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),i.jsx("span",{className:"loop-range-value",children:k.startBar+1}),i.jsx("button",{className:"loop-range-button",...I,disabled:!w,"aria-label":"Increase start bar",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),i.jsx("span",{className:"loop-range-separator",children:"-"}),i.jsxs("div",{className:"loop-range-item",children:[i.jsx("select",{className:"loop-pattern-select",value:k.endPatternName,onChange:E=>g(E.target.value),children:v.map(E=>i.jsx("option",{value:E.name,children:E.label},E.name))}),i.jsx("button",{className:"loop-range-button",...N,disabled:!_,"aria-label":"Decrease end bar",children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),i.jsx("span",{className:"loop-range-value",children:k.endBar+1}),i.jsx("button",{className:"loop-range-button",...H,disabled:!D,"aria-label":"Increase end bar",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})]})})}function Ct(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var En={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,a){(function(e){t.exports=e()})(function(){return function e(s,r,n){function o(x,y){if(!r[x]){if(!s[x]){var k=typeof Ct=="function"&&Ct;if(!y&&k)return k(x,!0);if(l)return l(x,!0);var v=new Error("Cannot find module '"+x+"'");throw v.code="MODULE_NOT_FOUND",v}var p=r[x]={exports:{}};s[x][0].call(p.exports,function(g){var c=s[x][1][g];return o(c||g)},p,p.exports,e,s,r,n)}return r[x].exports}for(var l=typeof Ct=="function"&&Ct,f=0;f<n.length;f++)o(n[f]);return o}({1:[function(e,s,r){var n=e("./utils"),o=e("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(f){for(var x,y,k,v,p,g,c,h=[],m=0,b=f.length,S=b,w=n.getTypeOf(f)!=="string";m<f.length;)S=b-m,k=w?(x=f[m++],y=m<b?f[m++]:0,m<b?f[m++]:0):(x=f.charCodeAt(m++),y=m<b?f.charCodeAt(m++):0,m<b?f.charCodeAt(m++):0),v=x>>2,p=(3&x)<<4|y>>4,g=1<S?(15&y)<<2|k>>6:64,c=2<S?63&k:64,h.push(l.charAt(v)+l.charAt(p)+l.charAt(g)+l.charAt(c));return h.join("")},r.decode=function(f){var x,y,k,v,p,g,c=0,h=0,m="data:";if(f.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var b,S=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===l.charAt(64)&&S--,f.charAt(f.length-2)===l.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=o.uint8array?new Uint8Array(0|S):new Array(0|S);c<f.length;)x=l.indexOf(f.charAt(c++))<<2|(v=l.indexOf(f.charAt(c++)))>>4,y=(15&v)<<4|(p=l.indexOf(f.charAt(c++)))>>2,k=(3&p)<<6|(g=l.indexOf(f.charAt(c++))),b[h++]=x,p!==64&&(b[h++]=y),g!==64&&(b[h++]=k);return b}},{"./support":30,"./utils":32}],2:[function(e,s,r){var n=e("./external"),o=e("./stream/DataWorker"),l=e("./stream/Crc32Probe"),f=e("./stream/DataLengthProbe");function x(y,k,v,p,g){this.compressedSize=y,this.uncompressedSize=k,this.crc32=v,this.compression=p,this.compressedContent=g}x.prototype={getContentWorker:function(){var y=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),k=this;return y.on("end",function(){if(this.streamInfo.data_length!==k.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},x.createWorkerFrom=function(y,k,v){return y.pipe(new l).pipe(new f("uncompressedSize")).pipe(k.compressWorker(v)).pipe(new f("compressedSize")).withStreamInfo("compression",k)},s.exports=x},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,s,r){var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,s,r){var n=e("./utils"),o=function(){for(var l,f=[],x=0;x<256;x++){l=x;for(var y=0;y<8;y++)l=1&l?3988292384^l>>>1:l>>>1;f[x]=l}return f}();s.exports=function(l,f){return l!==void 0&&l.length?n.getTypeOf(l)!=="string"?function(x,y,k,v){var p=o,g=v+k;x^=-1;for(var c=v;c<g;c++)x=x>>>8^p[255&(x^y[c])];return-1^x}(0|f,l,l.length,0):function(x,y,k,v){var p=o,g=v+k;x^=-1;for(var c=v;c<g;c++)x=x>>>8^p[255&(x^y.charCodeAt(c))];return-1^x}(0|f,l,l.length,0):0}},{"./utils":32}],5:[function(e,s,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,s,r){var n=null;n=typeof Promise<"u"?Promise:e("lie"),s.exports={Promise:n}},{lie:37}],7:[function(e,s,r){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),l=e("./utils"),f=e("./stream/GenericWorker"),x=n?"uint8array":"array";function y(k,v){f.call(this,"FlateWorker/"+k),this._pako=null,this._pakoAction=k,this._pakoOptions=v,this.meta={}}r.magic="\b\0",l.inherits(y,f),y.prototype.processChunk=function(k){this.meta=k.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(x,k.data),!1)},y.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var k=this;this._pako.onData=function(v){k.push({data:v,meta:k.meta})}},r.compressWorker=function(k){return new y("Deflate",k)},r.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,s,r){function n(p,g){var c,h="";for(c=0;c<g;c++)h+=String.fromCharCode(255&p),p>>>=8;return h}function o(p,g,c,h,m,b){var S,w,_=p.file,D=p.compression,R=b!==x.utf8encode,I=l.transformTo("string",b(_.name)),N=l.transformTo("string",x.utf8encode(_.name)),H=_.comment,E=l.transformTo("string",b(H)),B=l.transformTo("string",x.utf8encode(H)),L=N.length!==_.name.length,d=B.length!==H.length,U="",M="",V="",K=_.dir,F=_.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};g&&!c||(Q.crc32=p.crc32,Q.compressedSize=p.compressedSize,Q.uncompressedSize=p.uncompressedSize);var j=0;g&&(j|=8),R||!L&&!d||(j|=2048);var A=0,X=0;K&&(A|=16),m==="UNIX"?(X=798,A|=function($,ee){var re=$;return $||(re=ee?16893:33204),(65535&re)<<16}(_.unixPermissions,K)):(X=20,A|=function($){return 63&($||0)}(_.dosPermissions)),S=F.getUTCHours(),S<<=6,S|=F.getUTCMinutes(),S<<=5,S|=F.getUTCSeconds()/2,w=F.getUTCFullYear()-1980,w<<=4,w|=F.getUTCMonth()+1,w<<=5,w|=F.getUTCDate(),L&&(M=n(1,1)+n(y(I),4)+N,U+="up"+n(M.length,2)+M),d&&(V=n(1,1)+n(y(E),4)+B,U+="uc"+n(V.length,2)+V);var Z="";return Z+=`
\0`,Z+=n(j,2),Z+=D.magic,Z+=n(S,2),Z+=n(w,2),Z+=n(Q.crc32,4),Z+=n(Q.compressedSize,4),Z+=n(Q.uncompressedSize,4),Z+=n(I.length,2),Z+=n(U.length,2),{fileRecord:k.LOCAL_FILE_HEADER+Z+I+U,dirRecord:k.CENTRAL_FILE_HEADER+n(X,2)+Z+n(E.length,2)+"\0\0\0\0"+n(A,4)+n(h,4)+I+U+E}}var l=e("../utils"),f=e("../stream/GenericWorker"),x=e("../utf8"),y=e("../crc32"),k=e("../signature");function v(p,g,c,h){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=c,this.encodeFileName=h,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(v,f),v.prototype.push=function(p){var g=p.meta.percent||0,c=this.entriesCount,h=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,f.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:c?(g+100*(c-h-1))/c:100}}))},v.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var g=this.streamFiles&&!p.file.dir;if(g){var c=o(p,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(p){this.accumulate=!1;var g=this.streamFiles&&!p.file.dir,c=o(p,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),g)this.push({data:function(h){return k.DATA_DESCRIPTOR+n(h.crc32,4)+n(h.compressedSize,4)+n(h.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var p=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var c=this.bytesWritten-p,h=function(m,b,S,w,_){var D=l.transformTo("string",_(w));return k.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(m,2)+n(m,2)+n(b,4)+n(S,4)+n(D.length,2)+D}(this.dirRecords.length,c,p,this.zipComment,this.encodeFileName);this.push({data:h,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(p){this._sources.push(p);var g=this;return p.on("data",function(c){g.processChunk(c)}),p.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),p.on("error",function(c){g.error(c)}),this},v.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(p){var g=this._sources;if(!f.prototype.error.call(this,p))return!1;for(var c=0;c<g.length;c++)try{g[c].error(p)}catch{}return!0},v.prototype.lock=function(){f.prototype.lock.call(this);for(var p=this._sources,g=0;g<p.length;g++)p[g].lock()},s.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,s,r){var n=e("../compressions"),o=e("./ZipFileWorker");r.generateWorker=function(l,f,x){var y=new o(f.streamFiles,x,f.platform,f.encodeFileName),k=0;try{l.forEach(function(v,p){k++;var g=function(b,S){var w=b||S,_=n[w];if(!_)throw new Error(w+" is not a valid compression method !");return _}(p.options.compression,f.compression),c=p.options.compressionOptions||f.compressionOptions||{},h=p.dir,m=p.date;p._compressWorker(g,c).withStreamInfo("file",{name:v,dir:h,date:m,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(y)}),y.entriesCount=k}catch(v){y.error(v)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,s,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new n;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(o,l){return new n().loadAsync(o,l)},n.external=e("./external"),s.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,s,r){var n=e("./utils"),o=e("./external"),l=e("./utf8"),f=e("./zipEntries"),x=e("./stream/Crc32Probe"),y=e("./nodejsUtils");function k(v){return new o.Promise(function(p,g){var c=v.decompressed.getContentWorker().pipe(new x);c.on("error",function(h){g(h)}).on("end",function(){c.streamInfo.crc32!==v.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}s.exports=function(v,p){var g=this;return p=n.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),y.isNode&&y.isStream(v)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",v,!0,p.optimizedBinaryString,p.base64).then(function(c){var h=new f(p);return h.load(c),h}).then(function(c){var h=[o.Promise.resolve(c)],m=c.files;if(p.checkCRC32)for(var b=0;b<m.length;b++)h.push(k(m[b]));return o.Promise.all(h)}).then(function(c){for(var h=c.shift(),m=h.files,b=0;b<m.length;b++){var S=m[b],w=S.fileNameStr,_=n.resolve(S.fileNameStr);g.file(_,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:p.createFolders}),S.dir||(g.file(_).unsafeOriginalName=w)}return h.zipComment.length&&(g.comment=h.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,s,r){var n=e("../utils"),o=e("../stream/GenericWorker");function l(f,x){o.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(x)}n.inherits(l,o),l.prototype._bindStream=function(f){var x=this;(this._stream=f).pause(),f.on("data",function(y){x.push({data:y,meta:{percent:0}})}).on("error",function(y){x.isPaused?this.generatedError=y:x.error(y)}).on("end",function(){x.isPaused?x._upstreamEnded=!0:x.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,s,r){var n=e("readable-stream").Readable;function o(l,f,x){n.call(this,f),this._helper=l;var y=this;l.on("data",function(k,v){y.push(k)||y._helper.pause(),x&&x(v)}).on("error",function(k){y.emit("error",k)}).on("end",function(){y.push(null)})}e("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},s.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,s,r){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,o);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,o)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var o=new Buffer(n);return o.fill(0),o},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(e,s,r){function n(_,D,R){var I,N=l.getTypeOf(D),H=l.extend(R||{},y);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(_=m(_)),H.createFolders&&(I=h(_))&&b.call(this,I,!0);var E=N==="string"&&H.binary===!1&&H.base64===!1;R&&R.binary!==void 0||(H.binary=!E),(D instanceof k&&D.uncompressedSize===0||H.dir||!D||D.length===0)&&(H.base64=!1,H.binary=!0,D="",H.compression="STORE",N="string");var B=null;B=D instanceof k||D instanceof f?D:g.isNode&&g.isStream(D)?new c(_,D):l.prepareContent(_,D,H.binary,H.optimizedBinaryString,H.base64);var L=new v(_,B,H);this.files[_]=L}var o=e("./utf8"),l=e("./utils"),f=e("./stream/GenericWorker"),x=e("./stream/StreamHelper"),y=e("./defaults"),k=e("./compressedObject"),v=e("./zipObject"),p=e("./generate"),g=e("./nodejsUtils"),c=e("./nodejs/NodejsStreamInputAdapter"),h=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var D=_.lastIndexOf("/");return 0<D?_.substring(0,D):""},m=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},b=function(_,D){return D=D!==void 0?D:y.createFolders,_=m(_),this.files[_]||n.call(this,_,null,{dir:!0,createFolders:D}),this.files[_]};function S(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var D,R,I;for(D in this.files)I=this.files[D],(R=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&_(R,I)},filter:function(_){var D=[];return this.forEach(function(R,I){_(R,I)&&D.push(I)}),D},file:function(_,D,R){if(arguments.length!==1)return _=this.root+_,n.call(this,_,D,R),this;if(S(_)){var I=_;return this.filter(function(H,E){return!E.dir&&I.test(H)})}var N=this.files[this.root+_];return N&&!N.dir?N:null},folder:function(_){if(!_)return this;if(S(_))return this.filter(function(N,H){return H.dir&&_.test(N)});var D=this.root+_,R=b.call(this,D),I=this.clone();return I.root=R.name,I},remove:function(_){_=this.root+_;var D=this.files[_];if(D||(_.slice(-1)!=="/"&&(_+="/"),D=this.files[_]),D&&!D.dir)delete this.files[_];else for(var R=this.filter(function(N,H){return H.name.slice(0,_.length)===_}),I=0;I<R.length;I++)delete this.files[R[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var D,R={};try{if((R=l.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");l.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var I=R.comment||this.comment||"";D=p.generateWorker(this,R,I)}catch(N){(D=new f("error")).error(N)}return new x(D,R.type||"string",R.mimeType)},generateAsync:function(_,D){return this.generateInternalStream(_).accumulate(D)},generateNodeStream:function(_,D){return(_=_||{}).type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(D)}};s.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,s,r){s.exports=e("stream")},{stream:void 0}],17:[function(e,s,r){var n=e("./DataReader");function o(l){n.call(this,l);for(var f=0;f<this.data.length;f++)l[f]=255&l[f]}e("../utils").inherits(o,n),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var f=l.charCodeAt(0),x=l.charCodeAt(1),y=l.charCodeAt(2),k=l.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===f&&this.data[v+1]===x&&this.data[v+2]===y&&this.data[v+3]===k)return v-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var f=l.charCodeAt(0),x=l.charCodeAt(1),y=l.charCodeAt(2),k=l.charCodeAt(3),v=this.readData(4);return f===v[0]&&x===v[1]&&y===v[2]&&k===v[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,f},s.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,s,r){var n=e("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var f,x=0;for(this.checkOffset(l),f=this.index+l-1;f>=this.index;f--)x=(x<<8)+this.byteAt(f);return this.index+=l,x},readString:function(l){return n.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},s.exports=o},{"../utils":32}],19:[function(e,s,r){var n=e("./Uint8ArrayReader");function o(l){n.call(this,l)}e("../utils").inherits(o,n),o.prototype.readData=function(l){this.checkOffset(l);var f=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,f},s.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,s,r){var n=e("./DataReader");function o(l){n.call(this,l)}e("../utils").inherits(o,n),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var f=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,f},s.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,s,r){var n=e("./ArrayReader");function o(l){n.call(this,l)}e("../utils").inherits(o,n),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,f},s.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,s,r){var n=e("../utils"),o=e("../support"),l=e("./ArrayReader"),f=e("./StringReader"),x=e("./NodeBufferReader"),y=e("./Uint8ArrayReader");s.exports=function(k){var v=n.getTypeOf(k);return n.checkSupport(v),v!=="string"||o.uint8array?v==="nodebuffer"?new x(k):o.uint8array?new y(n.transformTo("uint8array",k)):new l(n.transformTo("array",k)):new f(k)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,s,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,s,r){var n=e("./GenericWorker"),o=e("../utils");function l(f){n.call(this,"ConvertWorker to "+f),this.destType=f}o.inherits(l,n),l.prototype.processChunk=function(f){this.push({data:o.transformTo(this.destType,f.data),meta:f.meta})},s.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(e,s,r){var n=e("./GenericWorker"),o=e("../crc32");function l(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(l,n),l.prototype.processChunk=function(f){this.streamInfo.crc32=o(f.data,this.streamInfo.crc32||0),this.push(f)},s.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,s,r){var n=e("../utils"),o=e("./GenericWorker");function l(f){o.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}n.inherits(l,o),l.prototype.processChunk=function(f){if(f){var x=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=x+f.data.length}o.prototype.processChunk.call(this,f)},s.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(e,s,r){var n=e("../utils"),o=e("./GenericWorker");function l(f){o.call(this,"DataWorker");var x=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(y){x.dataIsReady=!0,x.data=y,x.max=y&&y.length||0,x.type=n.getTypeOf(y),x.isPaused||x._tickAndRepeat()},function(y){x.error(y)})}n.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,x=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,x);break;case"uint8array":f=this.data.subarray(this.index,x);break;case"array":case"nodebuffer":f=this.data.slice(this.index,x)}return this.index=x,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(e,s,r){function n(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var f=0;f<this._listeners[o].length;f++)this._listeners[o][f].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(f){l.processChunk(f)}),o.on("end",function(){l.end()}),o.on("error",function(f){l.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},s.exports=n},{}],29:[function(e,s,r){var n=e("../utils"),o=e("./ConvertWorker"),l=e("./GenericWorker"),f=e("../base64"),x=e("../support"),y=e("../external"),k=null;if(x.nodestream)try{k=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(g,c){return new y.Promise(function(h,m){var b=[],S=g._internalType,w=g._outputType,_=g._mimeType;g.on("data",function(D,R){b.push(D),c&&c(R)}).on("error",function(D){b=[],m(D)}).on("end",function(){try{var D=function(R,I,N){switch(R){case"blob":return n.newBlob(n.transformTo("arraybuffer",I),N);case"base64":return f.encode(I);default:return n.transformTo(R,I)}}(w,function(R,I){var N,H=0,E=null,B=0;for(N=0;N<I.length;N++)B+=I[N].length;switch(R){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for(E=new Uint8Array(B),N=0;N<I.length;N++)E.set(I[N],H),H+=I[N].length;return E;case"nodebuffer":return Buffer.concat(I);default:throw new Error("concat : unsupported type '"+R+"'")}}(S,b),_);h(D)}catch(R){m(R)}b=[]}).resume()})}function p(g,c,h){var m=c;switch(c){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=c,this._mimeType=h,n.checkSupport(m),this._worker=g.pipe(new o(m)),g.lock()}catch(b){this._worker=new l("error"),this._worker.error(b)}}p.prototype={accumulate:function(g){return v(this,g)},on:function(g,c){var h=this;return g==="data"?this._worker.on(g,function(m){c.call(h,m.data,m.meta)}):this._worker.on(g,function(){n.delay(c,arguments,h)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new k(this,{objectMode:this._outputType!=="nodebuffer"},g)}},s.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,s,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(n),r.blob=o.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,s,r){for(var n=e("./utils"),o=e("./support"),l=e("./nodejsUtils"),f=e("./stream/GenericWorker"),x=new Array(256),y=0;y<256;y++)x[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;x[254]=x[254]=1;function k(){f.call(this,"utf-8 decode"),this.leftOver=null}function v(){f.call(this,"utf-8 encode")}r.utf8encode=function(p){return o.nodebuffer?l.newBufferFrom(p,"utf-8"):function(g){var c,h,m,b,S,w=g.length,_=0;for(b=0;b<w;b++)(64512&(h=g.charCodeAt(b)))==55296&&b+1<w&&(64512&(m=g.charCodeAt(b+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),b++),_+=h<128?1:h<2048?2:h<65536?3:4;for(c=o.uint8array?new Uint8Array(_):new Array(_),b=S=0;S<_;b++)(64512&(h=g.charCodeAt(b)))==55296&&b+1<w&&(64512&(m=g.charCodeAt(b+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),b++),h<128?c[S++]=h:(h<2048?c[S++]=192|h>>>6:(h<65536?c[S++]=224|h>>>12:(c[S++]=240|h>>>18,c[S++]=128|h>>>12&63),c[S++]=128|h>>>6&63),c[S++]=128|63&h);return c}(p)},r.utf8decode=function(p){return o.nodebuffer?n.transformTo("nodebuffer",p).toString("utf-8"):function(g){var c,h,m,b,S=g.length,w=new Array(2*S);for(c=h=0;c<S;)if((m=g[c++])<128)w[h++]=m;else if(4<(b=x[m]))w[h++]=65533,c+=b-1;else{for(m&=b===2?31:b===3?15:7;1<b&&c<S;)m=m<<6|63&g[c++],b--;1<b?w[h++]=65533:m<65536?w[h++]=m:(m-=65536,w[h++]=55296|m>>10&1023,w[h++]=56320|1023&m)}return w.length!==h&&(w.subarray?w=w.subarray(0,h):w.length=h),n.applyFromCharCode(w)}(p=n.transformTo(o.uint8array?"uint8array":"array",p))},n.inherits(k,f),k.prototype.processChunk=function(p){var g=n.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var c=g;(g=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),g.set(c,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var h=function(b,S){var w;for((S=S||b.length)>b.length&&(S=b.length),w=S-1;0<=w&&(192&b[w])==128;)w--;return w<0||w===0?S:w+x[b[w]]>S?w:S}(g),m=g;h!==g.length&&(o.uint8array?(m=g.subarray(0,h),this.leftOver=g.subarray(h,g.length)):(m=g.slice(0,h),this.leftOver=g.slice(h,g.length))),this.push({data:r.utf8decode(m),meta:p.meta})},k.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=k,n.inherits(v,f),v.prototype.processChunk=function(p){this.push({data:r.utf8encode(p.data),meta:p.meta})},r.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,s,r){var n=e("./support"),o=e("./base64"),l=e("./nodejsUtils"),f=e("./external");function x(c){return c}function y(c,h){for(var m=0;m<c.length;++m)h[m]=255&c.charCodeAt(m);return h}e("setimmediate"),r.newBlob=function(c,h){r.checkSupport("blob");try{return new Blob([c],{type:h})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(c),m.getBlob(h)}catch{throw new Error("Bug : can't construct the Blob.")}}};var k={stringifyByChunk:function(c,h,m){var b=[],S=0,w=c.length;if(w<=m)return String.fromCharCode.apply(null,c);for(;S<w;)h==="array"||h==="nodebuffer"?b.push(String.fromCharCode.apply(null,c.slice(S,Math.min(S+m,w)))):b.push(String.fromCharCode.apply(null,c.subarray(S,Math.min(S+m,w)))),S+=m;return b.join("")},stringifyByChar:function(c){for(var h="",m=0;m<c.length;m++)h+=String.fromCharCode(c[m]);return h},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function v(c){var h=65536,m=r.getTypeOf(c),b=!0;if(m==="uint8array"?b=k.applyCanBeUsed.uint8array:m==="nodebuffer"&&(b=k.applyCanBeUsed.nodebuffer),b)for(;1<h;)try{return k.stringifyByChunk(c,m,h)}catch{h=Math.floor(h/2)}return k.stringifyByChar(c)}function p(c,h){for(var m=0;m<c.length;m++)h[m]=c[m];return h}r.applyFromCharCode=v;var g={};g.string={string:x,array:function(c){return y(c,new Array(c.length))},arraybuffer:function(c){return g.string.uint8array(c).buffer},uint8array:function(c){return y(c,new Uint8Array(c.length))},nodebuffer:function(c){return y(c,l.allocBuffer(c.length))}},g.array={string:v,array:x,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return l.newBufferFrom(c)}},g.arraybuffer={string:function(c){return v(new Uint8Array(c))},array:function(c){return p(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:x,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return l.newBufferFrom(new Uint8Array(c))}},g.uint8array={string:v,array:function(c){return p(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:x,nodebuffer:function(c){return l.newBufferFrom(c)}},g.nodebuffer={string:v,array:function(c){return p(c,new Array(c.length))},arraybuffer:function(c){return g.nodebuffer.uint8array(c).buffer},uint8array:function(c){return p(c,new Uint8Array(c.length))},nodebuffer:x},r.transformTo=function(c,h){if(h=h||"",!c)return h;r.checkSupport(c);var m=r.getTypeOf(h);return g[m][c](h)},r.resolve=function(c){for(var h=c.split("/"),m=[],b=0;b<h.length;b++){var S=h[b];S==="."||S===""&&b!==0&&b!==h.length-1||(S===".."?m.pop():m.push(S))}return m.join("/")},r.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":n.nodebuffer&&l.isBuffer(c)?"nodebuffer":n.uint8array&&c instanceof Uint8Array?"uint8array":n.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(c){if(!n[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(c){var h,m,b="";for(m=0;m<(c||"").length;m++)b+="\\x"+((h=c.charCodeAt(m))<16?"0":"")+h.toString(16).toUpperCase();return b},r.delay=function(c,h,m){setImmediate(function(){c.apply(m||null,h||[])})},r.inherits=function(c,h){function m(){}m.prototype=h.prototype,c.prototype=new m},r.extend=function(){var c,h,m={};for(c=0;c<arguments.length;c++)for(h in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],h)&&m[h]===void 0&&(m[h]=arguments[c][h]);return m},r.prepareContent=function(c,h,m,b,S){return f.Promise.resolve(h).then(function(w){return n.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new f.Promise(function(_,D){var R=new FileReader;R.onload=function(I){_(I.target.result)},R.onerror=function(I){D(I.target.error)},R.readAsArrayBuffer(w)}):w}).then(function(w){var _=r.getTypeOf(w);return _?(_==="arraybuffer"?w=r.transformTo("uint8array",w):_==="string"&&(S?w=o.decode(w):m&&b!==!0&&(w=function(D){return y(D,n.uint8array?new Uint8Array(D.length):new Array(D.length))}(w))),w):f.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,s,r){var n=e("./reader/readerFor"),o=e("./utils"),l=e("./signature"),f=e("./zipEntry"),x=e("./support");function y(k){this.files=[],this.loadOptions=k}y.prototype={checkSignature:function(k){if(!this.reader.readAndCheckSignature(k)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(v)+", expected "+o.pretty(k)+")")}},isSignature:function(k,v){var p=this.reader.index;this.reader.setIndex(k);var g=this.reader.readString(4)===v;return this.reader.setIndex(p),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var k=this.reader.readData(this.zipCommentLength),v=x.uint8array?"uint8array":"array",p=o.transformTo(v,k);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var k,v,p,g=this.zip64EndOfCentralSize-44;0<g;)k=this.reader.readInt(2),v=this.reader.readInt(4),p=this.reader.readData(v),this.zip64ExtensibleData[k]={id:k,length:v,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var k,v;for(k=0;k<this.files.length;k++)v=this.files[k],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var k;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(k=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(k);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var k=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(k<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(k);var v=k;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(k=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(k),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var g=v-p;if(0<g)this.isSignature(v,l.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(k){this.reader=n(k)},load:function(k){this.prepareReader(k),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,s,r){var n=e("./reader/readerFor"),o=e("./utils"),l=e("./compressedObject"),f=e("./crc32"),x=e("./utf8"),y=e("./compressions"),k=e("./support");function v(p,g){this.options=p,this.loadOptions=g}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var g,c;if(p.skip(22),this.fileNameLength=p.readInt(2),c=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(h){for(var m in y)if(Object.prototype.hasOwnProperty.call(y,m)&&y[m].magic===h)return y[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,g,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var g=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(g),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var g,c,h,m=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<m;)g=p.readInt(2),c=p.readInt(2),h=p.readData(c),this.extraFields[g]={id:g,length:c,value:h};p.setIndex(m)},handleUTF8:function(){var p=k.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=x.utf8decode(this.fileName),this.fileCommentStr=x.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var c=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var h=this.findExtraFieldUnicodeComment();if(h!==null)this.fileCommentStr=h;else{var m=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var g=n(p.value);return g.readInt(1)!==1||f(this.fileName)!==g.readInt(4)?null:x.utf8decode(g.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var g=n(p.value);return g.readInt(1)!==1||f(this.fileComment)!==g.readInt(4)?null:x.utf8decode(g.readData(p.length-5))}return null}},s.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,s,r){function n(g,c,h){this.name=g,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=c,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}}var o=e("./stream/StreamHelper"),l=e("./stream/DataWorker"),f=e("./utf8"),x=e("./compressedObject"),y=e("./stream/GenericWorker");n.prototype={internalStream:function(g){var c=null,h="string";try{if(!g)throw new Error("No output type specified.");var m=(h=g.toLowerCase())==="string"||h==="text";h!=="binarystring"&&h!=="text"||(h="string"),c=this._decompressWorker();var b=!this._dataBinary;b&&!m&&(c=c.pipe(new f.Utf8EncodeWorker)),!b&&m&&(c=c.pipe(new f.Utf8DecodeWorker))}catch(S){(c=new y("error")).error(S)}return new o(c,h,"")},async:function(g,c){return this.internalStream(g).accumulate(c)},nodeStream:function(g,c){return this.internalStream(g||"nodebuffer").toNodejsStream(c)},_compressWorker:function(g,c){if(this._data instanceof x&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new f.Utf8EncodeWorker)),x.createWorkerFrom(h,g,c)},_decompressWorker:function(){return this._data instanceof x?this._data.getContentWorker():this._data instanceof y?this._data:new l(this._data)}};for(var k=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<k.length;p++)n.prototype[k[p]]=v;s.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,s,r){(function(n){var o,l,f=n.MutationObserver||n.WebKitMutationObserver;if(f){var x=0,y=new f(g),k=n.document.createTextNode("");y.observe(k,{characterData:!0}),o=function(){k.data=x=++x%2}}else if(n.setImmediate||n.MessageChannel===void 0)o="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var c=n.document.createElement("script");c.onreadystatechange=function(){g(),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},n.document.documentElement.appendChild(c)}:function(){setTimeout(g,0)};else{var v=new n.MessageChannel;v.port1.onmessage=g,o=function(){v.port2.postMessage(0)}}var p=[];function g(){var c,h;l=!0;for(var m=p.length;m;){for(h=p,p=[],c=-1;++c<m;)h[c]();m=p.length}l=!1}s.exports=function(c){p.push(c)!==1||l||o()}}).call(this,typeof Bt<"u"?Bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,s,r){var n=e("immediate");function o(){}var l={},f=["REJECTED"],x=["FULFILLED"],y=["PENDING"];function k(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,m!==o&&c(this,m)}function v(m,b,S){this.promise=m,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function p(m,b,S){n(function(){var w;try{w=b(S)}catch(_){return l.reject(m,_)}w===m?l.reject(m,new TypeError("Cannot resolve promise with itself")):l.resolve(m,w)})}function g(m){var b=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof b=="function")return function(){b.apply(m,arguments)}}function c(m,b){var S=!1;function w(R){S||(S=!0,l.reject(m,R))}function _(R){S||(S=!0,l.resolve(m,R))}var D=h(function(){b(_,w)});D.status==="error"&&w(D.value)}function h(m,b){var S={};try{S.value=m(b),S.status="success"}catch(w){S.status="error",S.value=w}return S}(s.exports=k).prototype.finally=function(m){if(typeof m!="function")return this;var b=this.constructor;return this.then(function(S){return b.resolve(m()).then(function(){return S})},function(S){return b.resolve(m()).then(function(){throw S})})},k.prototype.catch=function(m){return this.then(null,m)},k.prototype.then=function(m,b){if(typeof m!="function"&&this.state===x||typeof b!="function"&&this.state===f)return this;var S=new this.constructor(o);return this.state!==y?p(S,this.state===x?m:b,this.outcome):this.queue.push(new v(S,m,b)),S},v.prototype.callFulfilled=function(m){l.resolve(this.promise,m)},v.prototype.otherCallFulfilled=function(m){p(this.promise,this.onFulfilled,m)},v.prototype.callRejected=function(m){l.reject(this.promise,m)},v.prototype.otherCallRejected=function(m){p(this.promise,this.onRejected,m)},l.resolve=function(m,b){var S=h(g,b);if(S.status==="error")return l.reject(m,S.value);var w=S.value;if(w)c(m,w);else{m.state=x,m.outcome=b;for(var _=-1,D=m.queue.length;++_<D;)m.queue[_].callFulfilled(b)}return m},l.reject=function(m,b){m.state=f,m.outcome=b;for(var S=-1,w=m.queue.length;++S<w;)m.queue[S].callRejected(b);return m},k.resolve=function(m){return m instanceof this?m:l.resolve(new this(o),m)},k.reject=function(m){var b=new this(o);return l.reject(b,m)},k.all=function(m){var b=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=m.length,w=!1;if(!S)return this.resolve([]);for(var _=new Array(S),D=0,R=-1,I=new this(o);++R<S;)N(m[R],R);return I;function N(H,E){b.resolve(H).then(function(B){_[E]=B,++D!==S||w||(w=!0,l.resolve(I,_))},function(B){w||(w=!0,l.reject(I,B))})}},k.race=function(m){var b=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=m.length,w=!1;if(!S)return this.resolve([]);for(var _=-1,D=new this(o);++_<S;)R=m[_],b.resolve(R).then(function(I){w||(w=!0,l.resolve(D,I))},function(I){w||(w=!0,l.reject(D,I))});var R;return D}},{immediate:36}],38:[function(e,s,r){var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),s.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,s,r){var n=e("./zlib/deflate"),o=e("./utils/common"),l=e("./utils/strings"),f=e("./zlib/messages"),x=e("./zlib/zstream"),y=Object.prototype.toString,k=0,v=-1,p=0,g=8;function c(m){if(!(this instanceof c))return new c(m);this.options=o.assign({level:v,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},m||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new x,this.strm.avail_out=0;var S=n.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(S!==k)throw new Error(f[S]);if(b.header&&n.deflateSetHeader(this.strm,b.header),b.dictionary){var w;if(w=typeof b.dictionary=="string"?l.string2buf(b.dictionary):y.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(S=n.deflateSetDictionary(this.strm,w))!==k)throw new Error(f[S]);this._dict_set=!0}}function h(m,b){var S=new c(b);if(S.push(m,!0),S.err)throw S.msg||f[S.err];return S.result}c.prototype.push=function(m,b){var S,w,_=this.strm,D=this.options.chunkSize;if(this.ended)return!1;w=b===~~b?b:b===!0?4:0,typeof m=="string"?_.input=l.string2buf(m):y.call(m)==="[object ArrayBuffer]"?_.input=new Uint8Array(m):_.input=m,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new o.Buf8(D),_.next_out=0,_.avail_out=D),(S=n.deflate(_,w))!==1&&S!==k)return this.onEnd(S),!(this.ended=!0);_.avail_out!==0&&(_.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(_.output,_.next_out))):this.onData(o.shrinkBuf(_.output,_.next_out)))}while((0<_.avail_in||_.avail_out===0)&&S!==1);return w===4?(S=n.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===k):w!==2||(this.onEnd(k),!(_.avail_out=0))},c.prototype.onData=function(m){this.chunks.push(m)},c.prototype.onEnd=function(m){m===k&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Deflate=c,r.deflate=h,r.deflateRaw=function(m,b){return(b=b||{}).raw=!0,h(m,b)},r.gzip=function(m,b){return(b=b||{}).gzip=!0,h(m,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,s,r){var n=e("./zlib/inflate"),o=e("./utils/common"),l=e("./utils/strings"),f=e("./zlib/constants"),x=e("./zlib/messages"),y=e("./zlib/zstream"),k=e("./zlib/gzheader"),v=Object.prototype.toString;function p(c){if(!(this instanceof p))return new p(c);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},c||{});var h=this.options;h.raw&&0<=h.windowBits&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),!(0<=h.windowBits&&h.windowBits<16)||c&&c.windowBits||(h.windowBits+=32),15<h.windowBits&&h.windowBits<48&&!(15&h.windowBits)&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var m=n.inflateInit2(this.strm,h.windowBits);if(m!==f.Z_OK)throw new Error(x[m]);this.header=new k,n.inflateGetHeader(this.strm,this.header)}function g(c,h){var m=new p(h);if(m.push(c,!0),m.err)throw m.msg||x[m.err];return m.result}p.prototype.push=function(c,h){var m,b,S,w,_,D,R=this.strm,I=this.options.chunkSize,N=this.options.dictionary,H=!1;if(this.ended)return!1;b=h===~~h?h:h===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof c=="string"?R.input=l.binstring2buf(c):v.call(c)==="[object ArrayBuffer]"?R.input=new Uint8Array(c):R.input=c,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(I),R.next_out=0,R.avail_out=I),(m=n.inflate(R,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&N&&(D=typeof N=="string"?l.string2buf(N):v.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,m=n.inflateSetDictionary(this.strm,D)),m===f.Z_BUF_ERROR&&H===!0&&(m=f.Z_OK,H=!1),m!==f.Z_STREAM_END&&m!==f.Z_OK)return this.onEnd(m),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&m!==f.Z_STREAM_END&&(R.avail_in!==0||b!==f.Z_FINISH&&b!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=l.utf8border(R.output,R.next_out),w=R.next_out-S,_=l.buf2string(R.output,S),R.next_out=w,R.avail_out=I-w,w&&o.arraySet(R.output,R.output,S,w,0),this.onData(_)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(H=!0)}while((0<R.avail_in||R.avail_out===0)&&m!==f.Z_STREAM_END);return m===f.Z_STREAM_END&&(b=f.Z_FINISH),b===f.Z_FINISH?(m=n.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===f.Z_OK):b!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(R.avail_out=0))},p.prototype.onData=function(c){this.chunks.push(c)},p.prototype.onEnd=function(c){c===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},r.Inflate=p,r.inflate=g,r.inflateRaw=function(c,h){return(h=h||{}).raw=!0,g(c,h)},r.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,s,r){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(f){for(var x=Array.prototype.slice.call(arguments,1);x.length;){var y=x.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var k in y)y.hasOwnProperty(k)&&(f[k]=y[k])}}return f},r.shrinkBuf=function(f,x){return f.length===x?f:f.subarray?f.subarray(0,x):(f.length=x,f)};var o={arraySet:function(f,x,y,k,v){if(x.subarray&&f.subarray)f.set(x.subarray(y,y+k),v);else for(var p=0;p<k;p++)f[v+p]=x[y+p]},flattenChunks:function(f){var x,y,k,v,p,g;for(x=k=0,y=f.length;x<y;x++)k+=f[x].length;for(g=new Uint8Array(k),x=v=0,y=f.length;x<y;x++)p=f[x],g.set(p,v),v+=p.length;return g}},l={arraySet:function(f,x,y,k,v){for(var p=0;p<k;p++)f[v+p]=x[y+p]},flattenChunks:function(f){return[].concat.apply([],f)}};r.setTyped=function(f){f?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,l))},r.setTyped(n)},{}],42:[function(e,s,r){var n=e("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var f=new n.Buf8(256),x=0;x<256;x++)f[x]=252<=x?6:248<=x?5:240<=x?4:224<=x?3:192<=x?2:1;function y(k,v){if(v<65537&&(k.subarray&&l||!k.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(k,v));for(var p="",g=0;g<v;g++)p+=String.fromCharCode(k[g]);return p}f[254]=f[254]=1,r.string2buf=function(k){var v,p,g,c,h,m=k.length,b=0;for(c=0;c<m;c++)(64512&(p=k.charCodeAt(c)))==55296&&c+1<m&&(64512&(g=k.charCodeAt(c+1)))==56320&&(p=65536+(p-55296<<10)+(g-56320),c++),b+=p<128?1:p<2048?2:p<65536?3:4;for(v=new n.Buf8(b),c=h=0;h<b;c++)(64512&(p=k.charCodeAt(c)))==55296&&c+1<m&&(64512&(g=k.charCodeAt(c+1)))==56320&&(p=65536+(p-55296<<10)+(g-56320),c++),p<128?v[h++]=p:(p<2048?v[h++]=192|p>>>6:(p<65536?v[h++]=224|p>>>12:(v[h++]=240|p>>>18,v[h++]=128|p>>>12&63),v[h++]=128|p>>>6&63),v[h++]=128|63&p);return v},r.buf2binstring=function(k){return y(k,k.length)},r.binstring2buf=function(k){for(var v=new n.Buf8(k.length),p=0,g=v.length;p<g;p++)v[p]=k.charCodeAt(p);return v},r.buf2string=function(k,v){var p,g,c,h,m=v||k.length,b=new Array(2*m);for(p=g=0;p<m;)if((c=k[p++])<128)b[g++]=c;else if(4<(h=f[c]))b[g++]=65533,p+=h-1;else{for(c&=h===2?31:h===3?15:7;1<h&&p<m;)c=c<<6|63&k[p++],h--;1<h?b[g++]=65533:c<65536?b[g++]=c:(c-=65536,b[g++]=55296|c>>10&1023,b[g++]=56320|1023&c)}return y(b,g)},r.utf8border=function(k,v){var p;for((v=v||k.length)>k.length&&(v=k.length),p=v-1;0<=p&&(192&k[p])==128;)p--;return p<0||p===0?v:p+f[k[p]]>v?p:v}},{"./common":41}],43:[function(e,s,r){s.exports=function(n,o,l,f){for(var x=65535&n|0,y=n>>>16&65535|0,k=0;l!==0;){for(l-=k=2e3<l?2e3:l;y=y+(x=x+o[f++]|0)|0,--k;);x%=65521,y%=65521}return x|y<<16|0}},{}],44:[function(e,s,r){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,s,r){var n=function(){for(var o,l=[],f=0;f<256;f++){o=f;for(var x=0;x<8;x++)o=1&o?3988292384^o>>>1:o>>>1;l[f]=o}return l}();s.exports=function(o,l,f,x){var y=n,k=x+f;o^=-1;for(var v=x;v<k;v++)o=o>>>8^y[255&(o^l[v])];return-1^o}},{}],46:[function(e,s,r){var n,o=e("../utils/common"),l=e("./trees"),f=e("./adler32"),x=e("./crc32"),y=e("./messages"),k=0,v=4,p=0,g=-2,c=-1,h=4,m=2,b=8,S=9,w=286,_=30,D=19,R=2*w+1,I=15,N=3,H=258,E=H+N+1,B=42,L=113,d=1,U=2,M=3,V=4;function K(u,q){return u.msg=y[q],q}function F(u){return(u<<1)-(4<u?9:0)}function Q(u){for(var q=u.length;0<=--q;)u[q]=0}function j(u){var q=u.state,G=q.pending;G>u.avail_out&&(G=u.avail_out),G!==0&&(o.arraySet(u.output,q.pending_buf,q.pending_out,G,u.next_out),u.next_out+=G,q.pending_out+=G,u.total_out+=G,u.avail_out-=G,q.pending-=G,q.pending===0&&(q.pending_out=0))}function A(u,q){l._tr_flush_block(u,0<=u.block_start?u.block_start:-1,u.strstart-u.block_start,q),u.block_start=u.strstart,j(u.strm)}function X(u,q){u.pending_buf[u.pending++]=q}function Z(u,q){u.pending_buf[u.pending++]=q>>>8&255,u.pending_buf[u.pending++]=255&q}function $(u,q){var G,P,C=u.max_chain_length,z=u.strstart,Y=u.prev_length,J=u.nice_match,O=u.strstart>u.w_size-E?u.strstart-(u.w_size-E):0,te=u.window,ie=u.w_mask,ae=u.prev,ce=u.strstart+H,me=te[z+Y-1],pe=te[z+Y];u.prev_length>=u.good_match&&(C>>=2),J>u.lookahead&&(J=u.lookahead);do if(te[(G=q)+Y]===pe&&te[G+Y-1]===me&&te[G]===te[z]&&te[++G]===te[z+1]){z+=2,G++;do;while(te[++z]===te[++G]&&te[++z]===te[++G]&&te[++z]===te[++G]&&te[++z]===te[++G]&&te[++z]===te[++G]&&te[++z]===te[++G]&&te[++z]===te[++G]&&te[++z]===te[++G]&&z<ce);if(P=H-(ce-z),z=ce-H,Y<P){if(u.match_start=q,J<=(Y=P))break;me=te[z+Y-1],pe=te[z+Y]}}while((q=ae[q&ie])>O&&--C!=0);return Y<=u.lookahead?Y:u.lookahead}function ee(u){var q,G,P,C,z,Y,J,O,te,ie,ae=u.w_size;do{if(C=u.window_size-u.lookahead-u.strstart,u.strstart>=ae+(ae-E)){for(o.arraySet(u.window,u.window,ae,ae,0),u.match_start-=ae,u.strstart-=ae,u.block_start-=ae,q=G=u.hash_size;P=u.head[--q],u.head[q]=ae<=P?P-ae:0,--G;);for(q=G=ae;P=u.prev[--q],u.prev[q]=ae<=P?P-ae:0,--G;);C+=ae}if(u.strm.avail_in===0)break;if(Y=u.strm,J=u.window,O=u.strstart+u.lookahead,te=C,ie=void 0,ie=Y.avail_in,te<ie&&(ie=te),G=ie===0?0:(Y.avail_in-=ie,o.arraySet(J,Y.input,Y.next_in,ie,O),Y.state.wrap===1?Y.adler=f(Y.adler,J,ie,O):Y.state.wrap===2&&(Y.adler=x(Y.adler,J,ie,O)),Y.next_in+=ie,Y.total_in+=ie,ie),u.lookahead+=G,u.lookahead+u.insert>=N)for(z=u.strstart-u.insert,u.ins_h=u.window[z],u.ins_h=(u.ins_h<<u.hash_shift^u.window[z+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[z+N-1])&u.hash_mask,u.prev[z&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=z,z++,u.insert--,!(u.lookahead+u.insert<N)););}while(u.lookahead<E&&u.strm.avail_in!==0)}function re(u,q){for(var G,P;;){if(u.lookahead<E){if(ee(u),u.lookahead<E&&q===k)return d;if(u.lookahead===0)break}if(G=0,u.lookahead>=N&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+N-1])&u.hash_mask,G=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),G!==0&&u.strstart-G<=u.w_size-E&&(u.match_length=$(u,G)),u.match_length>=N)if(P=l._tr_tally(u,u.strstart-u.match_start,u.match_length-N),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=N){for(u.match_length--;u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+N-1])&u.hash_mask,G=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart,--u.match_length!=0;);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else P=l._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(P&&(A(u,!1),u.strm.avail_out===0))return d}return u.insert=u.strstart<N-1?u.strstart:N-1,q===v?(A(u,!0),u.strm.avail_out===0?M:V):u.last_lit&&(A(u,!1),u.strm.avail_out===0)?d:U}function W(u,q){for(var G,P,C;;){if(u.lookahead<E){if(ee(u),u.lookahead<E&&q===k)return d;if(u.lookahead===0)break}if(G=0,u.lookahead>=N&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+N-1])&u.hash_mask,G=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=N-1,G!==0&&u.prev_length<u.max_lazy_match&&u.strstart-G<=u.w_size-E&&(u.match_length=$(u,G),u.match_length<=5&&(u.strategy===1||u.match_length===N&&4096<u.strstart-u.match_start)&&(u.match_length=N-1)),u.prev_length>=N&&u.match_length<=u.prev_length){for(C=u.strstart+u.lookahead-N,P=l._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-N),u.lookahead-=u.prev_length-1,u.prev_length-=2;++u.strstart<=C&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+N-1])&u.hash_mask,G=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),--u.prev_length!=0;);if(u.match_available=0,u.match_length=N-1,u.strstart++,P&&(A(u,!1),u.strm.avail_out===0))return d}else if(u.match_available){if((P=l._tr_tally(u,0,u.window[u.strstart-1]))&&A(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return d}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(P=l._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<N-1?u.strstart:N-1,q===v?(A(u,!0),u.strm.avail_out===0?M:V):u.last_lit&&(A(u,!1),u.strm.avail_out===0)?d:U}function le(u,q,G,P,C){this.good_length=u,this.max_lazy=q,this.nice_length=G,this.max_chain=P,this.func=C}function oe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*_+1)),this.bl_tree=new o.Buf16(2*(2*D+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(I+1),this.heap=new o.Buf16(2*w+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(u){var q;return u&&u.state?(u.total_in=u.total_out=0,u.data_type=m,(q=u.state).pending=0,q.pending_out=0,q.wrap<0&&(q.wrap=-q.wrap),q.status=q.wrap?B:L,u.adler=q.wrap===2?0:1,q.last_flush=k,l._tr_init(q),p):K(u,g)}function he(u){var q=de(u);return q===p&&function(G){G.window_size=2*G.w_size,Q(G.head),G.max_lazy_match=n[G.level].max_lazy,G.good_match=n[G.level].good_length,G.nice_match=n[G.level].nice_length,G.max_chain_length=n[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=N-1,G.match_available=0,G.ins_h=0}(u.state),q}function ve(u,q,G,P,C,z){if(!u)return g;var Y=1;if(q===c&&(q=6),P<0?(Y=0,P=-P):15<P&&(Y=2,P-=16),C<1||S<C||G!==b||P<8||15<P||q<0||9<q||z<0||h<z)return K(u,g);P===8&&(P=9);var J=new oe;return(u.state=J).strm=u,J.wrap=Y,J.gzhead=null,J.w_bits=P,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=C+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+N-1)/N),J.window=new o.Buf8(2*J.w_size),J.head=new o.Buf16(J.hash_size),J.prev=new o.Buf16(J.w_size),J.lit_bufsize=1<<C+6,J.pending_buf_size=4*J.lit_bufsize,J.pending_buf=new o.Buf8(J.pending_buf_size),J.d_buf=1*J.lit_bufsize,J.l_buf=3*J.lit_bufsize,J.level=q,J.strategy=z,J.method=G,he(u)}n=[new le(0,0,0,0,function(u,q){var G=65535;for(G>u.pending_buf_size-5&&(G=u.pending_buf_size-5);;){if(u.lookahead<=1){if(ee(u),u.lookahead===0&&q===k)return d;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var P=u.block_start+G;if((u.strstart===0||u.strstart>=P)&&(u.lookahead=u.strstart-P,u.strstart=P,A(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-E&&(A(u,!1),u.strm.avail_out===0))return d}return u.insert=0,q===v?(A(u,!0),u.strm.avail_out===0?M:V):(u.strstart>u.block_start&&(A(u,!1),u.strm.avail_out),d)}),new le(4,4,8,4,re),new le(4,5,16,8,re),new le(4,6,32,32,re),new le(4,4,16,16,W),new le(8,16,32,32,W),new le(8,16,128,128,W),new le(8,32,128,256,W),new le(32,128,258,1024,W),new le(32,258,258,4096,W)],r.deflateInit=function(u,q){return ve(u,q,b,15,8,0)},r.deflateInit2=ve,r.deflateReset=he,r.deflateResetKeep=de,r.deflateSetHeader=function(u,q){return u&&u.state?u.state.wrap!==2?g:(u.state.gzhead=q,p):g},r.deflate=function(u,q){var G,P,C,z;if(!u||!u.state||5<q||q<0)return u?K(u,g):g;if(P=u.state,!u.output||!u.input&&u.avail_in!==0||P.status===666&&q!==v)return K(u,u.avail_out===0?-5:g);if(P.strm=u,G=P.last_flush,P.last_flush=q,P.status===B)if(P.wrap===2)u.adler=0,X(P,31),X(P,139),X(P,8),P.gzhead?(X(P,(P.gzhead.text?1:0)+(P.gzhead.hcrc?2:0)+(P.gzhead.extra?4:0)+(P.gzhead.name?8:0)+(P.gzhead.comment?16:0)),X(P,255&P.gzhead.time),X(P,P.gzhead.time>>8&255),X(P,P.gzhead.time>>16&255),X(P,P.gzhead.time>>24&255),X(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),X(P,255&P.gzhead.os),P.gzhead.extra&&P.gzhead.extra.length&&(X(P,255&P.gzhead.extra.length),X(P,P.gzhead.extra.length>>8&255)),P.gzhead.hcrc&&(u.adler=x(u.adler,P.pending_buf,P.pending,0)),P.gzindex=0,P.status=69):(X(P,0),X(P,0),X(P,0),X(P,0),X(P,0),X(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),X(P,3),P.status=L);else{var Y=b+(P.w_bits-8<<4)<<8;Y|=(2<=P.strategy||P.level<2?0:P.level<6?1:P.level===6?2:3)<<6,P.strstart!==0&&(Y|=32),Y+=31-Y%31,P.status=L,Z(P,Y),P.strstart!==0&&(Z(P,u.adler>>>16),Z(P,65535&u.adler)),u.adler=1}if(P.status===69)if(P.gzhead.extra){for(C=P.pending;P.gzindex<(65535&P.gzhead.extra.length)&&(P.pending!==P.pending_buf_size||(P.gzhead.hcrc&&P.pending>C&&(u.adler=x(u.adler,P.pending_buf,P.pending-C,C)),j(u),C=P.pending,P.pending!==P.pending_buf_size));)X(P,255&P.gzhead.extra[P.gzindex]),P.gzindex++;P.gzhead.hcrc&&P.pending>C&&(u.adler=x(u.adler,P.pending_buf,P.pending-C,C)),P.gzindex===P.gzhead.extra.length&&(P.gzindex=0,P.status=73)}else P.status=73;if(P.status===73)if(P.gzhead.name){C=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>C&&(u.adler=x(u.adler,P.pending_buf,P.pending-C,C)),j(u),C=P.pending,P.pending===P.pending_buf_size)){z=1;break}z=P.gzindex<P.gzhead.name.length?255&P.gzhead.name.charCodeAt(P.gzindex++):0,X(P,z)}while(z!==0);P.gzhead.hcrc&&P.pending>C&&(u.adler=x(u.adler,P.pending_buf,P.pending-C,C)),z===0&&(P.gzindex=0,P.status=91)}else P.status=91;if(P.status===91)if(P.gzhead.comment){C=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>C&&(u.adler=x(u.adler,P.pending_buf,P.pending-C,C)),j(u),C=P.pending,P.pending===P.pending_buf_size)){z=1;break}z=P.gzindex<P.gzhead.comment.length?255&P.gzhead.comment.charCodeAt(P.gzindex++):0,X(P,z)}while(z!==0);P.gzhead.hcrc&&P.pending>C&&(u.adler=x(u.adler,P.pending_buf,P.pending-C,C)),z===0&&(P.status=103)}else P.status=103;if(P.status===103&&(P.gzhead.hcrc?(P.pending+2>P.pending_buf_size&&j(u),P.pending+2<=P.pending_buf_size&&(X(P,255&u.adler),X(P,u.adler>>8&255),u.adler=0,P.status=L)):P.status=L),P.pending!==0){if(j(u),u.avail_out===0)return P.last_flush=-1,p}else if(u.avail_in===0&&F(q)<=F(G)&&q!==v)return K(u,-5);if(P.status===666&&u.avail_in!==0)return K(u,-5);if(u.avail_in!==0||P.lookahead!==0||q!==k&&P.status!==666){var J=P.strategy===2?function(O,te){for(var ie;;){if(O.lookahead===0&&(ee(O),O.lookahead===0)){if(te===k)return d;break}if(O.match_length=0,ie=l._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,ie&&(A(O,!1),O.strm.avail_out===0))return d}return O.insert=0,te===v?(A(O,!0),O.strm.avail_out===0?M:V):O.last_lit&&(A(O,!1),O.strm.avail_out===0)?d:U}(P,q):P.strategy===3?function(O,te){for(var ie,ae,ce,me,pe=O.window;;){if(O.lookahead<=H){if(ee(O),O.lookahead<=H&&te===k)return d;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=N&&0<O.strstart&&(ae=pe[ce=O.strstart-1])===pe[++ce]&&ae===pe[++ce]&&ae===pe[++ce]){me=O.strstart+H;do;while(ae===pe[++ce]&&ae===pe[++ce]&&ae===pe[++ce]&&ae===pe[++ce]&&ae===pe[++ce]&&ae===pe[++ce]&&ae===pe[++ce]&&ae===pe[++ce]&&ce<me);O.match_length=H-(me-ce),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=N?(ie=l._tr_tally(O,1,O.match_length-N),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(ie=l._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),ie&&(A(O,!1),O.strm.avail_out===0))return d}return O.insert=0,te===v?(A(O,!0),O.strm.avail_out===0?M:V):O.last_lit&&(A(O,!1),O.strm.avail_out===0)?d:U}(P,q):n[P.level].func(P,q);if(J!==M&&J!==V||(P.status=666),J===d||J===M)return u.avail_out===0&&(P.last_flush=-1),p;if(J===U&&(q===1?l._tr_align(P):q!==5&&(l._tr_stored_block(P,0,0,!1),q===3&&(Q(P.head),P.lookahead===0&&(P.strstart=0,P.block_start=0,P.insert=0))),j(u),u.avail_out===0))return P.last_flush=-1,p}return q!==v?p:P.wrap<=0?1:(P.wrap===2?(X(P,255&u.adler),X(P,u.adler>>8&255),X(P,u.adler>>16&255),X(P,u.adler>>24&255),X(P,255&u.total_in),X(P,u.total_in>>8&255),X(P,u.total_in>>16&255),X(P,u.total_in>>24&255)):(Z(P,u.adler>>>16),Z(P,65535&u.adler)),j(u),0<P.wrap&&(P.wrap=-P.wrap),P.pending!==0?p:1)},r.deflateEnd=function(u){var q;return u&&u.state?(q=u.state.status)!==B&&q!==69&&q!==73&&q!==91&&q!==103&&q!==L&&q!==666?K(u,g):(u.state=null,q===L?K(u,-3):p):g},r.deflateSetDictionary=function(u,q){var G,P,C,z,Y,J,O,te,ie=q.length;if(!u||!u.state||(z=(G=u.state).wrap)===2||z===1&&G.status!==B||G.lookahead)return g;for(z===1&&(u.adler=f(u.adler,q,ie,0)),G.wrap=0,ie>=G.w_size&&(z===0&&(Q(G.head),G.strstart=0,G.block_start=0,G.insert=0),te=new o.Buf8(G.w_size),o.arraySet(te,q,ie-G.w_size,G.w_size,0),q=te,ie=G.w_size),Y=u.avail_in,J=u.next_in,O=u.input,u.avail_in=ie,u.next_in=0,u.input=q,ee(G);G.lookahead>=N;){for(P=G.strstart,C=G.lookahead-(N-1);G.ins_h=(G.ins_h<<G.hash_shift^G.window[P+N-1])&G.hash_mask,G.prev[P&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=P,P++,--C;);G.strstart=P,G.lookahead=N-1,ee(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=N-1,G.match_available=0,u.next_in=J,u.input=O,u.avail_in=Y,G.wrap=z,p},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,s,r){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,s,r){s.exports=function(n,o){var l,f,x,y,k,v,p,g,c,h,m,b,S,w,_,D,R,I,N,H,E,B,L,d,U;l=n.state,f=n.next_in,d=n.input,x=f+(n.avail_in-5),y=n.next_out,U=n.output,k=y-(o-n.avail_out),v=y+(n.avail_out-257),p=l.dmax,g=l.wsize,c=l.whave,h=l.wnext,m=l.window,b=l.hold,S=l.bits,w=l.lencode,_=l.distcode,D=(1<<l.lenbits)-1,R=(1<<l.distbits)-1;e:do{S<15&&(b+=d[f++]<<S,S+=8,b+=d[f++]<<S,S+=8),I=w[b&D];t:for(;;){if(b>>>=N=I>>>24,S-=N,(N=I>>>16&255)===0)U[y++]=65535&I;else{if(!(16&N)){if(!(64&N)){I=w[(65535&I)+(b&(1<<N)-1)];continue t}if(32&N){l.mode=12;break e}n.msg="invalid literal/length code",l.mode=30;break e}H=65535&I,(N&=15)&&(S<N&&(b+=d[f++]<<S,S+=8),H+=b&(1<<N)-1,b>>>=N,S-=N),S<15&&(b+=d[f++]<<S,S+=8,b+=d[f++]<<S,S+=8),I=_[b&R];a:for(;;){if(b>>>=N=I>>>24,S-=N,!(16&(N=I>>>16&255))){if(!(64&N)){I=_[(65535&I)+(b&(1<<N)-1)];continue a}n.msg="invalid distance code",l.mode=30;break e}if(E=65535&I,S<(N&=15)&&(b+=d[f++]<<S,(S+=8)<N&&(b+=d[f++]<<S,S+=8)),p<(E+=b&(1<<N)-1)){n.msg="invalid distance too far back",l.mode=30;break e}if(b>>>=N,S-=N,(N=y-k)<E){if(c<(N=E-N)&&l.sane){n.msg="invalid distance too far back",l.mode=30;break e}if(L=m,(B=0)===h){if(B+=g-N,N<H){for(H-=N;U[y++]=m[B++],--N;);B=y-E,L=U}}else if(h<N){if(B+=g+h-N,(N-=h)<H){for(H-=N;U[y++]=m[B++],--N;);if(B=0,h<H){for(H-=N=h;U[y++]=m[B++],--N;);B=y-E,L=U}}}else if(B+=h-N,N<H){for(H-=N;U[y++]=m[B++],--N;);B=y-E,L=U}for(;2<H;)U[y++]=L[B++],U[y++]=L[B++],U[y++]=L[B++],H-=3;H&&(U[y++]=L[B++],1<H&&(U[y++]=L[B++]))}else{for(B=y-E;U[y++]=U[B++],U[y++]=U[B++],U[y++]=U[B++],2<(H-=3););H&&(U[y++]=U[B++],1<H&&(U[y++]=U[B++]))}break}}break}}while(f<x&&y<v);f-=H=S>>3,b&=(1<<(S-=H<<3))-1,n.next_in=f,n.next_out=y,n.avail_in=f<x?x-f+5:5-(f-x),n.avail_out=y<v?v-y+257:257-(y-v),l.hold=b,l.bits=S}},{}],49:[function(e,s,r){var n=e("../utils/common"),o=e("./adler32"),l=e("./crc32"),f=e("./inffast"),x=e("./inftrees"),y=1,k=2,v=0,p=-2,g=1,c=852,h=592;function m(B){return(B>>>24&255)+(B>>>8&65280)+((65280&B)<<8)+((255&B)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(B){var L;return B&&B.state?(L=B.state,B.total_in=B.total_out=L.total=0,B.msg="",L.wrap&&(B.adler=1&L.wrap),L.mode=g,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new n.Buf32(c),L.distcode=L.distdyn=new n.Buf32(h),L.sane=1,L.back=-1,v):p}function w(B){var L;return B&&B.state?((L=B.state).wsize=0,L.whave=0,L.wnext=0,S(B)):p}function _(B,L){var d,U;return B&&B.state?(U=B.state,L<0?(d=0,L=-L):(d=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?p:(U.window!==null&&U.wbits!==L&&(U.window=null),U.wrap=d,U.wbits=L,w(B))):p}function D(B,L){var d,U;return B?(U=new b,(B.state=U).window=null,(d=_(B,L))!==v&&(B.state=null),d):p}var R,I,N=!0;function H(B){if(N){var L;for(R=new n.Buf32(512),I=new n.Buf32(32),L=0;L<144;)B.lens[L++]=8;for(;L<256;)B.lens[L++]=9;for(;L<280;)B.lens[L++]=7;for(;L<288;)B.lens[L++]=8;for(x(y,B.lens,0,288,R,0,B.work,{bits:9}),L=0;L<32;)B.lens[L++]=5;x(k,B.lens,0,32,I,0,B.work,{bits:5}),N=!1}B.lencode=R,B.lenbits=9,B.distcode=I,B.distbits=5}function E(B,L,d,U){var M,V=B.state;return V.window===null&&(V.wsize=1<<V.wbits,V.wnext=0,V.whave=0,V.window=new n.Buf8(V.wsize)),U>=V.wsize?(n.arraySet(V.window,L,d-V.wsize,V.wsize,0),V.wnext=0,V.whave=V.wsize):(U<(M=V.wsize-V.wnext)&&(M=U),n.arraySet(V.window,L,d-U,M,V.wnext),(U-=M)?(n.arraySet(V.window,L,d-U,U,0),V.wnext=U,V.whave=V.wsize):(V.wnext+=M,V.wnext===V.wsize&&(V.wnext=0),V.whave<V.wsize&&(V.whave+=M))),0}r.inflateReset=w,r.inflateReset2=_,r.inflateResetKeep=S,r.inflateInit=function(B){return D(B,15)},r.inflateInit2=D,r.inflate=function(B,L){var d,U,M,V,K,F,Q,j,A,X,Z,$,ee,re,W,le,oe,de,he,ve,u,q,G,P,C=0,z=new n.Buf8(4),Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return p;(d=B.state).mode===12&&(d.mode=13),K=B.next_out,M=B.output,Q=B.avail_out,V=B.next_in,U=B.input,F=B.avail_in,j=d.hold,A=d.bits,X=F,Z=Q,q=v;e:for(;;)switch(d.mode){case g:if(d.wrap===0){d.mode=13;break}for(;A<16;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}if(2&d.wrap&&j===35615){z[d.check=0]=255&j,z[1]=j>>>8&255,d.check=l(d.check,z,2,0),A=j=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&j)<<8)+(j>>8))%31){B.msg="incorrect header check",d.mode=30;break}if((15&j)!=8){B.msg="unknown compression method",d.mode=30;break}if(A-=4,u=8+(15&(j>>>=4)),d.wbits===0)d.wbits=u;else if(u>d.wbits){B.msg="invalid window size",d.mode=30;break}d.dmax=1<<u,B.adler=d.check=1,d.mode=512&j?10:12,A=j=0;break;case 2:for(;A<16;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}if(d.flags=j,(255&d.flags)!=8){B.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){B.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=j>>8&1),512&d.flags&&(z[0]=255&j,z[1]=j>>>8&255,d.check=l(d.check,z,2,0)),A=j=0,d.mode=3;case 3:for(;A<32;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}d.head&&(d.head.time=j),512&d.flags&&(z[0]=255&j,z[1]=j>>>8&255,z[2]=j>>>16&255,z[3]=j>>>24&255,d.check=l(d.check,z,4,0)),A=j=0,d.mode=4;case 4:for(;A<16;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}d.head&&(d.head.xflags=255&j,d.head.os=j>>8),512&d.flags&&(z[0]=255&j,z[1]=j>>>8&255,d.check=l(d.check,z,2,0)),A=j=0,d.mode=5;case 5:if(1024&d.flags){for(;A<16;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}d.length=j,d.head&&(d.head.extra_len=j),512&d.flags&&(z[0]=255&j,z[1]=j>>>8&255,d.check=l(d.check,z,2,0)),A=j=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&(F<($=d.length)&&($=F),$&&(d.head&&(u=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Array(d.head.extra_len)),n.arraySet(d.head.extra,U,V,$,u)),512&d.flags&&(d.check=l(d.check,U,$,V)),F-=$,V+=$,d.length-=$),d.length))break e;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(F===0)break e;for($=0;u=U[V+$++],d.head&&u&&d.length<65536&&(d.head.name+=String.fromCharCode(u)),u&&$<F;);if(512&d.flags&&(d.check=l(d.check,U,$,V)),F-=$,V+=$,u)break e}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(F===0)break e;for($=0;u=U[V+$++],d.head&&u&&d.length<65536&&(d.head.comment+=String.fromCharCode(u)),u&&$<F;);if(512&d.flags&&(d.check=l(d.check,U,$,V)),F-=$,V+=$,u)break e}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;A<16;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}if(j!==(65535&d.check)){B.msg="header crc mismatch",d.mode=30;break}A=j=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),B.adler=d.check=0,d.mode=12;break;case 10:for(;A<32;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}B.adler=d.check=m(j),A=j=0,d.mode=11;case 11:if(d.havedict===0)return B.next_out=K,B.avail_out=Q,B.next_in=V,B.avail_in=F,d.hold=j,d.bits=A,2;B.adler=d.check=1,d.mode=12;case 12:if(L===5||L===6)break e;case 13:if(d.last){j>>>=7&A,A-=7&A,d.mode=27;break}for(;A<3;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}switch(d.last=1&j,A-=1,3&(j>>>=1)){case 0:d.mode=14;break;case 1:if(H(d),d.mode=20,L!==6)break;j>>>=2,A-=2;break e;case 2:d.mode=17;break;case 3:B.msg="invalid block type",d.mode=30}j>>>=2,A-=2;break;case 14:for(j>>>=7&A,A-=7&A;A<32;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}if((65535&j)!=(j>>>16^65535)){B.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&j,A=j=0,d.mode=15,L===6)break e;case 15:d.mode=16;case 16:if($=d.length){if(F<$&&($=F),Q<$&&($=Q),$===0)break e;n.arraySet(M,U,V,$,K),F-=$,V+=$,Q-=$,K+=$,d.length-=$;break}d.mode=12;break;case 17:for(;A<14;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}if(d.nlen=257+(31&j),j>>>=5,A-=5,d.ndist=1+(31&j),j>>>=5,A-=5,d.ncode=4+(15&j),j>>>=4,A-=4,286<d.nlen||30<d.ndist){B.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;A<3;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}d.lens[Y[d.have++]]=7&j,j>>>=3,A-=3}for(;d.have<19;)d.lens[Y[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,G={bits:d.lenbits},q=x(0,d.lens,0,19,d.lencode,0,d.work,G),d.lenbits=G.bits,q){B.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;le=(C=d.lencode[j&(1<<d.lenbits)-1])>>>16&255,oe=65535&C,!((W=C>>>24)<=A);){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}if(oe<16)j>>>=W,A-=W,d.lens[d.have++]=oe;else{if(oe===16){for(P=W+2;A<P;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}if(j>>>=W,A-=W,d.have===0){B.msg="invalid bit length repeat",d.mode=30;break}u=d.lens[d.have-1],$=3+(3&j),j>>>=2,A-=2}else if(oe===17){for(P=W+3;A<P;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}A-=W,u=0,$=3+(7&(j>>>=W)),j>>>=3,A-=3}else{for(P=W+7;A<P;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}A-=W,u=0,$=11+(127&(j>>>=W)),j>>>=7,A-=7}if(d.have+$>d.nlen+d.ndist){B.msg="invalid bit length repeat",d.mode=30;break}for(;$--;)d.lens[d.have++]=u}}if(d.mode===30)break;if(d.lens[256]===0){B.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,G={bits:d.lenbits},q=x(y,d.lens,0,d.nlen,d.lencode,0,d.work,G),d.lenbits=G.bits,q){B.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,G={bits:d.distbits},q=x(k,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,G),d.distbits=G.bits,q){B.msg="invalid distances set",d.mode=30;break}if(d.mode=20,L===6)break e;case 20:d.mode=21;case 21:if(6<=F&&258<=Q){B.next_out=K,B.avail_out=Q,B.next_in=V,B.avail_in=F,d.hold=j,d.bits=A,f(B,Z),K=B.next_out,M=B.output,Q=B.avail_out,V=B.next_in,U=B.input,F=B.avail_in,j=d.hold,A=d.bits,d.mode===12&&(d.back=-1);break}for(d.back=0;le=(C=d.lencode[j&(1<<d.lenbits)-1])>>>16&255,oe=65535&C,!((W=C>>>24)<=A);){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}if(le&&!(240&le)){for(de=W,he=le,ve=oe;le=(C=d.lencode[ve+((j&(1<<de+he)-1)>>de)])>>>16&255,oe=65535&C,!(de+(W=C>>>24)<=A);){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}j>>>=de,A-=de,d.back+=de}if(j>>>=W,A-=W,d.back+=W,d.length=oe,le===0){d.mode=26;break}if(32&le){d.back=-1,d.mode=12;break}if(64&le){B.msg="invalid literal/length code",d.mode=30;break}d.extra=15&le,d.mode=22;case 22:if(d.extra){for(P=d.extra;A<P;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}d.length+=j&(1<<d.extra)-1,j>>>=d.extra,A-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;le=(C=d.distcode[j&(1<<d.distbits)-1])>>>16&255,oe=65535&C,!((W=C>>>24)<=A);){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}if(!(240&le)){for(de=W,he=le,ve=oe;le=(C=d.distcode[ve+((j&(1<<de+he)-1)>>de)])>>>16&255,oe=65535&C,!(de+(W=C>>>24)<=A);){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}j>>>=de,A-=de,d.back+=de}if(j>>>=W,A-=W,d.back+=W,64&le){B.msg="invalid distance code",d.mode=30;break}d.offset=oe,d.extra=15&le,d.mode=24;case 24:if(d.extra){for(P=d.extra;A<P;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}d.offset+=j&(1<<d.extra)-1,j>>>=d.extra,A-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){B.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(Q===0)break e;if($=Z-Q,d.offset>$){if(($=d.offset-$)>d.whave&&d.sane){B.msg="invalid distance too far back",d.mode=30;break}ee=$>d.wnext?($-=d.wnext,d.wsize-$):d.wnext-$,$>d.length&&($=d.length),re=d.window}else re=M,ee=K-d.offset,$=d.length;for(Q<$&&($=Q),Q-=$,d.length-=$;M[K++]=re[ee++],--$;);d.length===0&&(d.mode=21);break;case 26:if(Q===0)break e;M[K++]=d.length,Q--,d.mode=21;break;case 27:if(d.wrap){for(;A<32;){if(F===0)break e;F--,j|=U[V++]<<A,A+=8}if(Z-=Q,B.total_out+=Z,d.total+=Z,Z&&(B.adler=d.check=d.flags?l(d.check,M,Z,K-Z):o(d.check,M,Z,K-Z)),Z=Q,(d.flags?j:m(j))!==d.check){B.msg="incorrect data check",d.mode=30;break}A=j=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;A<32;){if(F===0)break e;F--,j+=U[V++]<<A,A+=8}if(j!==(4294967295&d.total)){B.msg="incorrect length check",d.mode=30;break}A=j=0}d.mode=29;case 29:q=1;break e;case 30:q=-3;break e;case 31:return-4;case 32:default:return p}return B.next_out=K,B.avail_out=Q,B.next_in=V,B.avail_in=F,d.hold=j,d.bits=A,(d.wsize||Z!==B.avail_out&&d.mode<30&&(d.mode<27||L!==4))&&E(B,B.output,B.next_out,Z-B.avail_out)?(d.mode=31,-4):(X-=B.avail_in,Z-=B.avail_out,B.total_in+=X,B.total_out+=Z,d.total+=Z,d.wrap&&Z&&(B.adler=d.check=d.flags?l(d.check,M,Z,B.next_out-Z):o(d.check,M,Z,B.next_out-Z)),B.data_type=d.bits+(d.last?64:0)+(d.mode===12?128:0)+(d.mode===20||d.mode===15?256:0),(X==0&&Z===0||L===4)&&q===v&&(q=-5),q)},r.inflateEnd=function(B){if(!B||!B.state)return p;var L=B.state;return L.window&&(L.window=null),B.state=null,v},r.inflateGetHeader=function(B,L){var d;return B&&B.state&&2&(d=B.state).wrap?((d.head=L).done=!1,v):p},r.inflateSetDictionary=function(B,L){var d,U=L.length;return B&&B.state?(d=B.state).wrap!==0&&d.mode!==11?p:d.mode===11&&o(1,L,U,0)!==d.check?-3:E(B,L,U,U)?(d.mode=31,-4):(d.havedict=1,v):p},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,s,r){var n=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],x=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(y,k,v,p,g,c,h,m){var b,S,w,_,D,R,I,N,H,E=m.bits,B=0,L=0,d=0,U=0,M=0,V=0,K=0,F=0,Q=0,j=0,A=null,X=0,Z=new n.Buf16(16),$=new n.Buf16(16),ee=null,re=0;for(B=0;B<=15;B++)Z[B]=0;for(L=0;L<p;L++)Z[k[v+L]]++;for(M=E,U=15;1<=U&&Z[U]===0;U--);if(U<M&&(M=U),U===0)return g[c++]=20971520,g[c++]=20971520,m.bits=1,0;for(d=1;d<U&&Z[d]===0;d++);for(M<d&&(M=d),B=F=1;B<=15;B++)if(F<<=1,(F-=Z[B])<0)return-1;if(0<F&&(y===0||U!==1))return-1;for($[1]=0,B=1;B<15;B++)$[B+1]=$[B]+Z[B];for(L=0;L<p;L++)k[v+L]!==0&&(h[$[k[v+L]]++]=L);if(R=y===0?(A=ee=h,19):y===1?(A=o,X-=257,ee=l,re-=257,256):(A=f,ee=x,-1),B=d,D=c,K=L=j=0,w=-1,_=(Q=1<<(V=M))-1,y===1&&852<Q||y===2&&592<Q)return 1;for(;;){for(I=B-K,H=h[L]<R?(N=0,h[L]):h[L]>R?(N=ee[re+h[L]],A[X+h[L]]):(N=96,0),b=1<<B-K,d=S=1<<V;g[D+(j>>K)+(S-=b)]=I<<24|N<<16|H|0,S!==0;);for(b=1<<B-1;j&b;)b>>=1;if(b!==0?(j&=b-1,j+=b):j=0,L++,--Z[B]==0){if(B===U)break;B=k[v+h[L]]}if(M<B&&(j&_)!==w){for(K===0&&(K=M),D+=d,F=1<<(V=B-K);V+K<U&&!((F-=Z[V+K])<=0);)V++,F<<=1;if(Q+=1<<V,y===1&&852<Q||y===2&&592<Q)return 1;g[w=j&_]=M<<24|V<<16|D-c|0}}return j!==0&&(g[D+j]=B-K<<24|64<<16|0),m.bits=M,0}},{"../utils/common":41}],51:[function(e,s,r){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,s,r){var n=e("../utils/common"),o=0,l=1;function f(C){for(var z=C.length;0<=--z;)C[z]=0}var x=0,y=29,k=256,v=k+1+y,p=30,g=19,c=2*v+1,h=15,m=16,b=7,S=256,w=16,_=17,D=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(v+2));f(E);var B=new Array(2*p);f(B);var L=new Array(512);f(L);var d=new Array(256);f(d);var U=new Array(y);f(U);var M,V,K,F=new Array(p);function Q(C,z,Y,J,O){this.static_tree=C,this.extra_bits=z,this.extra_base=Y,this.elems=J,this.max_length=O,this.has_stree=C&&C.length}function j(C,z){this.dyn_tree=C,this.max_code=0,this.stat_desc=z}function A(C){return C<256?L[C]:L[256+(C>>>7)]}function X(C,z){C.pending_buf[C.pending++]=255&z,C.pending_buf[C.pending++]=z>>>8&255}function Z(C,z,Y){C.bi_valid>m-Y?(C.bi_buf|=z<<C.bi_valid&65535,X(C,C.bi_buf),C.bi_buf=z>>m-C.bi_valid,C.bi_valid+=Y-m):(C.bi_buf|=z<<C.bi_valid&65535,C.bi_valid+=Y)}function $(C,z,Y){Z(C,Y[2*z],Y[2*z+1])}function ee(C,z){for(var Y=0;Y|=1&C,C>>>=1,Y<<=1,0<--z;);return Y>>>1}function re(C,z,Y){var J,O,te=new Array(h+1),ie=0;for(J=1;J<=h;J++)te[J]=ie=ie+Y[J-1]<<1;for(O=0;O<=z;O++){var ae=C[2*O+1];ae!==0&&(C[2*O]=ee(te[ae]++,ae))}}function W(C){var z;for(z=0;z<v;z++)C.dyn_ltree[2*z]=0;for(z=0;z<p;z++)C.dyn_dtree[2*z]=0;for(z=0;z<g;z++)C.bl_tree[2*z]=0;C.dyn_ltree[2*S]=1,C.opt_len=C.static_len=0,C.last_lit=C.matches=0}function le(C){8<C.bi_valid?X(C,C.bi_buf):0<C.bi_valid&&(C.pending_buf[C.pending++]=C.bi_buf),C.bi_buf=0,C.bi_valid=0}function oe(C,z,Y,J){var O=2*z,te=2*Y;return C[O]<C[te]||C[O]===C[te]&&J[z]<=J[Y]}function de(C,z,Y){for(var J=C.heap[Y],O=Y<<1;O<=C.heap_len&&(O<C.heap_len&&oe(z,C.heap[O+1],C.heap[O],C.depth)&&O++,!oe(z,J,C.heap[O],C.depth));)C.heap[Y]=C.heap[O],Y=O,O<<=1;C.heap[Y]=J}function he(C,z,Y){var J,O,te,ie,ae=0;if(C.last_lit!==0)for(;J=C.pending_buf[C.d_buf+2*ae]<<8|C.pending_buf[C.d_buf+2*ae+1],O=C.pending_buf[C.l_buf+ae],ae++,J===0?$(C,O,z):($(C,(te=d[O])+k+1,z),(ie=R[te])!==0&&Z(C,O-=U[te],ie),$(C,te=A(--J),Y),(ie=I[te])!==0&&Z(C,J-=F[te],ie)),ae<C.last_lit;);$(C,S,z)}function ve(C,z){var Y,J,O,te=z.dyn_tree,ie=z.stat_desc.static_tree,ae=z.stat_desc.has_stree,ce=z.stat_desc.elems,me=-1;for(C.heap_len=0,C.heap_max=c,Y=0;Y<ce;Y++)te[2*Y]!==0?(C.heap[++C.heap_len]=me=Y,C.depth[Y]=0):te[2*Y+1]=0;for(;C.heap_len<2;)te[2*(O=C.heap[++C.heap_len]=me<2?++me:0)]=1,C.depth[O]=0,C.opt_len--,ae&&(C.static_len-=ie[2*O+1]);for(z.max_code=me,Y=C.heap_len>>1;1<=Y;Y--)de(C,te,Y);for(O=ce;Y=C.heap[1],C.heap[1]=C.heap[C.heap_len--],de(C,te,1),J=C.heap[1],C.heap[--C.heap_max]=Y,C.heap[--C.heap_max]=J,te[2*O]=te[2*Y]+te[2*J],C.depth[O]=(C.depth[Y]>=C.depth[J]?C.depth[Y]:C.depth[J])+1,te[2*Y+1]=te[2*J+1]=O,C.heap[1]=O++,de(C,te,1),2<=C.heap_len;);C.heap[--C.heap_max]=C.heap[1],function(pe,Be){var ye,_e,Ee,ge,Re,Me,Ce=Be.dyn_tree,Ge=Be.max_code,ct=Be.stat_desc.static_tree,qe=Be.stat_desc.has_stree,Ht=Be.stat_desc.extra_bits,xt=Be.stat_desc.extra_base,Ze=Be.stat_desc.max_length,et=0;for(ge=0;ge<=h;ge++)pe.bl_count[ge]=0;for(Ce[2*pe.heap[pe.heap_max]+1]=0,ye=pe.heap_max+1;ye<c;ye++)Ze<(ge=Ce[2*Ce[2*(_e=pe.heap[ye])+1]+1]+1)&&(ge=Ze,et++),Ce[2*_e+1]=ge,Ge<_e||(pe.bl_count[ge]++,Re=0,xt<=_e&&(Re=Ht[_e-xt]),Me=Ce[2*_e],pe.opt_len+=Me*(ge+Re),qe&&(pe.static_len+=Me*(ct[2*_e+1]+Re)));if(et!==0){do{for(ge=Ze-1;pe.bl_count[ge]===0;)ge--;pe.bl_count[ge]--,pe.bl_count[ge+1]+=2,pe.bl_count[Ze]--,et-=2}while(0<et);for(ge=Ze;ge!==0;ge--)for(_e=pe.bl_count[ge];_e!==0;)Ge<(Ee=pe.heap[--ye])||(Ce[2*Ee+1]!==ge&&(pe.opt_len+=(ge-Ce[2*Ee+1])*Ce[2*Ee],Ce[2*Ee+1]=ge),_e--)}}(C,z),re(te,me,C.bl_count)}function u(C,z,Y){var J,O,te=-1,ie=z[1],ae=0,ce=7,me=4;for(ie===0&&(ce=138,me=3),z[2*(Y+1)+1]=65535,J=0;J<=Y;J++)O=ie,ie=z[2*(J+1)+1],++ae<ce&&O===ie||(ae<me?C.bl_tree[2*O]+=ae:O!==0?(O!==te&&C.bl_tree[2*O]++,C.bl_tree[2*w]++):ae<=10?C.bl_tree[2*_]++:C.bl_tree[2*D]++,te=O,me=(ae=0)===ie?(ce=138,3):O===ie?(ce=6,3):(ce=7,4))}function q(C,z,Y){var J,O,te=-1,ie=z[1],ae=0,ce=7,me=4;for(ie===0&&(ce=138,me=3),J=0;J<=Y;J++)if(O=ie,ie=z[2*(J+1)+1],!(++ae<ce&&O===ie)){if(ae<me)for(;$(C,O,C.bl_tree),--ae!=0;);else O!==0?(O!==te&&($(C,O,C.bl_tree),ae--),$(C,w,C.bl_tree),Z(C,ae-3,2)):ae<=10?($(C,_,C.bl_tree),Z(C,ae-3,3)):($(C,D,C.bl_tree),Z(C,ae-11,7));te=O,me=(ae=0)===ie?(ce=138,3):O===ie?(ce=6,3):(ce=7,4)}}f(F);var G=!1;function P(C,z,Y,J){Z(C,(x<<1)+(J?1:0),3),function(O,te,ie,ae){le(O),ae&&(X(O,ie),X(O,~ie)),n.arraySet(O.pending_buf,O.window,te,ie,O.pending),O.pending+=ie}(C,z,Y,!0)}r._tr_init=function(C){G||(function(){var z,Y,J,O,te,ie=new Array(h+1);for(O=J=0;O<y-1;O++)for(U[O]=J,z=0;z<1<<R[O];z++)d[J++]=O;for(d[J-1]=O,O=te=0;O<16;O++)for(F[O]=te,z=0;z<1<<I[O];z++)L[te++]=O;for(te>>=7;O<p;O++)for(F[O]=te<<7,z=0;z<1<<I[O]-7;z++)L[256+te++]=O;for(Y=0;Y<=h;Y++)ie[Y]=0;for(z=0;z<=143;)E[2*z+1]=8,z++,ie[8]++;for(;z<=255;)E[2*z+1]=9,z++,ie[9]++;for(;z<=279;)E[2*z+1]=7,z++,ie[7]++;for(;z<=287;)E[2*z+1]=8,z++,ie[8]++;for(re(E,v+1,ie),z=0;z<p;z++)B[2*z+1]=5,B[2*z]=ee(z,5);M=new Q(E,R,k+1,v,h),V=new Q(B,I,0,p,h),K=new Q(new Array(0),N,0,g,b)}(),G=!0),C.l_desc=new j(C.dyn_ltree,M),C.d_desc=new j(C.dyn_dtree,V),C.bl_desc=new j(C.bl_tree,K),C.bi_buf=0,C.bi_valid=0,W(C)},r._tr_stored_block=P,r._tr_flush_block=function(C,z,Y,J){var O,te,ie=0;0<C.level?(C.strm.data_type===2&&(C.strm.data_type=function(ae){var ce,me=4093624447;for(ce=0;ce<=31;ce++,me>>>=1)if(1&me&&ae.dyn_ltree[2*ce]!==0)return o;if(ae.dyn_ltree[18]!==0||ae.dyn_ltree[20]!==0||ae.dyn_ltree[26]!==0)return l;for(ce=32;ce<k;ce++)if(ae.dyn_ltree[2*ce]!==0)return l;return o}(C)),ve(C,C.l_desc),ve(C,C.d_desc),ie=function(ae){var ce;for(u(ae,ae.dyn_ltree,ae.l_desc.max_code),u(ae,ae.dyn_dtree,ae.d_desc.max_code),ve(ae,ae.bl_desc),ce=g-1;3<=ce&&ae.bl_tree[2*H[ce]+1]===0;ce--);return ae.opt_len+=3*(ce+1)+5+5+4,ce}(C),O=C.opt_len+3+7>>>3,(te=C.static_len+3+7>>>3)<=O&&(O=te)):O=te=Y+5,Y+4<=O&&z!==-1?P(C,z,Y,J):C.strategy===4||te===O?(Z(C,2+(J?1:0),3),he(C,E,B)):(Z(C,4+(J?1:0),3),function(ae,ce,me,pe){var Be;for(Z(ae,ce-257,5),Z(ae,me-1,5),Z(ae,pe-4,4),Be=0;Be<pe;Be++)Z(ae,ae.bl_tree[2*H[Be]+1],3);q(ae,ae.dyn_ltree,ce-1),q(ae,ae.dyn_dtree,me-1)}(C,C.l_desc.max_code+1,C.d_desc.max_code+1,ie+1),he(C,C.dyn_ltree,C.dyn_dtree)),W(C),J&&le(C)},r._tr_tally=function(C,z,Y){return C.pending_buf[C.d_buf+2*C.last_lit]=z>>>8&255,C.pending_buf[C.d_buf+2*C.last_lit+1]=255&z,C.pending_buf[C.l_buf+C.last_lit]=255&Y,C.last_lit++,z===0?C.dyn_ltree[2*Y]++:(C.matches++,z--,C.dyn_ltree[2*(d[Y]+k+1)]++,C.dyn_dtree[2*A(z)]++),C.last_lit===C.lit_bufsize-1},r._tr_align=function(C){Z(C,2,3),$(C,S,E),function(z){z.bi_valid===16?(X(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):8<=z.bi_valid&&(z.pending_buf[z.pending++]=255&z.bi_buf,z.bi_buf>>=8,z.bi_valid-=8)}(C)}},{"../utils/common":41}],53:[function(e,s,r){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,s,r){(function(n){(function(o,l){if(!o.setImmediate){var f,x,y,k,v=1,p={},g=!1,c=o.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(o);h=h&&h.setTimeout?h:o,f={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){b(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,_=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=_,w}}()?(k="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",S,!1):o.attachEvent("onmessage",S),function(w){o.postMessage(k+w,"*")}):o.MessageChannel?((y=new MessageChannel).port1.onmessage=function(w){b(w.data)},function(w){y.port2.postMessage(w)}):c&&"onreadystatechange"in c.createElement("script")?(x=c.documentElement,function(w){var _=c.createElement("script");_.onreadystatechange=function(){b(w),_.onreadystatechange=null,x.removeChild(_),_=null},x.appendChild(_)}):function(w){setTimeout(b,0,w)},h.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var _=new Array(arguments.length-1),D=0;D<_.length;D++)_[D]=arguments[D+1];var R={callback:w,args:_};return p[v]=R,f(v),v++},h.clearImmediate=m}function m(w){delete p[w]}function b(w){if(g)setTimeout(b,0,w);else{var _=p[w];if(_){g=!0;try{(function(D){var R=D.callback,I=D.args;switch(I.length){case 0:R();break;case 1:R(I[0]);break;case 2:R(I[0],I[1]);break;case 3:R(I[0],I[1],I[2]);break;default:R.apply(l,I)}})(_)}finally{m(w),g=!1}}}}function S(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(k)===0&&b(+w.data.slice(k.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof Bt<"u"?Bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(En);var No=En.exports;const Vt=dr(No),Ro="1.0.0";function Do(t){if(typeof t!="object"||t===null)return!1;const a=t;if(typeof a.version!="string"||typeof a.exportedAt!="number"||typeof a.pattern!="object"||a.pattern===null)return!1;const e=a.pattern;if(typeof e.id!="string"||typeof e.name!="string"||typeof e.bpm!="number"||typeof e.bars!="number"||!Array.isArray(e.grid)||!Array.isArray(e.drums))return!1;if(a.bgmConfig!==void 0){const s=a.bgmConfig;if(typeof s!="object"||typeof s.offsetMs!="number"||typeof s.volumePct!="number")return!1}if(a.bgmFile!==void 0){const s=a.bgmFile;if(!s||typeof s.id!="string"||typeof s.name!="string"||typeof s.size!="number"||typeof s.type!="string"||typeof s.data!="string"||typeof s.byteLength!="number"||s.data.length===0)return!1}return!0}async function Lo(t,a){try{let e,s=a;if(a!=null&&a.fileId){const x=await In(a.fileId);if(x){const y=await x.blob.arrayBuffer(),v=new Uint8Array(y).reduce((g,c)=>g+String.fromCharCode(c),""),p=btoa(v);e={id:x.id,name:x.name,size:x.size,type:x.type,data:p,byteLength:y.byteLength}}else s={offsetMs:a.offsetMs,volumePct:a.volumePct}}const r={version:Ro,exportedAt:Date.now(),pattern:t,bgmConfig:s,bgmFile:e},n=new Vt;n.file("pattern.json",JSON.stringify(r,null,2));const o=await n.generateAsync({type:"blob"}),l=URL.createObjectURL(o),f=document.createElement("a");f.href=l,f.download=`${t.name}.zip`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(l)}catch(e){throw console.error("[Pattern Backup] Export failed:",e),e}}async function zo(t){var a,e,s;try{const n=(await Vt.loadAsync(t)).file("pattern.json");if(!n)throw new Error("Invalid pattern file: missing pattern.json");const o=await n.async("string"),l=JSON.parse(o);if(!Do(l))throw new Error("Invalid backup file: data structure validation failed");const f=l;let x;if(f.bgmConfig&&!f.bgmFile)x=void 0;else if(f.bgmFile){const y=atob(f.bgmFile.data),k=new Uint8Array(y.length);for(let c=0;c<y.length;c++)k[c]=y.charCodeAt(c);let v=f.bgmFile.type;if(!v||v===""){const c=(a=f.bgmFile.name.split(".").pop())==null?void 0:a.toLowerCase();c==="mp3"?v="audio/mpeg":c==="wav"?v="audio/wav":c==="ogg"?v="audio/ogg":c==="m4a"||c==="mp4"?v="audio/mp4":v="audio/mpeg"}const{id:p,meta:g}=await Nn(f.bgmFile.data,f.bgmFile.name,v);x={fileId:p,offsetMs:((e=f.bgmConfig)==null?void 0:e.offsetMs)??0,volumePct:((s=f.bgmConfig)==null?void 0:s.volumePct)??100,meta:g}}return{pattern:f.pattern,bgmConfig:x}}catch(r){throw console.error("[Pattern Backup] Import failed:",r),r}}function Eo({patterns:t,currentPatternId:a,onSelectPattern:e,onSelectDraft:s,onAddPattern:r,onImportPattern:n,onImportPatternWithBgm:o,isDraftMode:l}){const[f,x]=T.useState(!1),[y,k]=T.useState(""),v=T.useRef(null),p=T.useRef(null),g=w=>{e(w)},c=async()=>{var w;(w=p.current)==null||w.click()},h=async w=>{var D;const _=(D=w.target.files)==null?void 0:D[0];if(_){if(!_.name.endsWith(".zip")){alert("Please select a valid pattern file (.zip format)");return}try{const{pattern:R,bgmConfig:I}=await zo(_),N=JSON.stringify(R);o?o(N,I):n&&n(N),console.log("Pattern imported from zip file",{bgmConfig:I})}catch(R){console.error("Failed to import pattern:",R),alert("Failed to import pattern file. Please check the console for details.")}finally{p.current&&(p.current.value="")}}},m=()=>{y.trim()&&n&&n(y.trim()),x(!1),k("")},b=()=>{x(!1),k("")};T.useEffect(()=>{f&&v.current&&v.current.focus()},[f]);const S=[...t].sort((w,_)=>w.name.localeCompare(_.name));return i.jsxs("div",{className:"pattern-tabs",children:[i.jsx("input",{ref:p,type:"file",accept:".zip",style:{display:"none"},onChange:h}),i.jsx("button",{className:`pattern-tab draft-tab ${l?"active":""}`,onClick:s,"aria-label":"Draft Pattern",children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",children:i.jsx("circle",{cx:"6",cy:"6",r:"4.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})}),S.length>0&&i.jsx("div",{className:"pattern-tabs-content",children:S.map(w=>{const _=!l&&w.id===a;return i.jsx("button",{className:`pattern-tab ${_?"active":""}`,onClick:()=>g(w),"aria-label":`Pattern ${w.name}`,children:w.name},w.id)})}),f?i.jsxs("div",{className:"import-input-container",children:[i.jsx("input",{ref:v,type:"text",className:"import-input",value:y,onChange:w=>k(w.target.value),onKeyDown:w=>{w.key==="Enter"?m():w.key==="Escape"&&b()},onBlur:()=>{setTimeout(()=>{y.trim()||b()},150)},placeholder:"Paste..."}),i.jsx("button",{className:"action-button confirm-button",onClick:m,"aria-label":"Confirm Import",children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"action-button load-button",onClick:c,"aria-label":"Load New Pattern",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 3v12"}),i.jsx("polyline",{points:"8 7 12 3 16 7"}),i.jsx("path",{d:"M4 21h16v0"})]})}),i.jsx("button",{className:"action-button save-button",onClick:r,"aria-label":"Create New Pattern",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})]})}function Mo({config:t,isLoading:a,isLoaded:e,error:s,onUpload:r,onOffsetChange:n,onVolumeChange:o,onDelete:l,masterVolume:f,onMasterVolumeChange:x,isPlaying:y}){var j;const k=T.useRef(null),[v,p]=T.useState(!1),[g,c]=T.useState("0"),h=A=>{const X=Ha((t.volumePct??100)+A,0,100);o(X)},m=A=>{const X=Ha(f+A,0,100);x(X)},b=A=>{const X=(t.offsetMs??0)+A;n(X)},S=Ae(()=>h(-10),{clickCallback:()=>h(-10)}),w=Ae(()=>h(10),{clickCallback:()=>h(10)}),_=Ae(()=>m(-10),{clickCallback:()=>m(-10)}),D=Ae(()=>m(10),{clickCallback:()=>m(10)}),R=Ae(()=>b(-100),{clickCallback:()=>b(-10)}),I=Ae(()=>b(100),{clickCallback:()=>b(10)}),N=A=>{var Z;const X=(Z=A.target.files)==null?void 0:Z[0];X&&r(X),A.target.value=""},H=(((j=t.meta)==null?void 0:j.name)??"").replace(/\.[^/.]+$/,""),E=Math.round(t.volumePct??100),B=Math.round(f),d=-(t.offsetMs??0),U=Math.abs(d)>=1e3?`${(d/1e3).toFixed(3)}s`:`${d}ms`,M=Math.round(d).toString(),V=()=>{y||(c(M),p(!0))},K=()=>{const A=Number(g);if(!Number.isFinite(A)){p(!1);return}n(-A),p(!1)},F=()=>{const A=t.volumePct??100;o(A===0?100:0)},Q=()=>{x(f===0?100:0)};return i.jsxs("div",{className:"bgm-controls-container",children:[i.jsxs("div",{className:"bgm-controls",children:[i.jsxs("div",{className:"bgm-controls-left",children:[t.fileId&&e&&!a?i.jsx("button",{type:"button",className:"bgm-delete-button",onClick:l,"aria-label":"Delete background music",title:"Delete background music",disabled:!t.fileId||a,children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("polyline",{points:"3 6 5 6 21 6"}),i.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})}):i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"bgm-control-button",onClick:()=>{var A;return(A=k.current)==null?void 0:A.click()},"aria-label":"Upload background music",title:"Upload background music",disabled:a,children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 3v12"}),i.jsx("polyline",{points:"8 7 12 3 16 7"}),i.jsx("path",{d:"M4 21h16v0"})]})}),i.jsx("input",{ref:k,className:"bgm-file-input",type:"file",accept:"audio/mpeg",onChange:N})]}),H&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"bgm-file-name",children:H||""}),i.jsxs("div",{className:"bgm-control-group",children:[i.jsx("button",{type:"button",className:"bgm-control-button","aria-label":"Decrease background music volume",title:"Decrease background music volume",...S,children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),i.jsx("div",{className:"bgm-control-center",children:i.jsx("button",{type:"button",className:"bgm-volume-display",onClick:F,"aria-label":"Toggle BGM volume",title:"Click to toggle 0%/100%",children:i.jsxs("span",{className:"bgm-control-value",children:[E,"%"]})})}),i.jsx("button",{type:"button",className:"bgm-control-button","aria-label":"Increase background music volume",title:"Increase background music volume",...w,children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),i.jsxs("div",{className:"bgm-control-group",children:[i.jsx("button",{type:"button",className:"bgm-control-button","aria-label":"Decrease background music offset",title:"Decrease background music offset",disabled:y,...I,children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),i.jsx("div",{className:"bgm-control-center",children:v?i.jsx("input",{type:"number",className:"bgm-offset-input",value:g,onChange:A=>c(A.target.value),onBlur:K,onKeyDown:A=>{A.key==="Enter"?K():A.key==="Escape"&&p(!1)},disabled:y,autoFocus:!0}):i.jsx("button",{type:"button",className:"bgm-offset-display",onClick:V,disabled:y,children:i.jsx("span",{className:"bgm-control-value",children:U})})}),i.jsx("button",{type:"button",className:"bgm-control-button","aria-label":"Increase background music offset",title:"Increase background music offset",disabled:y,...R,children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})]})]}),i.jsx("div",{className:"bgm-controls-right",children:i.jsxs("div",{className:"bgm-control-group",children:[i.jsx("button",{type:"button",className:"bgm-control-button","aria-label":"Decrease pattern volume",title:"Decrease pattern volume",..._,children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),i.jsx("div",{className:"bgm-control-center",children:i.jsx("button",{type:"button",className:"bgm-volume-display",onClick:Q,"aria-label":"Toggle pattern volume",title:"Click to toggle 0%/100%",children:i.jsxs("span",{className:"bgm-control-value",children:[B,"%"]})})}),i.jsx("button",{type:"button",className:"bgm-control-button","aria-label":"Increase pattern volume",title:"Increase pattern volume",...D,children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})]}),s&&i.jsx("div",{className:"bgm-error",children:s})]})}function Ha(t,a,e){return Math.min(e,Math.max(a,t))}const Oo=393,Fa=23.0625,Uo=rn,Ga=24,Vo=375;function Ho(){const t=T.useCallback(()=>{const s=window.innerWidth;return s<Vo?Fa:(Math.min(s,Uo)-Ga)*Fa/(Oo-Ga)},[]),[a,e]=T.useState(t);return T.useEffect(()=>{const s=()=>{e(t())};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[t]),a}const Fo=24,Wa=23.0625;function Go(t,a=2){const e=T.useCallback(()=>{if(typeof window>"u")return Wa;const n=window.innerWidth,o=Math.min(n,rn)-Fo,l=t*fe;return l<=0||a<=0?Wa:o/(l*a)},[t,a]),[s,r]=T.useState(e);return T.useEffect(()=>{const n=()=>{r(e())};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[e]),s}const Mn="drummer-full-practice-mode";let kt=!1;const oa=new Set;let Ka=!1;function Wo(){if(typeof window>"u")return!1;const t=localStorage.getItem(Mn);if(!t)return!1;try{const a=JSON.parse(t);return typeof a=="boolean"?a:!1}catch{return!1}}function Ko(){oa.forEach(t=>t())}function $o(t){ma(),kt!==t&&(kt=t,typeof window<"u"&&localStorage.setItem(Mn,JSON.stringify(t)),Ko())}function ma(){Ka||typeof window>"u"||(kt=Wo(),Ka=!0)}function qo(){return ma(),kt}function Zo(){$o(!kt)}function Yo(t){return ma(),oa.add(t),()=>oa.delete(t)}function On(){return T.useSyncExternalStore(Yo,qo,()=>!1)}const la=960;let zt=!1;const ca=new Set;let $a=!1;function Jo(){return typeof window>"u"?!1:typeof window.matchMedia=="function"?window.matchMedia("(orientation: landscape)").matches:window.innerWidth>window.innerHeight}function Xo(){return typeof window>"u"?!1:typeof window.matchMedia=="function"?window.matchMedia(`(max-width: ${la}px)`).matches:window.innerWidth<=la}function Qo(){return typeof window>"u"?!1:typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)").matches:typeof navigator<"u"?navigator.maxTouchPoints>0:!1}function ha(){return Jo()&&Xo()&&Qo()}function el(){ca.forEach(t=>t())}function Un(t){zt!==t&&(zt=t,el())}function Pt(){Un(ha())}function Vn(){var t;if(!($a||typeof window>"u")){if(zt=ha(),window.addEventListener("resize",Pt),window.addEventListener("orientationchange",Pt),typeof window.matchMedia=="function"){const a=window.matchMedia(`(max-width: ${la}px) and (orientation: landscape)`);if(typeof a.addEventListener=="function")a.addEventListener("change",Pt);else{const e=a;(t=e.addListener)==null||t.call(e,Pt)}}$a=!0}}function tl(){return Vn(),zt}function al(t){return Vn(),ca.add(t),Un(ha()),()=>ca.delete(t)}function Hn(){return T.useSyncExternalStore(al,tl,()=>!1)}function qa(t){const{delay:a=500,onLongPress:e,onClick:s}=t,[r,n]=T.useState(null),o=T.useRef(null),l=T.useRef(!1),f=T.useRef(!1),x=T.useRef(0),y=T.useRef(e),k=T.useRef(s);y.current=e,k.current=s;const v=T.useCallback(()=>{l.current=!1,r&&r.classList.remove("active"),o.current&&(clearTimeout(o.current),o.current=null)},[r]),p=T.useCallback(()=>{l.current||(l.current=!0,x.current=Date.now(),f.current=!1,r&&r.classList.add("active"),o.current=setTimeout(()=>{l.current&&(f.current=!0,y.current())},a))},[a,r]),g=T.useCallback(()=>{const S=l.current,w=Date.now()-x.current,_=f.current;v(),S&&!_&&w<a&&k.current&&k.current()},[a,v]);T.useEffect(()=>{if(!r)return;const S=R=>{R.cancelable&&R.preventDefault(),p()},w=R=>{R.cancelable&&R.preventDefault(),g()},_=()=>{v()},D=R=>{R.preventDefault()};return r.addEventListener("touchstart",S,{passive:!1}),r.addEventListener("touchend",w,{passive:!1}),r.addEventListener("touchcancel",_),r.addEventListener("contextmenu",D),()=>{r.removeEventListener("touchstart",S),r.removeEventListener("touchend",w),r.removeEventListener("touchcancel",_),r.removeEventListener("contextmenu",D)}},[r,p,g,v]),T.useEffect(()=>()=>{v()},[v]);const c=T.useCallback(S=>{n(S)},[]),h=T.useCallback(S=>{S.preventDefault(),p()},[p]),m=T.useCallback(()=>{g()},[g]),b=T.useCallback(()=>{v()},[v]);return{ref:c,onMouseDown:h,onMouseUp:m,onMouseLeave:b}}async function nl(t){if(navigator.clipboard&&typeof navigator.clipboard.writeText=="function")try{return await navigator.clipboard.writeText(t),!0}catch{console.log("navigator.clipboard.writeText failed, trying fallback")}try{return rl(t)}catch(a){return console.error("Failed to copy to clipboard:",a),!1}}function rl(t){const a=document.createElement("textarea");if(a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="2em",a.style.height="2em",a.style.padding="0",a.style.border="none",a.style.outline="none",a.style.boxShadow="none",a.style.background="transparent",a.style.opacity="0",a.style.zIndex="-1",a.style.fontSize="16px",a.value=t,document.body.appendChild(a),/iPad|iPhone|iPod/.test(navigator.userAgent)){const r=document.createRange();r.selectNodeContents(a);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(r)),a.setSelectionRange(0,t.length)}else a.focus(),a.select();let s=!1;try{s=document.execCommand("copy")}catch(r){console.error("execCommand copy failed:",r)}return document.body.removeChild(a),s}function il(){var e;const t=window.isSecureContext!==void 0?window.isSecureContext:location.protocol==="https:"||location.hostname==="localhost",a=!!(navigator.clipboard&&typeof navigator.clipboard.writeText=="function");return t&&a||((e=document.queryCommandSupported)==null?void 0:e.call(document,"copy"))}function sl(t){const[a,e]=T.useState(!1),[s,r]=T.useState(""),n=T.useRef(null);T.useEffect(()=>{a&&n.current&&(n.current.focus(),n.current.select())},[a]);const o=T.useCallback(()=>{r(t),e(!0)},[t]),l=T.useCallback(()=>{e(!1),r("")},[]),f=T.useCallback(async()=>{if(il())try{if(await nl(t))return!0}catch{}return r(t),e(!0),!1},[t]);return{isExportMode:a,exportValue:s,exportInputRef:n,enterExportMode:o,cancelExport:l,tryExportToClipboard:f}}let ot=null;function ol(){ot!==null&&(cancelAnimationFrame(ot),ot=null)}function ll(t,a,e=150,s){ol();const r=t.scrollLeft,n=a-r,o=performance.now();function l(f){const x=f-o,y=Math.min(x/e,1),k=1-Math.pow(1-y,3);t.scrollLeft=r+n*k,y<1?ot=requestAnimationFrame(l):(ot=null,s==null||s())}ot=requestAnimationFrame(l)}function ft(t,a,e,s,r){const n={rangeStartBar:0,rangeEndBar:t.bars-1,rangeStartSub:0,rangeEndSub:r};if(!a)return n;const o=e?a.startPatternName==="":a.startPatternName===t.name,l=e?a.endPatternName==="":a.endPatternName===t.name;return{rangeStartBar:o?a.startBar:0,rangeEndBar:l?a.endBar:t.bars-1,rangeStartSub:o?a.startBar*s:0,rangeEndSub:l?(a.endBar+1)*s:r}}function cl({scrollContainerRef:t,currentBeat:a,cellSize:e,pattern:s,crossPatternLoop:r,isDraftMode:n,isPlaying:o}){const l=T.useRef(!1),f=T.useRef(null),x=T.useRef(null),y=T.useRef(!1),k=T.useRef(null),v=T.useRef(null),p=s.timeSignature[0],g=T.useMemo(()=>p*fe,[p]),c=T.useMemo(()=>s.bars*g,[s.bars,g]),h=T.useMemo(()=>e*fe/8,[e]),m=T.useCallback((b,S)=>{f.current!==S&&(l.current||(l.current=!0,f.current=S,ll(b,S,150,()=>{l.current=!1})))},[]);return T.useLayoutEffect(()=>{const b=t.current;if(!b)return;const S=x.current,w=s.id;if(S!==null&&S!==w){const _=ft(s,r,n,g,c),D=_.rangeStartBar*g*e;v.current=(_.rangeStartBar+1)*g,m(b,Math.max(0,D))}S!==w&&(k.current=null),x.current=w},[s.id,s,s.bars,e,g,c,t,r,n,m]),T.useEffect(()=>{if(a===void 0||!t.current)return;if(v.current!==null){if(a>=v.current)return;v.current=null}if(a>=c)return;const b=ft(s,r,n,g,c);if(a<b.rangeStartSub||a>=b.rangeEndSub)return;const S=t.current,w=a*e,_=S.scrollLeft,D=_+S.clientWidth,R=Math.floor(a/g);if(o&&k.current!==null&&R!==k.current){const I=R*g*e;m(S,Math.max(0,I)),k.current=R;return}if(k.current===null&&(k.current=R),!!o){if(w<_){const I=R*g*e;m(S,Math.max(0,I))}else if(w+e>D-h){const I=ft(s,r,n,g,c);let N;R>=I.rangeEndBar?N=I.rangeStartBar:N=R+1;const H=N*g*e;m(S,Math.max(0,H))}}},[a,e,o,h,m,g,c,s,s.bars,r,n,t]),T.useEffect(()=>{o||(f.current=null,y.current=!1,k.current=null)},[o,s.id]),T.useEffect(()=>{const b=t.current;if(!b)return;const S=!y.current&&o;if(y.current=o,!S||a===void 0||a>=c)return;const w=ft(s,r,n,g,c);if(a<w.rangeStartSub||a>=w.rangeEndSub)return;const _=Math.floor(a/g),D=_*g*e,R=b.scrollLeft,I=e;if(Math.abs(R-D)<=I)return;const N=a*e,H=R+b.clientWidth;if(N+e>H-h){const E=ft(s,r,n,g,c);let B;_>=E.rangeEndBar?B=E.rangeStartBar:B=_+1;const L=B*g*e;m(b,L)}else m(b,D)},[o,a,e,h,g,c,s,s.bars,r,n,t,m]),{scrollContainerRef:t,doScroll:m}}const ul=500;function dl({pattern:t,onCellClick:a,onToggleGhost:e,onCycleThirtySecond:s,onAddBar:r,onRemoveBar:n,onClearGrid:o,onClearBar:l,crossPatternLoop:f,onCrossPatternLoopChange:x,onSave:y,onSaveCurrentPattern:k,onImportPattern:v,onImportPatternWithBgm:p,onLoadFromSlot:g,onDeletePattern:c,onStopAllPlaying:h,onSelectDraft:m,savedPatterns:b,currentBeat:S,isPlaying:w=!1,onPlayToggle:_,isDraftMode:D,onNotationDoubleClick:R,canCopyPattern:I,hasCopiedPattern:N,canPastePattern:H,onCopyPattern:E,onPastePatternBefore:B,onPastePatternAfter:L,bgmConfig:d,bgmIsLoading:U,bgmIsLoaded:M,bgmError:V,onBgmUpload:K,onBgmOffsetChange:F,onBgmVolumeChange:Q,onBgmDelete:j,masterVolume:A,onMasterVolumeChange:X,isCountInEnabled:Z,onCountInToggle:$,onBarBpmModeToggle:ee,currentBarHasOverride:re=!1}){const W=T.useRef(null),le=T.useRef(t.bars),oe=T.useRef(!1),de=T.useRef(void 0),he=On(),ve=Hn(),u=Ho(),[q]=t.timeSignature,G=Go(q,2),P=ve?G:u,{doScroll:C}=cl({scrollContainerRef:W,currentBeat:S,cellSize:P,pattern:t,crossPatternLoop:f,isDraftMode:D,isPlaying:w}),z=b.find(ye=>ye.id===t.id),Y=z?yi(z):"",{isExportMode:J,exportValue:O,exportInputRef:te,cancelExport:ie}=sl(Y),ae=async()=>{if(z)try{await Lo(z,d),console.log("Pattern exported to zip file")}catch(ye){console.error("Failed to export pattern:",ye),alert("Failed to export pattern. Please check the console for details.")}},ce=T.useCallback(()=>{oe.current=!0,de.current=S,r(S)},[r,S]),me=T.useCallback(()=>{Zo()},[]),pe=qa({delay:500,onLongPress:ae,onClick:k}),Be=qa({delay:ul,onLongPress:o,onClick:()=>{S!==void 0&&l(S)}});return T.useEffect(()=>{if(!oe.current||t.bars<=le.current){oe.current=!1,le.current=t.bars;return}if(!W.current||!f){oe.current=!1,le.current=t.bars;return}if(w){oe.current=!1,le.current=t.bars;return}if(D?f.endPatternName==="":f.endPatternName===t.name){const _e=W.current,[Ee]=t.timeSignature,ge=Ee*fe;let Re;if(de.current!==void 0){const Ge=Math.floor(de.current/ge),ct=de.current%ge,qe=ge/2;ct<qe?Re=Ge:Re=Ge+1}else Re=t.bars-1;const Ce=Re*ge*P;C(_e,Ce)}oe.current=!1,le.current=t.bars},[t.bars,w,D,t.name,t.timeSignature,P,C,f]),i.jsxs("div",{className:`pattern-editor${ve?" landscape-mode":""}`,children:[i.jsxs("div",{className:"pattern-editor-controls",children:[i.jsxs("div",{className:"pattern-bar-tools",children:[i.jsx(Ao,{bars:t.bars,onAddBar:ce,onRemoveBar:n,canRemove:t.bars>1,currentBeat:S}),I&&i.jsx("div",{className:"pattern-copy-controls",children:N?i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"pattern-tab",onClick:B,disabled:!H,"aria-label":"Paste pattern before",title:"Paste pattern before",children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("polyline",{points:"12 5 5 12 12 19"}),i.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"})]})}),i.jsx("button",{type:"button",className:"pattern-tab",onClick:L,disabled:!H,"aria-label":"Paste pattern after",title:"Paste pattern after",children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("polyline",{points:"12 5 19 12 12 19"}),i.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"})]})})]}):i.jsx("button",{type:"button",className:"pattern-tab",onClick:E,"aria-label":"Copy pattern grid",title:"Copy pattern grid",children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"9",y:"9",width:"10",height:"10",rx:"2"}),i.jsx("rect",{x:"5",y:"5",width:"10",height:"10",rx:"2"})]})})}),ee&&i.jsx("button",{type:"button",className:`bar-control-button bar-bpm-button${re?" active":""}`,onClick:ee,"aria-label":"Toggle bar BPM mode","aria-pressed":re,title:re?"Clear current bar BPM":"Enter bar BPM mode",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"9"}),i.jsx("line",{x1:"12",y1:"12",x2:"16",y2:"7"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})})]}),i.jsx(Io,{currentPattern:t,savedPatterns:b,crossPatternLoop:f,onCrossPatternLoopChange:x,isDraftMode:D})]}),i.jsxs("div",{className:"pattern-editor-actions",children:[i.jsx("div",{className:"pattern-editor-actions-left",children:i.jsx(Eo,{patterns:b,currentPatternId:t.id,onSelectPattern:g,onSelectDraft:m,onAddPattern:y,onImportPattern:v,onImportPatternWithBgm:p,isDraftMode:D})}),i.jsxs("div",{className:"pattern-editor-actions-right",children:[i.jsx("button",{type:"button",className:`action-button count-in-toggle-button${Z?" active":""}`,onClick:$,"aria-label":"Toggle count-in",title:"Toggle count-in","aria-pressed":Z,children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M6 20 L12 4 L18 20 Z"}),i.jsx("line",{x1:"12",y1:"16",x2:"16",y2:"6"})]})}),i.jsx("button",{type:"button",className:`action-button practice-toggle-button${he?" active":""}`,onClick:me,"aria-label":"Toggle practice mode",title:"Toggle practice mode","aria-pressed":he,children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M9 18V5l12-2v13"}),i.jsx("circle",{cx:"6",cy:"18",r:"3"}),i.jsx("circle",{cx:"18",cy:"16",r:"3"})]})}),!D&&b.some(ye=>ye.id===t.id)&&(J?i.jsx("input",{ref:te,type:"text",className:"export-input",value:O,onChange:()=>{},onKeyDown:ye=>{ye.key==="Escape"&&ie()},onBlur:()=>{setTimeout(ie,150)},onFocus:ye=>{ye.target.select()},onClick:ye=>{ye.target.select()},onTouchEnd:ye=>{ye.target.select()}}):i.jsx("button",{className:"action-button save-current-button",...pe,"aria-label":"Save Pattern",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),i.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),i.jsx("polyline",{points:"7 3 7 8 15 8"})]})})),b.some(ye=>ye.id===t.id)&&i.jsx("button",{className:"action-button delete-button",onClick:()=>{h&&h(),setTimeout(()=>{window.confirm("Delete this pattern?")&&c(t.id)},0)},"aria-label":"Delete",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("polyline",{points:"3 6 5 6 21 6"}),i.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})}),i.jsx("button",{className:"action-button clear-button",...Be,"aria-label":"Clear (short press: clear current bar, long press: clear all)",children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),he&&i.jsx(Mo,{config:d,isLoading:U,isLoaded:M,error:V,onUpload:K,onOffsetChange:F,onVolumeChange:Q,masterVolume:A,onMasterVolumeChange:X,onDelete:j,isPlaying:w}),i.jsxs("div",{className:"pattern-editor-scrollable",ref:W,children:[i.jsx(xo,{pattern:t,cellSize:P,currentBeat:S,scrollContainerRef:W,onDoubleClick:R}),i.jsx(jo,{pattern:t,cellSize:P}),!ve&&i.jsx(_o,{pattern:t,cellSize:P,onCellClick:a,onToggleGhost:e,onCellDoubleClick:s,currentBeat:S,scrollContainerRef:W})]})]})}function Za({isPlaying:t,onClick:a,onLongPress:e,variant:s="floating",fullPracticeMode:r=!1,isCountInEnabled:n=!1}){const o=T.useRef(null),l=T.useRef(!1),f=500,x=()=>{t||e&&(l.current=!1,o.current=window.setTimeout(()=>{e(),l.current=!0,o.current=null},f))},y=()=>{o.current&&(clearTimeout(o.current),o.current=null)},k=()=>{o.current&&(clearTimeout(o.current),o.current=null)},v=()=>{t||e&&(l.current=!1,o.current=window.setTimeout(()=>{e(),l.current=!0,o.current=null},f))},p=c=>{o.current&&(clearTimeout(o.current),o.current=null),l.current&&(c.preventDefault(),setTimeout(()=>{l.current=!1},100))},g=c=>{if(l.current){c.preventDefault(),c.stopPropagation(),l.current=!1;return}if((r||n)&&!t&&e){e(),setTimeout(()=>{l.current=!1,a()},300);return}else a()};return i.jsx("div",{className:`bottom-play-button-container${s==="inline"?" inline":""}`,children:i.jsx("button",{className:`bottom-play-button${s==="inline"?" inline":""}${t?" playing":" paused"}`,onClick:g,onMouseDown:x,onMouseUp:y,onMouseLeave:k,onTouchStart:v,onTouchEnd:p,"aria-label":t?"Pause Pattern":"Play Pattern",children:t?i.jsx(i.Fragment,{children:r||n?i.jsx("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}):i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),i.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}):i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"play-icon",children:i.jsx("polygon",{points:"6 3 18 12 6 21"})})})})}const Ya="1.13.0",Ja="2602061625",pl={name:"Dracula",colors:{bgColor:"#282a36",cardBg:"#44475a",bgSecondary:"#21222c",text:"#f8f8f2",textSecondary:"#acb8dd",textDim:"#596483",textTertiary:"#4e5771",border:"#434b62",primary:"#bd93f9",primaryHover:"#ff79c6",secondary:"#50fa7b",active:"#50fa7b",activeBg:"rgba(80, 250, 123, 0.2)",accentGlow:"rgba(189, 147, 249, 0.3)",danger:"#ff5555",dangerHover:"#ff6e6e",warning:"#f2f28c",warningHover:"#ffb86c",glassBg:"rgba(68, 71, 90, 0.5)",glassBgHover:"rgba(68, 71, 90, 0.7)",glassBorder:"rgba(139, 233, 253, 0.3)",overlayBg:"rgba(40, 42, 54, 0.9)",gridBorder:"rgba(139, 233, 253, 0.2)",gridCellBg:"#1a3a2a",gridCellBgAlt:"#1a3a2a94",beatLine:"#8be9fd"}},fl={name:"One",colors:{bgColor:"#282c34",cardBg:"#21252b",bgSecondary:"#1e2227",text:"#c6cedd",textSecondary:"#8c96a8",textDim:"#6c768e",textTertiary:"#586178",border:"rgba(171, 178, 191, 0.2)",primary:"#61afef",primaryHover:"#7aa6f2",secondary:"#98c379",active:"#98c379",activeBg:"rgba(152, 195, 121, 0.2)",accentGlow:"rgba(97, 175, 239, 0.3)",danger:"#e06c75",dangerHover:"#ff6b7a",warning:"#d19a66",warningHover:"#e5c07b",glassBg:"rgba(33, 37, 43, 0.6)",glassBgHover:"rgba(33, 37, 43, 0.8)",glassBorder:"rgba(171, 178, 191, 0.2)",overlayBg:"rgba(40, 44, 52, 0.9)",gridBorder:"rgba(171, 178, 191, 0.15)",gridCellBg:"#1f252d",gridCellBgAlt:"#1b2027",beatLine:"#61afef"}},ml={name:"Gruvbox",colors:{bgColor:"#282828",cardBg:"#3c3836",bgSecondary:"#1d2021",text:"#ebdbb2",textSecondary:"#928374",textDim:"#7c6f64",textTertiary:"#5a5047",border:"rgba(235, 219, 178, 0.2)",primary:"#fe8019",primaryHover:"#d65e0e",secondary:"#b8bb26",active:"#b8bb26",activeBg:"rgba(184, 187, 38, 0.2)",accentGlow:"rgba(254, 128, 25, 0.3)",danger:"#fb4934",dangerHover:"#cc241d",warning:"#fabd2f",warningHover:"#d79921",glassBg:"rgba(60, 56, 54, 0.6)",glassBgHover:"rgba(60, 56, 54, 0.8)",glassBorder:"rgba(235, 219, 178, 0.2)",overlayBg:"rgba(40, 40, 40, 0.9)",gridBorder:"rgba(235, 219, 178, 0.15)",gridCellBg:"#1d2021",gridCellBgAlt:"#191b1b",beatLine:"#fe8019"}},hl={name:"Monokai",colors:{bgColor:"#272822",cardBg:"#3e3d32",bgSecondary:"#1e1f1a",text:"#f8f8f2",textSecondary:"#a6a69c",textDim:"#75715e",textTertiary:"#5a594f",border:"rgba(248, 248, 242, 0.2)",primary:"#a6e22e",primaryHover:"#66d9ef",secondary:"#f92672",active:"#a6e22e",activeBg:"rgba(166, 226, 46, 0.2)",accentGlow:"rgba(249, 38, 114, 0.3)",danger:"#f92672",dangerHover:"#fe4e8e",warning:"#e6db74",warningHover:"#f1e8a0",glassBg:"rgba(62, 61, 50, 0.7)",glassBgHover:"rgba(62, 61, 50, 0.85)",glassBorder:"rgba(248, 248, 242, 0.15)",overlayBg:"rgba(39, 40, 34, 0.92)",gridBorder:"rgba(248, 248, 242, 0.12)",gridCellBg:"#2a2b26",gridCellBgAlt:"#21221e",beatLine:"#66d9ef"}},gl={name:"Campbell",colors:{bgColor:"#000",cardBg:"#1f1f1f",bgSecondary:"#080808",text:"#cccccc",textSecondary:"#a0a0a0",textDim:"#767676",textTertiary:"#5c5c5c",border:"rgba(204, 204, 204, 0.25)",primary:"#3a96dd",primaryHover:"#5cb3ff",secondary:"#13a10e",active:"#13a10e",activeBg:"rgba(19, 161, 14, 0.2)",accentGlow:"rgba(58, 150, 221, 0.3)",danger:"#c50f1f",dangerHover:"#e81123",warning:"#c19c00",warningHover:"#d9b812",glassBg:"rgba(31, 31, 31, 0.8)",glassBgHover:"rgba(31, 31, 31, 0.92)",glassBorder:"rgba(204, 204, 204, 0.15)",overlayBg:"rgba(12, 12, 12, 0.95)",gridBorder:"rgba(204, 204, 204, 0.1)",gridCellBg:"#121212",gridCellBgAlt:"#0a0a0a",beatLine:"#3a96dd"}},bl={name:"Solarized",colors:{bgColor:"#002b36",cardBg:"#073642",bgSecondary:"#001e26",text:"#a8bdc1",textSecondary:"#657b83",textDim:"#586e75",textTertiary:"#3d4d51",border:"rgba(131, 148, 150, 0.3)",primary:"#268bd2",primaryHover:"#2aa198",secondary:"#859900",active:"#859900",activeBg:"rgba(133, 153, 0, 0.2)",accentGlow:"rgba(38, 139, 210, 0.25)",danger:"#dc322f",dangerHover:"#cb4b16",warning:"#b58900",warningHover:"#d33682",glassBg:"rgba(7, 54, 66, 0.75)",glassBgHover:"rgba(7, 54, 66, 0.88)",glassBorder:"rgba(147, 161, 161, 0.2)",overlayBg:"rgba(0, 43, 54, 0.93)",gridBorder:"rgba(147, 161, 161, 0.15)",gridCellBg:"#093e48",gridCellBgAlt:"#08343d",beatLine:"#268bd2"}},kl={name:"Nord",colors:{bgColor:"#2e3440",cardBg:"#3b4252",bgSecondary:"#242933",text:"#d8dee9",textSecondary:"#a3be8c",textDim:"#7b88a1",textTertiary:"#4c566a",border:"rgba(216, 222, 233, 0.2)",primary:"#88c0d0",primaryHover:"#8fbcbb",secondary:"#a3be8c",active:"#a3be8c",activeBg:"rgba(163, 190, 140, 0.2)",accentGlow:"rgba(136, 192, 208, 0.25)",danger:"#bf616a",dangerHover:"#d08770",warning:"#ebcb8b",warningHover:"#eacb8b",glassBg:"rgba(59, 66, 82, 0.7)",glassBgHover:"rgba(59, 66, 82, 0.85)",glassBorder:"rgba(129, 161, 193, 0.2)",overlayBg:"rgba(46, 52, 64, 0.92)",gridBorder:"rgba(129, 161, 193, 0.15)",gridCellBg:"#353b49",gridCellBgAlt:"#313643",beatLine:"#88c0d0"}},vl={name:"Night",colors:{bgColor:"#1a1b26",cardBg:"#24283b",bgSecondary:"#16161e",text:"#c0caf5",textSecondary:"#a9b1d6",textDim:"#737aa2",textTertiary:"#565f89",border:"rgba(192, 202, 245, 0.2)",primary:"#7aa2f7",primaryHover:"#7dcfff",secondary:"#9ece6a",active:"#9ece6a",activeBg:"rgba(158, 206, 106, 0.2)",accentGlow:"rgba(122, 162, 247, 0.25)",danger:"#f7768e",dangerHover:"#db4b4b",warning:"#e0af68",warningHover:"#ff9e64",glassBg:"rgba(36, 40, 59, 0.75)",glassBgHover:"rgba(36, 40, 59, 0.88)",glassBorder:"rgba(187, 154, 247, 0.2)",overlayBg:"rgba(26, 27, 38, 0.93)",gridBorder:"rgba(169, 177, 214, 0.12)",gridCellBg:"#1f2335",gridCellBgAlt:"#1a1e2e",beatLine:"#7aa2f7"}},yl={name:"Rose",colors:{bgColor:"#191724",cardBg:"#26233a",bgSecondary:"#131118",text:"#e0def4",textSecondary:"#c4a7e7",textDim:"#908caa",textTertiary:"#6e6a7e",border:"rgba(224, 222, 244, 0.2)",primary:"#c4a7e7",primaryHover:"#9ccfd8",secondary:"#3e8fb0",active:"#3e8fb0",activeBg:"rgba(62, 143, 176, 0.2)",accentGlow:"rgba(196, 167, 231, 0.2)",danger:"#eb6f92",dangerHover:"#f08ba3",warning:"#f6c177",warningHover:"#fad5a0",glassBg:"rgba(38, 35, 58, 0.75)",glassBgHover:"rgba(38, 35, 58, 0.88)",glassBorder:"rgba(196, 167, 231, 0.15)",overlayBg:"rgba(25, 23, 36, 0.93)",gridBorder:"rgba(156, 207, 216, 0.12)",gridCellBg:"#1f1d2e",gridCellBgAlt:"#1c1a26",beatLine:"#c4a7e7"}},wl={name:"Yellow",colors:{bgColor:"#2b2620",cardBg:"#3a332a",bgSecondary:"#1f1b17",text:"#f2e6d4",textSecondary:"#d4c4b0",textDim:"#a89b8a",textTertiary:"#7a6f61",border:"rgba(242, 230, 212, 0.2)",primary:"#7fb3d5",primaryHover:"#5dade2",secondary:"#a5d6a7",active:"#a5d6a7",activeBg:"rgba(165, 214, 167, 0.2)",accentGlow:"rgba(127, 179, 213, 0.25)",danger:"#e67e22",dangerHover:"#f39c12",warning:"#f9d784",warningHover:"#ffe082",glassBg:"rgba(58, 51, 42, 0.75)",glassBgHover:"rgba(58, 51, 42, 0.88)",glassBorder:"rgba(242, 230, 212, 0.15)",overlayBg:"rgba(43, 38, 32, 0.93)",gridBorder:"rgba(242, 230, 212, 0.12)",gridCellBg:"#332b24",gridCellBgAlt:"#2e2720",beatLine:"#7fb3d5"}},Je=[pl,fl,ml,hl,gl,bl,kl,vl,yl,wl];function Xa(t){const a=document.documentElement,e=t.colors;a.style.setProperty("--bg-color",e.bgColor),a.style.setProperty("--card-bg",e.cardBg),a.style.setProperty("--color-bg-secondary",e.bgSecondary),a.style.setProperty("--color-text",e.text),a.style.setProperty("--color-text-secondary",e.textSecondary),a.style.setProperty("--color-text-dim",e.textDim),a.style.setProperty("--color-text-tertiary",e.textTertiary),a.style.setProperty("--color-border",e.border),a.style.setProperty("--color-primary",e.primary),a.style.setProperty("--color-primary-hover",e.primaryHover),a.style.setProperty("--color-secondary",e.secondary),a.style.setProperty("--color-active",e.active),a.style.setProperty("--color-active-bg",e.activeBg),a.style.setProperty("--accent-glow",e.accentGlow),a.style.setProperty("--color-danger",e.danger),a.style.setProperty("--color-danger-hover",e.dangerHover),a.style.setProperty("--color-warning",e.warning),a.style.setProperty("--color-warning-hover",e.warningHover),a.style.setProperty("--glass-bg",e.glassBg),a.style.setProperty("--glass-bg-hover",e.glassBgHover),a.style.setProperty("--glass-border",e.glassBorder),a.style.setProperty("--overlay-bg",e.overlayBg),a.style.setProperty("--grid-border",e.gridBorder),a.style.setProperty("--grid-cell-bg",e.gridCellBg),a.style.setProperty("--grid-cell-bg-alt",e.gridCellBgAlt),a.style.setProperty("--color-beat-line",e.beatLine),a.style.setProperty("--theme-color",e.bgColor)}const Fn="drummer-theme",xl="Dracula";function Bl(){return Je.find(a=>a.name===xl)||Je[0]}function Sl(){try{const t=localStorage.getItem(Fn);if(t){const a=Je.find(e=>e.name===t);if(a)return a}}catch(t){console.warn("Failed to load theme from localStorage:",t)}return Bl()}function Tl(t){try{localStorage.setItem(Fn,t)}catch(a){console.warn("Failed to save theme to localStorage:",a)}}function Cl(){const[t,a]=T.useState(()=>{const s=Sl();return Xa(s),s});return{currentTheme:t,cycleTheme:()=>{const r=(Je.findIndex(o=>o.name===t.name)+1)%Je.length,n=Je[r];a(n),Xa(n),Tl(n.name)},themes:Je}}const Pl="1.0.0";function _l(t){if(typeof t!="object"||t===null)return!1;const a=t;if(typeof a.version!="string"||typeof a.exportedAt!="number"||typeof a.localStorage!="object"||a.localStorage===null||!Array.isArray(a.bgmFiles))return!1;for(const e of a.bgmFiles)if(typeof e.id!="string"||typeof e.name!="string"||typeof e.size!="number"||typeof e.type!="string"||typeof e.data!="string"||typeof e.byteLength!="number"||e.data.length===0)return!1;return!0}function jl(){const t={};for(let a=0;a<localStorage.length;a++){const e=localStorage.key(a);if(e){const s=localStorage.getItem(e);s!==null&&(t[e]=s)}}return t}async function Al(){const t=await Hs();return await Promise.all(t.map(async e=>{const s=await e.blob.arrayBuffer(),n=new Uint8Array(s).reduce((l,f)=>l+String.fromCharCode(f),""),o=btoa(n);return{id:e.id,name:e.name,size:e.size,type:e.type,data:o,byteLength:s.byteLength}}))}async function Il(){try{const t=jl(),a=await Al(),e={version:Pl,exportedAt:Date.now(),localStorage:t,bgmFiles:a},s=new Vt;s.file("config.json",JSON.stringify(e,null,2));const r=await s.generateAsync({type:"blob"}),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n;const f=new Date().toISOString().slice(0,10).replace(/-/g,"");o.download=`${f}.zip`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}catch(t){throw console.error("[Config Backup] Export failed:",t),t}}function Nl(t){localStorage.clear();for(const[a,e]of Object.entries(t))localStorage.setItem(a,e)}async function Rl(t){var e;await Fs();const a=new Map;for(const s of t){let r=s.type;if(!r||r===""){const o=(e=s.name.split(".").pop())==null?void 0:e.toLowerCase();o==="mp3"?r="audio/mpeg":o==="wav"?r="audio/wav":o==="ogg"?r="audio/ogg":o==="m4a"||o==="mp4"?r="audio/mp4":r="audio/mpeg"}const{id:n}=await Nn(s.data,s.name,r);a.set(s.id,n)}return a}function Dl(t){const a="drummer-bgm-config",e=localStorage.getItem(a);if(e)try{const s=JSON.parse(e);let r=!1;for(const n of Object.values(s))n.fileId&&t.has(n.fileId)&&(n.fileId=t.get(n.fileId),r=!0);r&&localStorage.setItem(a,JSON.stringify(s))}catch{}}async function Ll(t){try{const e=(await Vt.loadAsync(t)).file("config.json");if(!e)throw new Error("Invalid configuration file: missing config.json");const s=await e.async("string"),r=JSON.parse(s);if(!_l(r))throw new Error("Invalid backup file: data structure validation failed");const n=r;Nl(n.localStorage);const o=await Rl(n.bgmFiles);Dl(o),window.location.reload()}catch(a){throw console.error("[Config Backup] Import failed:",a),a}}const zl=new Set(["ar"]);function El(){const[t,a]=T.useState(!1),[e,s]=T.useState(!1),[r,n]=T.useState("idle"),[o,l]=T.useState(!1),[f,x]=T.useState(!1),[y,k]=T.useState({}),[v,p]=T.useState("auto"),g=T.useRef(null),c=T.useRef(null),h=T.useRef(null),{currentTheme:m,cycleTheme:b}=Cl(),S=["Crash 1","Crash 2","Hi-Hat Open","Hi-Hat Closed","Ride","Tom 1","Tom 2","Snare","Tom 3","Kick"];T.useEffect(()=>{k(da())},[]),T.useEffect(()=>{p(Si())},[]);const w=async(K,F)=>{xi(K,F),k(Q=>({...Q,[K]:F})),await ys(),await ia(K)},_=T.useCallback(()=>{f||(c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{a(!1),localStorage.getItem("drummer-first-shown")||(s(!0),localStorage.setItem("drummer-first-shown","true"),h.current=setTimeout(()=>{s(!1)},1e4))},1e4))},[f]);T.useEffect(()=>()=>{c.current&&clearTimeout(c.current),h.current&&clearTimeout(h.current)},[]),T.useEffect(()=>{localStorage.getItem("drummer-visited")||(a(!0),localStorage.setItem("drummer-visited","true"))},[]),T.useEffect(()=>{const K=()=>{a(!0),s(!1)};return window.addEventListener("show-version",K),()=>{window.removeEventListener("show-version",K)}},[]),T.useEffect(()=>{if(!t){c.current&&(clearTimeout(c.current),c.current=null);return}_();const K=["mousemove","mousedown","touchstart","touchmove","keydown","click"],F=()=>{_()};return K.forEach(Q=>{window.addEventListener(Q,F)}),()=>{K.forEach(Q=>{window.removeEventListener(Q,F)}),c.current&&clearTimeout(c.current)}},[t,_]);const D=async()=>{var K,F,Q;console.log("[Refresh] === handleRefresh started ==="),console.log("[Refresh] Current version:",Ya,"Build time:",Ja),console.log("[Refresh] Set status: checking"),n("checking");try{if(!("serviceWorker"in navigator)){console.log("[Refresh] ❌ Browser doesn't support ServiceWorker, reloading page directly"),window.location.reload();return}console.log("[Refresh] ✓ Browser supports ServiceWorker"),console.log("[Refresh] Getting ServiceWorker registration...");const j=await navigator.serviceWorker.getRegistration();if(!j){console.log("[Refresh] ❌ No registration found, reloading page directly"),window.location.reload();return}console.log("[Refresh] ✓ Got registration:",{scope:j.scope,active:(K=j.active)==null?void 0:K.state,waiting:(F=j.waiting)==null?void 0:F.state,installing:(Q=j.installing)==null?void 0:Q.state});const A=()=>{console.log("[Refresh] 🔄 controllerchange event triggered! Reloading page..."),window.location.reload()};if(navigator.serviceWorker.addEventListener("controllerchange",A,{once:!0}),console.log("[Refresh] ✓ Added controllerchange listener"),j.waiting){console.log("[Refresh] ⚡ Found waiting worker, activating directly"),console.log("[Refresh] waiting worker state:",j.waiting.state),n("activating"),console.log("[Refresh] Sending SKIP_WAITING message to waiting worker"),j.waiting.postMessage({type:"SKIP_WAITING"});return}console.log("[Refresh] No waiting worker currently"),console.log("[Refresh] Set 10 second timeout");const X=setTimeout(()=>{console.log("[Refresh] ⏰ 10s timeout! Removing listener and reloading page"),navigator.serviceWorker.removeEventListener("controllerchange",A),window.location.reload()},1e4),Z=()=>{console.log("[Refresh] 🎉 updatefound event triggered! New SW started installing"),n("downloading");const re=j.installing;if(!re){console.log("[Refresh] ❌ updatefound triggered but installing is null");return}console.log("[Refresh] New worker initial state:",re.state),re.addEventListener("statechange",()=>{console.log("[Refresh] New worker state changed:",re.state),re.state==="installing"&&(console.log("[Refresh] Set status: installing"),n("installing")),re.state==="installed"&&(console.log("[Refresh] New worker installation complete, set status: activating"),n("activating"),clearTimeout(X),console.log("[Refresh] Cleared timeout timer"),console.log("[Refresh] Sending SKIP_WAITING message to new worker"),re.postMessage({type:"SKIP_WAITING"}))})};j.addEventListener("updatefound",Z,{once:!0}),console.log("[Refresh] ✓ Added updatefound listener"),console.log("[Refresh] Calling registration.update() to check for updates...");try{await j.update(),console.log("[Refresh] ✓ registration.update() completed")}catch(re){console.warn("[Refresh] ⚠️ Update check failed:",re)}const $=j.waiting;if(console.log("[Refresh] After update(), checking waiting:",($==null?void 0:$.state)||"null"),$){console.log("[Refresh] ⚡ Found waiting worker after update(), activating directly"),n("activating"),clearTimeout(X),console.log("[Refresh] Sending SKIP_WAITING message"),$.postMessage({type:"SKIP_WAITING"});return}console.log("[Refresh] Set 5 second no-update detection timer");const ee=setTimeout(()=>{var re,W;console.log("[Refresh] ⏰ 5s check: checking for updates..."),console.log("[Refresh] installing:",((re=j.installing)==null?void 0:re.state)||"null"),console.log("[Refresh] waiting:",((W=j.waiting)==null?void 0:W.state)||"null"),!j.installing&&!j.waiting?(console.log("[Refresh] 📌 Confirmed no update, set status: no-update"),n("no-update"),clearTimeout(X),navigator.serviceWorker.removeEventListener("controllerchange",A),console.log("[Refresh] Reloading page in 1 second..."),setTimeout(()=>{console.log("[Refresh] 🔄 Executing page reload"),window.location.reload()},1e3)):console.log("[Refresh] Found installing or waiting, continuing to wait")},5e3);j.addEventListener("updatefound",()=>{console.log("[Refresh] updatefound triggered, clearing no-update detection timer"),clearTimeout(ee)},{once:!0}),console.log("[Refresh] === handleRefresh initialization complete, waiting for events ===")}catch(j){console.error("[Refresh] ❌ Exception:",j),console.log("[Refresh] Reloading page due to exception"),window.location.reload()}},R=()=>{switch(r){case"checking":return d.statusChecking;case"downloading":return d.statusDownloading;case"installing":return d.statusInstalling;case"activating":return d.statusActivating;case"no-update":return d.statusLatestVersion;default:return`v${Ya} - ${Ja}`}},I=async()=>{if(!o)try{l(!0),await Il()}catch(K){console.error("[Settings] Export failed:",K),alert("Failed to export configuration. Please check the console for details.")}finally{l(!1)}},N=()=>{var K;(K=g.current)==null||K.click()},H=async K=>{var Q;const F=(Q=K.target.files)==null?void 0:Q[0];if(F){if(!F.name.endsWith(".zip")){alert("Please select a valid configuration file (.zip format)");return}try{await Ll(F)}catch(j){console.error("[Settings] Import failed:",j),alert("Failed to import configuration. Please check the console for details.")}finally{g.current&&(g.current.value="")}}},E=r!=="idle",B=Ut(v),L=zl.has(B),d=oi(v),U=T.useMemo(()=>li(v),[v]),M=K=>U[K],V=K=>{const F=K.target.value;p(F),Bi(F)};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`settings-first-hint ${e?"visible":"hidden"}`,children:d.tapHintShowSettings}),i.jsxs("div",{className:`settings ${t?"visible":"hidden"}`,children:[i.jsxs("div",{className:"settings-theme",onClick:b,children:[i.jsx("button",{type:"button",className:"settings-theme-button",title:`Current theme: ${m.name}. Click to cycle theme.`,children:i.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"13.5",cy:"6.5",r:".5"}),i.jsx("circle",{cx:"17.5",cy:"10.5",r:".5"}),i.jsx("circle",{cx:"8.5",cy:"7.5",r:".5"}),i.jsx("circle",{cx:"6.5",cy:"12.5",r:".5"}),i.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]})}),m.name]}),i.jsxs("div",{className:"settings-config",children:[i.jsx("input",{ref:g,type:"file",accept:".zip",style:{display:"none"},onChange:H}),i.jsx("button",{type:"button",className:"settings-config-button",onClick:N,title:"Load settings from a zip file",children:i.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),i.jsx("polyline",{points:"17 8 12 3 7 8"}),i.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),i.jsx("button",{type:"button",className:`settings-config-button ${o?"exporting":""}`,onClick:I,title:"Export all settings to a zip file",disabled:o,children:i.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),i.jsx("polyline",{points:"7 10 12 15 17 10"}),i.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),i.jsx("button",{type:"button",className:"settings-config-button",onClick:()=>x(!0),title:"About",children:i.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),f&&i.jsx("div",{className:"settings-modal-mask",onClick:()=>x(!1),children:i.jsxs("div",{className:"settings-modal",dir:L?"rtl":"ltr",lang:B,onClick:K=>K.stopPropagation(),children:[i.jsxs("div",{className:"settings-modal-header",children:[i.jsx("h2",{children:d.modalTitle}),i.jsx("button",{type:"button",className:"settings-modal-close",onClick:()=>x(!1),children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),i.jsxs("div",{className:"settings-modal-content",children:[i.jsxs("div",{className:"settings-language-row",children:[i.jsx("label",{htmlFor:"settings-language-select",children:d.languageLabel}),i.jsxs("select",{id:"settings-language-select",className:"settings-language-select",value:v,onChange:V,"data-testid":"settings-language-select",children:[i.jsx("option",{value:"auto",children:`${d.autoLabel}`}),ni.map(K=>i.jsx("option",{value:K.code,children:K.label},K.code))]})]}),i.jsx("h3",{className:"settings-modal-subtitle",children:d.introTitle}),i.jsx("p",{className:"settings-modal-description",children:d.introDescription}),i.jsxs("div",{className:"settings-modal-section",children:[i.jsx("h3",{children:M("sectionTopBarTitle")}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:M("labelBeatDots")}),":"," ",M("tailBeatDots")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelTempo")})," ",i.jsx("span",{className:"settings-icon",children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})," ","/"," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),": ",M("tailTempo")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelBpmNumber")}),":"," ",M("tailBpmNumber")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelPlay")})," ",i.jsx("span",{className:"settings-icon",children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"6 3 18 12 6 21"})})}),": ",M("tailPlay")]})]})]}),i.jsxs("div",{className:"settings-modal-section",children:[i.jsx("h3",{children:M("sectionPatternsTitle")}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:M("labelTabs")}),": ",M("tailTabs")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelNewPattern")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),": ",M("tailNewPattern")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelImportPattern")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 3v12"}),i.jsx("polyline",{points:"8 7 12 3 16 7"}),i.jsx("path",{d:"M4 21h16v0"})]})}),": ",M("tailImportPattern")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelBars")})," ",i.jsx("span",{className:"settings-icon",children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})," ","/"," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),": ",M("tailBars")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelLoopRange")}),":"," ",M("tailLoopRange")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelPerBarBpm")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"9"}),i.jsx("line",{x1:"12",y1:"12",x2:"16",y2:"7"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),": ",M("tailPerBarBpm")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelCopyPaste")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"9",y:"9",width:"10",height:"10",rx:"2"}),i.jsx("rect",{x:"5",y:"5",width:"10",height:"10",rx:"2"})]})})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("polyline",{points:"12 5 5 12 12 19"}),i.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"})]})})," ","/"," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("polyline",{points:"12 5 19 12 12 19"}),i.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"})]})}),": ",M("tailCopyPaste")]})]})]}),i.jsxs("div",{className:"settings-modal-section",children:[i.jsx("h3",{children:M("sectionGridTitle")}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:M("labelSingleClickTap")}),":"," ",M("tailSingleClickTap")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelDoubleClickTap")}),":"," ",M("tailDoubleClickTap")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelLongPressActiveCell")}),":"," ",M("tailLongPressActiveCell")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelNotationView")}),":"," ",M("tailNotationView")]})]})]}),i.jsxs("div",{className:"settings-modal-section",children:[i.jsx("h3",{children:M("sectionActionButtonsTitle")}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:M("labelCountIn")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M6 20 L12 4 L18 20 Z"}),i.jsx("line",{x1:"12",y1:"16",x2:"16",y2:"6"})]})}),": ",M("tailCountIn")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelPracticeMode")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M9 18V5l12-2v13"}),i.jsx("circle",{cx:"6",cy:"18",r:"3"}),i.jsx("circle",{cx:"18",cy:"16",r:"3"})]})}),": ",M("tailPracticeMode")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelPlayBottom")})," ",i.jsx("span",{className:"settings-icon",children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"6 3 18 12 6 21"})})}),": ",M("tailPlayBottom")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelSaveCurrent")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),i.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),i.jsx("polyline",{points:"7 3 7 8 15 8"})]})}),": ",M("tailSaveCurrent")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelDelete")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("polyline",{points:"3 6 5 6 21 6"}),i.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})}),": ",M("tailDelete")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelClear")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),": ",M("tailClear")]})]})]}),i.jsxs("div",{className:"settings-modal-section",children:[i.jsx("h3",{children:M("sectionBgmTitle")}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:M("labelUpload")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 3v12"}),i.jsx("polyline",{points:"8 7 12 3 16 7"}),i.jsx("path",{d:"M4 21h16v0"})]})}),": ",M("tailUploadBeforeDelete")," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("polyline",{points:"3 6 5 6 21 6"}),i.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})," ",M("tailUploadAfterDelete")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelVolume")})," ",i.jsx("span",{className:"settings-icon",children:i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})," ","/"," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),": ",M("tailVolume")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelOffset")}),":"," ",M("tailOffset")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelPatternVolume")}),":"," ",M("tailPatternVolume")]})]})]}),i.jsxs("div",{className:"settings-modal-section",children:[i.jsx("h3",{children:M("sectionSettingsTitle")}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:M("labelTheme")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"13.5",cy:"6.5",r:".5"}),i.jsx("circle",{cx:"17.5",cy:"10.5",r:".5"}),i.jsx("circle",{cx:"8.5",cy:"7.5",r:".5"}),i.jsx("circle",{cx:"6.5",cy:"12.5",r:".5"}),i.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]})}),": ",M("tailTheme")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelBackupRestore")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),i.jsx("polyline",{points:"17 8 12 3 7 8"}),i.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})})," ","/"," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),i.jsx("polyline",{points:"7 10 12 15 17 10"}),i.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),": ",M("tailBackupRestore")]}),i.jsxs("li",{children:[i.jsx("strong",{children:M("labelSettings")})," ",i.jsx("span",{className:"settings-icon",children:i.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),": ",M("tailSettings")]})]})]}),i.jsxs("div",{className:"settings-modal-section",children:[i.jsx("h3",{children:d.privacyTitle}),i.jsx("ul",{children:d.privacyItems.map(K=>i.jsx("li",{children:K},K))})]}),i.jsxs("div",{className:"settings-modal-section",children:[i.jsx("h3",{children:d.termsTitle}),i.jsx("ul",{children:d.termsItems.map(K=>i.jsx("li",{children:K},K))})]}),i.jsxs("div",{className:"settings-modal-section",children:[i.jsx("h3",{children:d.sampleSelectionTitle}),i.jsx("p",{className:"settings-modal-description",children:d.sampleSelectionDescription}),i.jsx("div",{className:"sample-selection-list",children:S.map(K=>{const F=y[K]||"A",Q=di(K,v);return i.jsxs("div",{className:"sample-selection-item",children:[i.jsx("div",{className:"sample-selection-drum",children:Q}),i.jsx("div",{className:"sample-selection-variants",children:["A","B","C"].map(j=>i.jsx("button",{type:"button",className:`sample-variant-button ${F===j?"active":""}`,onClick:()=>w(K,j),title:`Select ${j} variant for ${Q}`,children:j},j))})]},K)})})]})]}),i.jsx("div",{className:`settings-modal-version ${E?"updating":""}`,onClick:D,children:R()},`version-${r}`)]})})]})}let Qa=0;const Ml=16;function rt(t,a,e){const s=Math.max(0,e);setTimeout(()=>{Date.now()-Qa>=Ml?requestAnimationFrame(()=>{Qa=Date.now(),a(t)}):a(t)},s)}function Ol({currentPattern:t,savedPatterns:a,crossPatternLoop:e,isPlaying:s,isDraftMode:r,playbackRate:n=1,onSubdivisionChange:o,onPatternChange:l,onPlayStart:f}){const x=T.useRef(0),y=T.useRef(.2),k=T.useRef(50),v=T.useRef(null),p=T.useRef(!1),g=T.useRef(0),c=T.useRef(0),h=T.useRef([]),m=T.useRef(o),b=T.useRef(l),S=T.useRef(f),w=T.useRef(t),_=T.useRef(r);m.current=o,b.current=l,S.current=f,w.current=t,_.current=r;const D=T.useRef(n);D.current=n;const R=T.useCallback((M,V)=>{let K=M.bpm;if(V!==void 0&&M.barBpmOverrides){const[j]=M.timeSignature,A=j*fe,X=Math.floor(V/A);K=M.barBpmOverrides[X]??M.bpm}return 60/(K*D.current)*(4/M.timeSignature[1])/fe},[]),I=T.useCallback(M=>{const[V]=M.timeSignature;return V*fe},[]),N=T.useCallback(M=>{const V=h.current;if(V.length===0)return;let K=-1,F=M;for(let A=0;A<V.length;A++){const X=V[A],Z=I(X.pattern),$=X.startBar*Z,ee=(X.endBar+1)*Z;if(M>=$&&M<ee){K=A,F=M;break}}if(K===-1){const A=m.current;A&&rt(M,A,0);return}if(g.current=K,c.current=F,p.current){const A=Te();x.current=A.currentTime}const Q=m.current;Q&&rt(F,Q,0);const j=b.current;if(j){const A=V[K];j(A.patternName)}},[I]),H=T.useCallback(()=>{const M=[];if(!e)return M.push({patternName:r?"":t.name,pattern:t,startBar:0,endBar:t.bars-1}),M;const{startPatternName:V,startBar:K,endPatternName:F,endBar:Q}=e,j=[...a].sort(($,ee)=>$.name.localeCompare(ee.name)),A=r?[{name:"",pattern:t},...j.map($=>({name:$.name,pattern:$}))]:j.map($=>$.id===t.id?{name:$.name,pattern:t}:{name:$.name,pattern:$}),X=A.findIndex($=>$.name===V),Z=A.findIndex($=>$.name===F);if(X===-1||Z===-1)return M.push({patternName:r?"":t.name,pattern:t,startBar:0,endBar:t.bars-1}),M;for(let $=X;$<=Z;$++){const{name:ee,pattern:re}=A[$],W=$===X?K:0,le=$===Z?Q:re.bars-1;M.push({patternName:ee,pattern:re,startBar:W,endBar:le})}return M},[t,a,e,r]);T.useEffect(()=>{h.current=H()},[H]);const E=T.useCallback((M,V,K)=>{const F=R(M,V),Q=F/2,j=(A,X,Z)=>{switch(As(Z),A){case"Kick":Bn(X);break;case"Snare":ra(X);break;case"Hi-Hat Closed":Sn(X);break;case"Hi-Hat Open":Tn(X);break;case"Crash 1":Dt(X,1.2);break;case"Crash 2":Dt(X,1);break;case"Ride":Cn(X);break;case"Tom 1":st(X,250);break;case"Tom 2":st(X,200);break;case"Tom 3":st(X,150);break}Is()};M.grid.forEach((A,X)=>{const Z=A[V];if(Z===Pe)return;const $=M.drums[X],ee=K;if(Z===Ke){const W=ee-F*.125;j($,W,.5),j($,ee,1);return}if(Z===ze||Z===Ve||Z===He){(Z===ze||Z===Ve)&&j($,ee,1),(Z===ze||Z===He)&&j($,ee+Q,1);return}j($,ee,Z===De?.3:1)})},[R]),B=T.useCallback(()=>{const M=Te();if(!p.current)return;const V=M.currentTime,K=h.current;if(K.length!==0)for(;x.current<V+y.current;){let F=g.current,Q=c.current;if(F<0||F>=K.length){F=0;const W=K[0],le=I(W.pattern);Q=W.startBar*le,g.current=0,c.current=Q;const oe=b.current;oe&&oe(W.patternName),x.current<V&&(x.current=V);continue}const j=K[F],A=I(j.pattern),X=j.startBar*A,Z=(j.endBar+1)*A;if(Q>=Z){if(g.current=F+1,F+1<K.length){const W=K[F+1],le=I(W.pattern);c.current=W.startBar*le;const oe=b.current;oe&&oe(W.patternName)}continue}Q<X&&(Q=X,c.current=X);const $=Math.max(x.current,V),ee=($-V)*1e3;if(E(j.pattern,Q,$),p.current){const W=m.current;W&&rt(Q,W,ee)}c.current=Q+1;const re=R(j.pattern,Q);x.current+=re}},[E,R,I]),L=T.useCallback(async()=>{const M=Te();if(p.current)return;M.state==="suspended"&&await M.resume(),await new Promise(X=>requestAnimationFrame(X)),Dn(),p.current=!0;const V=M.currentTime,K=h.current;if(K.length===0)return;const F=S.current;F&&F(V);let Q=!0;const j=g.current,A=c.current;if(j>=0&&j<K.length){const X=K[j],Z=I(X.pattern),$=X.startBar*Z,ee=(X.endBar+1)*Z,re=A>=$&&A<ee,W=X.pattern.id===w.current.id;re&&W&&(Q=!1)}if(Q){const X=w.current.id;let Z=K.findIndex(oe=>oe.pattern.id===X);if(Z===-1){const oe=_.current?"":w.current.name;Z=K.findIndex(de=>de.patternName===oe)}Z===-1&&(Z=0);const $=K[Z],ee=I($.pattern),re=$.startBar*ee;g.current=Z,c.current=re;const W=b.current;W&&W($.patternName);const le=m.current;le&&rt(re,le,0)}else{const X=m.current;X&&rt(A,X,0)}x.current=V,B(),v.current=window.setInterval(B,k.current)},[B,I]),d=T.useCallback(()=>{p.current=!1,v.current!==null&&(clearInterval(v.current),v.current=null),sa()},[]);T.useEffect(()=>(s?L():d(),()=>{d()}),[s,L,d]);const U=T.useCallback(()=>{const M=h.current;if(M.length===0)return;p.current&&(p.current=!1,v.current!==null&&(clearInterval(v.current),v.current=null),sa());const V=M[0],K=I(V.pattern),F=V.startBar*K;g.current=0,c.current=F;const Q=m.current;Q&&rt(F,Q,0);const j=b.current;j&&j(V.patternName)},[I]);return{seekTo:N,resetToRangeStart:U}}function Ul(t,a,e){if(!a)return!1;const{startPatternName:s,endPatternName:r}=a;if(s===r)return!1;const o=["",...e.map(y=>y.name).sort((y,k)=>y.localeCompare(k))],l=o.indexOf(s),f=o.indexOf(r),x=o.indexOf(t);return x>=l&&x<=f}function _t(t,a,e,s,r){t&&a(!1),e&&s(!1),r()}function Vl(){const{isLoading:t,loadingProgress:a,showProgress:e,isFadingOut:s}=Ds(),{isMetronomePlaying:r,isPatternPlaying:n,toggleMetronomePlay:o,togglePatternPlay:l,stopAll:f,setIsMetronomePlaying:x,setIsPatternPlaying:y}=Ms(),k=On(),v=Hn(),[p,g]=T.useState(0),[c,h]=T.useState([]),[m,b]=T.useState(!0),S=T.useRef(null),w=T.useRef(null),[_,D]=T.useState(0),[R,I]=T.useState(()=>Ia()??mt),[N,H]=T.useState(ea),[E,B]=T.useState(0),[L,d]=T.useState(!1),[U,M]=T.useState(!1),[V,K]=T.useState(0),[F,Q]=T.useState(0),j=T.useRef(null),[A,X]=T.useState(null),[Z,$]=T.useState(!1),[ee,re]=T.useState(()=>ki()??{startPatternName:"",startBar:0,endPatternName:"",endBar:Rt-1}),{pattern:W,updateBPM:le,updateBarBpm:oe,toggleCell:de,toggleGhost:he,cycleThirtySecond:ve,addBar:u,removeBar:q,clearGrid:G,clearBar:P,insertPatternGrid:C,loadPattern:z,resetPattern:Y}=Ci(hn()),[J,O]=T.useState(()=>dt(W.id)),[te,ie]=T.useState({isLoading:!1,error:null}),[ae,ce]=T.useState(()=>Gs()),me=ut(E),pe=()=>{j.current&&(clearTimeout(j.current),j.current=null),U&&M(!1)};T.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const Be=(ne,se=!0)=>{var ue;if(p!==void 0){const[be]=W.timeSignature,ke=be*fe,we=Math.floor(p/ke),We=((ue=W.barBpmOverrides)==null?void 0:ue[we])!==void 0;if(Z||We){se&&oe(we,ne),I(ne);return}}I(ne),se&&(Ue(ne),le(ne))},ye=ne=>{H(ne)},_e=()=>{var ke;if(p===void 0)return;const[ne]=W.timeSignature,se=ne*fe,ue=Math.floor(p/se);((ke=W.barBpmOverrides)==null?void 0:ke[ue])!==void 0?(oe(ue,null),I(W.bpm),$(!1)):(oe(ue,W.bpm),$(!0))},Ee=()=>{_t(n,y,r,x,pe),B(0),$(!1),b(!0),Oe(void 0),Y(),I(mt),Ue(mt),le(mt),re({startPatternName:"",startBar:0,endPatternName:"",endBar:Rt-1})};T.useEffect(()=>{const ne=tt();h(ne);const se=gi();if(se){const ue=ne.find(be=>be.id===se);if(ue){b(!1),z(ue);const be=Ia();be!==null?I(be):(I(ue.bpm),Ue(ue.bpm))}else Oe(void 0)}},[]),T.useEffect(()=>{O(dt(W.id))},[W.id]),T.useEffect(()=>{Ns(k?ae:100)},[k,ae]),T.useEffect(()=>{bi(ee)},[ee]);const ge=(()=>{if(p===void 0||!W.barBpmOverrides)return!1;const[ne]=W.timeSignature,se=ne*fe,ue=Math.floor(p/se);return W.barBpmOverrides[ue]!==void 0})();T.useEffect(()=>{var we,We;if(p===void 0)return;const[ne]=W.timeSignature,se=ne*fe,ue=Math.floor(p/se),be=((we=W.barBpmOverrides)==null?void 0:we[ue])!==void 0,ke=ut(E);if(Z||be){const cr=(((We=W.barBpmOverrides)==null?void 0:We[ue])??W.bpm)*ke;I(cr)}else{const ya=W.bpm*ke;I(ya)}},[Z,p,W.timeSignature,W.barBpmOverrides,W.bpm,E]),Rs({isMetronomePlaying:r,isPatternPlaying:n,setIsMetronomePlaying:x,setIsPatternPlaying:y}),Pi(r,n),Es(),T.useEffect(()=>{const ne=se=>(se.preventDefault(),!1);return document.body.addEventListener("contextmenu",ne),()=>{document.body.removeEventListener("contextmenu",ne)}},[]),T.useEffect(()=>{const ne=ue=>{ue.touches.length>1&&ue.preventDefault()},se=ue=>{ue.preventDefault()};return document.body.addEventListener("touchmove",ne,{passive:!1}),document.body.addEventListener("gesturestart",se,{passive:!1}),()=>{document.body.removeEventListener("touchmove",ne),document.body.removeEventListener("gesturestart",se)}},[]);const Re=ne=>{if(ne===""){b(!0),Oe(void 0);const se=ut(E),ue=W.bpm*se;I(ue),Ue(W.bpm)}else{const se=c.find(ue=>ue.name===ne);if(se&&se.id!==W.id){b(!1),z(se),Oe(se.id);const ue=ut(E),be=se.bpm*ue;I(be),Ue(se.bpm)}}},{seekTo:Me,resetToRangeStart:Ce}=Ol({currentPattern:W,savedPatterns:c,crossPatternLoop:ee,isPlaying:n,isDraftMode:m,playbackRate:me,onSubdivisionChange:g,onPatternChange:Re,onPlayStart:()=>{D(ne=>ne+1)}}),Ge=()=>{Ce(),_t(n,y,r,x,pe)},ct=T.useMemo(()=>{if(!ee)return 0;const ne=m?"":W.name;return ee.startPatternName===ne?ee.startBar:0},[ee,m,W.name]),qe=Ks({isPlaying:n,isFullPracticeMode:k,playbackRate:me,bgmConfig:J,currentSubdivision:p,pattern:W,patternStartToken:_,rangeStartBar:ct});T.useEffect(()=>{if(!ee)return;const ne=m?"":W.name;if(ee.startPatternName!==ne||S.current===ee.startBar&&w.current===ee.startPatternName)return;const[se]=W.timeSignature,ue=se*fe;Me(ee.startBar*ue),S.current=ee.startBar,w.current=ee.startPatternName},[ee,m,W.name,W.timeSignature,Me]);const Ht=te.isLoading||qe.isLoading,xt=qe.isLoaded,Ze=te.error??qe.error,et=ne=>{E!==0&&n||Me(ne)},Gn=ne=>{const se=W.bars,[ue]=W.timeSignature,be=ue*fe;let ke;if(ne!==void 0?ke=Math.floor(ne/be):ke=se-1,q(ne),ke===se-1&&se>1){const We=(se-1)*be-1;Me(We)}},Wn=()=>{m||X({grid:W.grid.map(ne=>ne.slice()),bars:W.bars,timeSignature:W.timeSignature,drums:W.drums,bpm:W.bpm,barBpmOverrides:W.barBpmOverrides?{...W.barBpmOverrides}:void 0})},ga=(()=>A?A.timeSignature[0]===W.timeSignature[0]&&A.timeSignature[1]===W.timeSignature[1]&&A.drums.length===W.drums.length:!1)(),ba=ne=>{if(m||!A||!ga)return;_t(n,y,r,x,pe);const se=ne==="before"?0:W.bars;C(se,A),X(null)},Kn=ne=>ne===""&&m||ne===W.name?W:c.find(ue=>ue.name===ne)??W,$n=ee?ee.startPatternName:m?"":W.name,ka=Kn($n),va=Math.max(1,ka.bpm*me),Ft=ka.timeSignature,qn=Math.round(60/va*(4/Ft[1])*Ft[0]*1e3),{currentBeat:Zn}=Ln({bpm:va,timeSignature:Ft,isPlaying:U,resetToken:V}),Yn=()=>{d(ne=>{const se=!ne;return se||pe(),se})},Gt=()=>{if(U){pe();return}if(n){y(!1);return}if(!L){l();return}r&&x(!1),Ce(),K(ne=>ne+1),M(!0),j.current=window.setTimeout(()=>{M(!1),Q(ne=>ne+1),y(!0)},qn-50)},Jn=()=>{pe(),f()},Xn=()=>{if(m)return;const ne={...W,updatedAt:Date.now()};St(ne),h(tt())},Qn=()=>{const ne=Wt(c),se=W.id,ue=dt(se),be={...W,id:jt(),name:ne,updatedAt:Date.now()};St(be),(ue.fileId||ue.offsetMs!==0||ue.volumePct!==100)&&(at(be.id,ue),Da(se)),b(!1),Oe(be.id),z(be),h(tt())},er=ne=>{_t(n,y,r,x,pe);const se=Ul(ne.name,ee,c);if(se||B(0),$(!1),b(!1),z(ne),Oe(ne.id),se&&E>0){const ue=ut(E),be=ne.bpm*ue;I(be),Ue(ne.bpm)}else I(ne.bpm),Ue(ne.bpm);se||re({startPatternName:ne.name,startBar:0,endPatternName:ne.name,endBar:ne.bars-1}),setTimeout(()=>{Ce()},300)},tr=ne=>{pe(),(async()=>{const ue=dt(ne);ue.fileId&&await Jt(ue.fileId),Da(ne)})(),hi(ne),W.id===ne&&(b(!0),Y(),Oe(void 0)),h(tt())},ar=async ne=>{if(!(ne.type==="audio/mpeg"||ne.name.toLowerCase().endsWith(".mp3"))){ie({isLoading:!1,error:"Please upload an MP3 file."});return}ie({isLoading:!0,error:null});try{J.fileId&&await Jt(J.fileId);const{id:ue,meta:be}=await An(ne),ke={fileId:ue,offsetMs:J.offsetMs??0,volumePct:J.volumePct??100,meta:be};at(W.id,ke),O(ke),ie({isLoading:!1,error:null})}catch(ue){ie({isLoading:!1,error:ue instanceof Error?ue.message:"Failed to upload background music."})}},nr=T.useCallback(ne=>{const se={...J,offsetMs:ne};at(W.id,se),O(se)},[J,W.id]),rr=T.useCallback(ne=>{const se={...J,volumePct:ne};at(W.id,se),O(se)},[J,W.id]),ir=ne=>{ce(ne),Ws(ne)},sr=()=>{(async()=>{J.fileId&&await Jt(J.fileId);const se={offsetMs:0,volumePct:100};at(W.id,se),O(se)})()},or=ne=>{const se=Na(ne);if(!se){console.log("Invalid pattern data");return}const ue=Wt(c),be=Date.now(),ke={...se,id:jt(),name:ue,createdAt:be,updatedAt:be};St(ke),b(!1),z(ke),Oe(ke.id),I(ke.bpm),Ue(ke.bpm),le(ke.bpm),h(tt()),re({startPatternName:ke.name,startBar:0,endPatternName:ke.name,endBar:ke.bars-1})},lr=(ne,se)=>{const ue=Na(ne);if(!ue){console.log("Invalid pattern data");return}const be=Wt(c),ke=Date.now(),we={...ue,id:jt(),name:be,createdAt:ke,updatedAt:ke};if(St(we),b(!1),z(we),Oe(we.id),I(we.bpm),Ue(we.bpm),le(we.bpm),h(tt()),se&&se.fileId){at(we.id,{fileId:se.fileId,offsetMs:se.offsetMs,volumePct:se.volumePct,meta:se.meta});const We=dt(we.id);O(We)}re({startPatternName:we.name,startBar:0,endPatternName:we.name,endBar:we.bars-1})};if(t){const ne=Math.round(a.loaded/a.total*100);return i.jsx("div",{className:`app loading ${s?"fade-out":""}`,children:i.jsx("div",{className:"loading-container",children:e&&i.jsx("div",{className:"loading-progress",children:i.jsx("div",{className:"loading-progress-bar",children:i.jsx("div",{className:"loading-progress-fill",style:{width:`${ne}%`}})})})})})}return i.jsxs("div",{className:"app",children:[i.jsx(Js,{bpm:R,timeSignature:N,isPlaying:n,resetToken:F,onBPMChange:Be,isPatternPlaying:r,isCountInPlaying:U,countInBeat:Zn,onPatternPlayToggle:o,onTimeSignatureChange:ye,rateIndex:E,onRateIndexChange:B,rates:sn,rateLabels:Pr,patternPlayButton:v?i.jsx(Za,{variant:"inline",isPlaying:n,onClick:Gt,onLongPress:Ge,fullPracticeMode:k,isCountInEnabled:L}):void 0}),i.jsx("main",{className:"app-main",children:i.jsx(dl,{pattern:W,onCellClick:de,onToggleGhost:he,onCycleThirtySecond:ve,onAddBar:u,onRemoveBar:Gn,onClearGrid:G,onClearBar:P,crossPatternLoop:ee,onCrossPatternLoopChange:re,onSave:Qn,onSaveCurrentPattern:Xn,onImportPattern:or,onImportPatternWithBgm:lr,onLoadFromSlot:er,onDeletePattern:tr,onStopAllPlaying:Jn,onSelectDraft:Ee,savedPatterns:c,currentBeat:p,isPlaying:n,onPlayToggle:Gt,isDraftMode:m,onNotationDoubleClick:et,canCopyPattern:!m,hasCopiedPattern:!!A,canPastePattern:ga,onCopyPattern:Wn,onPastePatternBefore:()=>ba("before"),onPastePatternAfter:()=>ba("after"),bgmConfig:J,bgmIsLoading:Ht,bgmIsLoaded:xt,bgmError:Ze,onBgmUpload:ar,onBgmOffsetChange:nr,onBgmVolumeChange:rr,onBgmDelete:sr,masterVolume:ae,onMasterVolumeChange:ir,isCountInEnabled:L,onCountInToggle:Yn,onBarBpmModeToggle:_e,currentBarHasOverride:ge})}),!v&&i.jsx(Za,{isPlaying:n,onClick:Gt,onLongPress:Ge,fullPracticeMode:k,isCountInEnabled:L}),i.jsx(El,{})]})}Qt.createRoot(document.getElementById("root")).render(i.jsx(pr.StrictMode,{children:i.jsx(Vl,{})}));
